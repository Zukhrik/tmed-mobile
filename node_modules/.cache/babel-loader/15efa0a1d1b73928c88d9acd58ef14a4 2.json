{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import moment from'moment';import{Col,Image,Row}from'antd';import{useStore}from'effector-react';import{useParams}from'react-router-dom';import{useTranslation}from'react-i18next';import{useReactToPrint}from'react-to-print';import{DetailImageWrapper,RecordDetailWrapper}from'../atoms';import{$accountModel}from'../../../Models/account-model';import{$orderModel}from'../../../Models/order-model';import{Modal}from'../../../UIComponents/Modal';import{IconBox,SkeletonUI}from'../../../UIComponents/GlobalStyles';import{CloseSvg}from'../../../Icons/Close';import{Text}from'../../../UIComponents/Typography/Text';import{Title}from'../../../UIComponents/Typography/Title';import{Button}from'../../../UIComponents/Button';import{OnCloseModal}from'./on-close-modal';import{generateQrCodeBase64}from'../../../utils/qr_code';import qrBlur from'../../../Assets/Images/qr-blur.png';export var InfoMatView=function InfoMatView(){var _data$order_id,_data$order_id2,_data$order_id3,_data$order_id4,_data$order_id5,_data$order_id6,_data$order_id6$respo,_data$order_id6$respo2,_data$order_id7,_data$order_id7$respo,_data$order_id7$respo2,_data$order_id8,_data$order_id8$respo,_data$order_id8$respo2,_data$order_id9,_data$order_id10,_data$order_id10$tota,_currentProfile$curre,_currentProfile$curre2;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useParams=useParams(),order_id=_useParams.order_id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openModal=_useState2[0],setModalOpen=_useState2[1];var _useStore=useStore($accountModel),currentProfile=_useStore.$profiles.currentProfile;var _useStore2=useStore($orderModel),_useStore2$$orderDeta=_useStore2.$orderDetail,data=_useStore2$$orderDeta.data,forceLoading=_useStore2$$orderDeta.forceLoading,loading=_useStore2$$orderDeta.loading;var _useStore3=useStore($orderModel),orderIdOffersData=_useStore3.$orderIdOffers.data;var ref=useRef(null);var handlePrint=useReactToPrint({content:function content(){return ref.current;}});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{centered:true,modalIsOpen:openModal,component:/*#__PURE__*/React.createElement(OnCloseModal,{data:data===null||data===void 0?void 0:data[order_id]}),onCancel:function onCancel(){return setModalOpen(false);},width:940}),/*#__PURE__*/React.createElement(RecordDetailWrapper,null,/*#__PURE__*/React.createElement(IconBox,{onClick:function onClick(){return setModalOpen(true);}},/*#__PURE__*/React.createElement(CloseSvg,null)),/*#__PURE__*/React.createElement(DetailImageWrapper,{ref:ref},/*#__PURE__*/React.createElement(Row,{gutter:[12,4],className:\"check-form-wrapper\"},/*#__PURE__*/React.createElement(Col,{className:\"qr-code-wrapper\"},forceLoading===2&&(data===null||data===void 0?void 0:data[order_id])?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Image,{width:210,height:210,preview:(data===null||data===void 0?void 0:(_data$order_id=data[order_id])===null||_data$order_id===void 0?void 0:_data$order_id.status)!==0?{mask:''}:false,src:(data===null||data===void 0?void 0:(_data$order_id2=data[order_id])===null||_data$order_id2===void 0?void 0:_data$order_id2.status)!==0?generateQrCodeBase64(data===null||data===void 0?void 0:(_data$order_id3=data[order_id])===null||_data$order_id3===void 0?void 0:_data$order_id3.qr_code):qrBlur})):/*#__PURE__*/React.createElement(SkeletonUI,{animation:\"wave\",variant:\"rect\",width:210,height:210})),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Sana'),\": \")),data&&order_id&&data[order_id]&&/*#__PURE__*/React.createElement(Title,null,moment(data===null||data===void 0?void 0:(_data$order_id4=data[order_id])===null||_data$order_id4===void 0?void 0:_data$order_id4.date).format('DD-MM-YYYY HH:mm'))),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Kvitansiya raqami'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id5=data[order_id])===null||_data$order_id5===void 0?void 0:_data$order_id5.id)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Tashkilot'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id6=data[order_id])===null||_data$order_id6===void 0?void 0:(_data$order_id6$respo=_data$order_id6.responsible)===null||_data$order_id6$respo===void 0?void 0:(_data$order_id6$respo2=_data$order_id6$respo.org)===null||_data$order_id6$respo2===void 0?void 0:_data$order_id6$respo2.name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Mutaxassis'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id7=data[order_id])===null||_data$order_id7===void 0?void 0:(_data$order_id7$respo=_data$order_id7.responsible)===null||_data$order_id7$respo===void 0?void 0:(_data$order_id7$respo2=_data$order_id7$respo.user)===null||_data$order_id7$respo2===void 0?void 0:_data$order_id7$respo2.full_name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Bo\\'lim'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id8=data[order_id])===null||_data$order_id8===void 0?void 0:(_data$order_id8$respo=_data$order_id8.responsible)===null||_data$order_id8$respo===void 0?void 0:(_data$order_id8$respo2=_data$order_id8$respo.spec_cat)===null||_data$order_id8$respo2===void 0?void 0:_data$order_id8$respo2.name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Foydalanuvchi'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},(data===null||data===void 0?void 0:data[order_id])&&(currentProfile===null||currentProfile===void 0?void 0:currentProfile.name)===\"\".concat(null,\" \")?currentProfile===null||currentProfile===void 0?void 0:currentProfile.slug_name:currentProfile===null||currentProfile===void 0?void 0:currentProfile.name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Uchrashuv vaqti'),\": \")),/*#__PURE__*/React.createElement(Title,null,(data===null||data===void 0?void 0:data[order_id])&&moment(data===null||data===void 0?void 0:(_data$order_id9=data[order_id])===null||_data$order_id9===void 0?void 0:_data$order_id9.meet_date).format('DD-MM-YYYY HH:mm'))),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Umumiy narx'),\": \")),/*#__PURE__*/React.createElement(Title,null,(data===null||data===void 0?void 0:data[order_id])&&\"\".concat(data===null||data===void 0?void 0:(_data$order_id10=data[order_id])===null||_data$order_id10===void 0?void 0:(_data$order_id10$tota=_data$order_id10.total_cost)===null||_data$order_id10$tota===void 0?void 0:_data$order_id10$tota.toLocaleString('fi-Fi'),\"\\n                                                \").concat(currentProfile===null||currentProfile===void 0?void 0:(_currentProfile$curre=currentProfile.currency)===null||_currentProfile$curre===void 0?void 0:(_currentProfile$curre2=_currentProfile$curre.code)===null||_currentProfile$curre2===void 0?void 0:_currentProfile$curre2.toUpperCase()))),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('To\\'lov turi'),\": \")),(data===null||data===void 0?void 0:data[order_id])&&/*#__PURE__*/React.createElement(Title,null,\"Naqd\")),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Takliflar'),\": \"))),orderIdOffersData&&orderIdOffersData.map(function(item,idx){var _currentProfile$curre3,_currentProfile$curre4;return/*#__PURE__*/React.createElement(Col,{span:24,key:\"\".concat(idx+1),className:\"display-style\"},/*#__PURE__*/React.createElement(Title,null,\"\".concat(item.offering.name,\" \").concat(item.qty,\"x\").concat(item.cost.toLocaleString('fi-Fi'),\"\\n                                    \").concat(currentProfile===null||currentProfile===void 0?void 0:(_currentProfile$curre3=currentProfile.currency)===null||_currentProfile$curre3===void 0?void 0:(_currentProfile$curre4=_currentProfile$curre3.code)===null||_currentProfile$curre4===void 0?void 0:_currentProfile$curre4.toUpperCase())));}),/*#__PURE__*/React.createElement(Col,{style:{display:'flex',justifyContent:'center'}},(data===null||data===void 0?void 0:data[order_id])&&/*#__PURE__*/React.createElement(Text,null,\"Haridingiz Uchun Rahmat!\")),/*#__PURE__*/React.createElement(Col,{span:24},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{border:'1px dashed var(--dark-dwed)'}})))),!loading&&data[order_id]&&data[order_id].status!==0&&/*#__PURE__*/React.createElement(Button,{size:\"l\",variant:\"primary\",onClick:handlePrint},t('print_qr_code'))));};","map":null,"metadata":{},"sourceType":"module"}