{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useState}from'react';import{OfferGroupWrapper,OfferingGroupSearchForm}from'../style';import{Col,Row,Spin}from'antd';import{useStore}from'effector-react';import{OfferingGroupItem}from'../OfferingGroupItem';import{URL_KEYS}from'../../../../Constants';import{useUrlParams}from'../../../../Hooks/app';import{useLocation,useParams}from'react-router-dom';import InfiniteScroll from'react-infinite-scroll-component';import{$offeringsModel,orgOfferGroupListMount}from'../../../../Models/offerings-model';import{SearchSvg}from'../../../../Icons/Search';import{useTranslation}from'react-i18next';import{useOfferingList}from'../../../../Hooks/offerings';import{generateSkeleton}from'../../../../utils/skeleton-utils';import{OfferingGroupItemSkeleton}from'../OfferingGroupItemSkeleton';var skeleton=generateSkeleton(10);export var OverlayOfferingGroup=function OverlayOfferingGroup(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useParams=useParams(),organization=_useParams.organization;var _useOfferingList=useOfferingList(),loadMoreOfferingGroup=_useOfferingList.loadMoreOfferingGroup;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchText=_useState2[0],setSearchText=_useState2[1];var groupId=urlData[URL_KEYS.OFFERING_GROUP_ID];var _useStore=useStore($offeringsModel),_useStore$$offeringGr=_useStore.$offeringGroupList,data=_useStore$$offeringGr.data,loading=_useStore$$offeringGr.loading,result=_useStore$$offeringGr.result,forceLoading=_useStore$$offeringGr.forceLoading;var generateUrl=useCallback(function(id){var url=[];if(urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]){url.push(\"\".concat(URL_KEYS.SPECIALIST_CATEGORY_ID,\"=\").concat(urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]));}if(urlData[URL_KEYS.SPECIALIST_ID]){url.push(\"\".concat(URL_KEYS.SPECIALIST_ID,\"=\").concat(urlData[URL_KEYS.SPECIALIST_ID]));}if(!groupId||groupId!==String(id)){url.push(\"\".concat(URL_KEYS.OFFERING_GROUP_ID,\"=\").concat(id));}return{pathname:pathname,search:url.join('&')};},[pathname,groupId,urlData]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(searchText.length>2){var params={clear:true,organization:organization,params:{search:searchText}};orgOfferGroupListMount(params);}};var _onChange=useCallback(function(value){if(value.length===0){var params={clear:true,organization:organization};orgOfferGroupListMount(params);}setSearchText(value);},[organization]);return/*#__PURE__*/React.createElement(OfferGroupWrapper,{id:\"scrollableDiv\"},/*#__PURE__*/React.createElement(OfferingGroupSearchForm,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"\".concat(t('search'),\"...\"),value:searchText,onChange:function onChange(e){return _onChange(e.target.value);}}),/*#__PURE__*/React.createElement(SearchSvg,null)),/*#__PURE__*/React.createElement(InfiniteScroll,{next:loadMoreOfferingGroup,dataLength:(result===null||result===void 0?void 0:result.nextOffset)||20,hasMore:!loading&&!!(result===null||result===void 0?void 0:result.next),loader:/*#__PURE__*/React.createElement(Spin,null),style:{overflow:'hidden',padding:'50px 0'},scrollableTarget:\"scrollableDiv\"},/*#__PURE__*/React.createElement(Row,{gutter:[12,12]},data&&forceLoading===2?data.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{className:\"centered\",key:idx+1,xs:8,sm:6,md:4},/*#__PURE__*/React.createElement(OfferingGroupItem,{name:item.name,imgUrl:item.image,path:generateUrl(item.id),isActive:function isActive(){return groupId&&groupId===String(item.id);}}));}):skeleton.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{key:idx+1,xs:8,sm:6,md:4,className:\"centered\"},/*#__PURE__*/React.createElement(OfferingGroupItemSkeleton,null));}))));};","map":null,"metadata":{},"sourceType":"module"}