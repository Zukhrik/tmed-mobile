{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useState}from'react';import{EmptyContainerWrapper,RootContent}from'../../../UIComponents/GlobalStyles';import{FixedHeader}from'../../../Components/FixedHeader';import{HomeFixedHeaderComponent}from'../organisms';import{useHomeList}from'../../../Hooks/home';import InfiniteScroll from'react-infinite-scroll-component';import{Col,Row}from'antd';import{useStore}from'effector-react';import{$orgModel}from'../../../Models/org-model';import{useHistory}from'react-router-dom';import{generateSkeleton}from'../../../utils/skeleton-utils';import{OrganizationCard,OrganizationCardSkeleton}from'../../../Components/Cards/OrganizationCard';import{NoSearchResultSvg}from'../../../Icons/NoSearchResult';import{Title}from'../../../UIComponents/Typography/Title';import{useTranslation}from'react-i18next';import{OrgsSearchInput}from'../molecules';import org from'../../../Service/org';var skeleton=generateSkeleton(10);export var Home=function Home(){var _useHistory=useHistory(),push=_useHistory.push;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useHomeList=useHomeList(),loadMore=_useHomeList.loadMore;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orgList=_useState4[0],setOrgList=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),orgSearch=_useState6[0],setOrgSearch=_useState6[1];var _useStore=useStore($orgModel),_useStore$$allOrgList=_useStore.$allOrgList,data=_useStore$$allOrgList.data,result=_useStore$$allOrgList.result,loading=_useStore$$allOrgList.loading,forceLoading=_useStore$$allOrgList.forceLoading;var handleOrgItemClick=function handleOrgItemClick(item){push(\"/\".concat(item.slug_name,\"/offerings\"));};var handleSubmit=useCallback(function(e){e.preventDefault();if(orgSearch.length>3){var _data={clear:true,params:{search:orgSearch}};org.getAllOrg(_data).then(function(res){if(res){setOrgList(res.data.results);}});}},[orgSearch]);var onClose=function onClose(){setModal(false);setOrgList([]);setOrgSearch('');};return/*#__PURE__*/React.createElement(RootContent,{paddingTop:62,paddingBottom:65},/*#__PURE__*/React.createElement(OrgsSearchInput,{visible:modal,onCancel:onClose,setModal:setModal,setOrgSearch:setOrgSearch,orgSearch:orgSearch,handleSubmit:handleSubmit,orgList:orgList}),/*#__PURE__*/React.createElement(FixedHeader,{component:/*#__PURE__*/React.createElement(HomeFixedHeaderComponent,{setModal:setModal})}),/*#__PURE__*/React.createElement(InfiniteScroll,{next:loadMore,hasMore:!loading&&!!result.next,dataLength:result.nextOffset||10,loader:/*#__PURE__*/React.createElement(React.Fragment,null,\"...loading\")},forceLoading===2&&data?/*#__PURE__*/React.createElement(React.Fragment,null,data.length>0?/*#__PURE__*/React.createElement(Row,{className:\"container\",gutter:[0,12]},data.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{span:24,key:\"\".concat(idx+1)},/*#__PURE__*/React.createElement(OrganizationCard,{name:item.name,imgUrl:item.logo,containerPath:function containerPath(){return handleOrgItemClick(item);},category:item.category.name,ethics:item.rating.ethics.level,aesthetics:item.rating.aesthetics.level,professional:item.rating.professional.level,backgroundImage:item.background}));})):/*#__PURE__*/React.createElement(EmptyContainerWrapper,{style:{height:'80vh'}},/*#__PURE__*/React.createElement(NoSearchResultSvg,null),/*#__PURE__*/React.createElement(Title,{level:4},t('no_search_result')))):/*#__PURE__*/React.createElement(Row,{className:\"container\",gutter:[0,12]},skeleton.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{span:24,key:\"\".concat(idx+1)},/*#__PURE__*/React.createElement(OrganizationCardSkeleton,null));}))));};","map":null,"metadata":{},"sourceType":"module"}