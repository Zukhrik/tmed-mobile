{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import moment from'moment';import{Col,Image,Row}from'antd';import{useStore}from'effector-react';import{useParams}from'react-router-dom';import{useTranslation}from'react-i18next';import{useReactToPrint}from'react-to-print';import{DetailImageWrapper,RecordDetailWrapper}from'../atoms';import{$accountModel}from'../../../Models/account-model';import{$orderModel}from'../../../Models/order-model';import{Modal}from'../../../UIComponents/Modal';import{IconBox,SkeletonUI}from'../../../UIComponents/GlobalStyles';import{CloseSvg}from'../../../Icons/Close';import{Text}from'../../../UIComponents/Typography/Text';import{Title}from'../../../UIComponents/Typography/Title';import{Button}from'../../../UIComponents/Button';import{OnCloseModal}from'./on-close-modal';import{generateQrCodeBase64}from'../../../utils/qr_code';import qrBlur from'../../../Assets/Images/qr-blur.png';export var InfoMatView=function InfoMatView(){var _data$order_id,_data$order_id2,_data$order_id3,_data$order_id4,_data$order_id5,_data$order_id6,_data$order_id6$respo,_data$order_id6$respo2,_data$order_id7,_data$order_id7$respo,_data$order_id7$respo2,_data$order_id8,_data$order_id8$respo,_data$order_id8$respo2,_data$order_id9,_data$order_id10,_data$order_id10$tota,_currentProfile$curre,_currentProfile$curre2;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useParams=useParams(),order_id=_useParams.order_id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openModal=_useState2[0],setModalOpen=_useState2[1];var _useStore=useStore($accountModel),currentProfile=_useStore.$profiles.currentProfile;var _useStore2=useStore($orderModel),_useStore2$$orderDeta=_useStore2.$orderDetail,data=_useStore2$$orderDeta.data,forceLoading=_useStore2$$orderDeta.forceLoading,loading=_useStore2$$orderDeta.loading;var _useStore3=useStore($orderModel),orderIdOffersData=_useStore3.$orderIdOffers.data;var ref=useRef(null);var handlePrint=useReactToPrint({content:function content(){return ref.current;}});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{centered:true,modalIsOpen:openModal,component:/*#__PURE__*/React.createElement(OnCloseModal,{data:data===null||data===void 0?void 0:data[order_id]}),onCancel:function onCancel(){return setModalOpen(false);},width:940}),/*#__PURE__*/React.createElement(RecordDetailWrapper,null,/*#__PURE__*/React.createElement(IconBox,{onClick:function onClick(){return setModalOpen(true);}},/*#__PURE__*/React.createElement(CloseSvg,null)),/*#__PURE__*/React.createElement(DetailImageWrapper,{ref:ref},/*#__PURE__*/React.createElement(Row,{gutter:[12,4],className:\"check-form-wrapper\"},/*#__PURE__*/React.createElement(Col,{className:\"qr-code-wrapper\"},forceLoading===2&&(data===null||data===void 0?void 0:data[order_id])?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Image,{width:210,height:210,preview:(data===null||data===void 0?void 0:(_data$order_id=data[order_id])===null||_data$order_id===void 0?void 0:_data$order_id.status)!==0?{mask:''}:false,src:(data===null||data===void 0?void 0:(_data$order_id2=data[order_id])===null||_data$order_id2===void 0?void 0:_data$order_id2.status)!==0?generateQrCodeBase64(data===null||data===void 0?void 0:(_data$order_id3=data[order_id])===null||_data$order_id3===void 0?void 0:_data$order_id3.qr_code):qrBlur})):/*#__PURE__*/React.createElement(SkeletonUI,{animation:\"wave\",variant:\"rect\",width:210,height:210})),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Sana'),\": \")),data&&order_id&&data[order_id]&&/*#__PURE__*/React.createElement(Title,null,moment(data===null||data===void 0?void 0:(_data$order_id4=data[order_id])===null||_data$order_id4===void 0?void 0:_data$order_id4.date).format('DD-MM-YYYY HH:mm'))),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Kvitansiya raqami'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id5=data[order_id])===null||_data$order_id5===void 0?void 0:_data$order_id5.id)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Tashkilot'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id6=data[order_id])===null||_data$order_id6===void 0?void 0:(_data$order_id6$respo=_data$order_id6.responsible)===null||_data$order_id6$respo===void 0?void 0:(_data$order_id6$respo2=_data$order_id6$respo.org)===null||_data$order_id6$respo2===void 0?void 0:_data$order_id6$respo2.name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Mutaxassis'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id7=data[order_id])===null||_data$order_id7===void 0?void 0:(_data$order_id7$respo=_data$order_id7.responsible)===null||_data$order_id7$respo===void 0?void 0:(_data$order_id7$respo2=_data$order_id7$respo.user)===null||_data$order_id7$respo2===void 0?void 0:_data$order_id7$respo2.full_name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Bo\\'lim'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},data===null||data===void 0?void 0:(_data$order_id8=data[order_id])===null||_data$order_id8===void 0?void 0:(_data$order_id8$respo=_data$order_id8.responsible)===null||_data$order_id8$respo===void 0?void 0:(_data$order_id8$respo2=_data$order_id8$respo.spec_cat)===null||_data$order_id8$respo2===void 0?void 0:_data$order_id8$respo2.name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Foydalanuvchi'),\": \")),/*#__PURE__*/React.createElement(Title,{alignType:\"right\"},(data===null||data===void 0?void 0:data[order_id])&&(currentProfile===null||currentProfile===void 0?void 0:currentProfile.name)===\"\".concat(null,\" \")?currentProfile===null||currentProfile===void 0?void 0:currentProfile.slug_name:currentProfile===null||currentProfile===void 0?void 0:currentProfile.name)),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Uchrashuv vaqti'),\": \")),/*#__PURE__*/React.createElement(Title,null,(data===null||data===void 0?void 0:data[order_id])&&moment(data===null||data===void 0?void 0:(_data$order_id9=data[order_id])===null||_data$order_id9===void 0?void 0:_data$order_id9.meet_date).format('DD-MM-YYYY HH:mm'))),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Umumiy narx'),\": \")),/*#__PURE__*/React.createElement(Title,null,(data===null||data===void 0?void 0:data[order_id])&&\"\".concat(data===null||data===void 0?void 0:(_data$order_id10=data[order_id])===null||_data$order_id10===void 0?void 0:(_data$order_id10$tota=_data$order_id10.total_cost)===null||_data$order_id10$tota===void 0?void 0:_data$order_id10$tota.toLocaleString('fi-Fi'),\"\\n                                                \").concat(currentProfile===null||currentProfile===void 0?void 0:(_currentProfile$curre=currentProfile.currency)===null||_currentProfile$curre===void 0?void 0:(_currentProfile$curre2=_currentProfile$curre.code)===null||_currentProfile$curre2===void 0?void 0:_currentProfile$curre2.toUpperCase()))),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('To\\'lov turi'),\": \")),(data===null||data===void 0?void 0:data[order_id])&&/*#__PURE__*/React.createElement(Title,null,\"Naqd\")),/*#__PURE__*/React.createElement(Col,{className:\"display-style\"},/*#__PURE__*/React.createElement(Text,{className:\"static-width\"},\"\".concat(t('Takliflar'),\": \"))),orderIdOffersData&&orderIdOffersData.map(function(item,idx){var _currentProfile$curre3,_currentProfile$curre4;return/*#__PURE__*/React.createElement(Col,{span:24,key:\"\".concat(idx+1),className:\"display-style\"},/*#__PURE__*/React.createElement(Title,null,\"\".concat(item.offering.name,\" \").concat(item.qty,\"x\").concat(item.cost.toLocaleString('fi-Fi'),\"\\n                                    \").concat(currentProfile===null||currentProfile===void 0?void 0:(_currentProfile$curre3=currentProfile.currency)===null||_currentProfile$curre3===void 0?void 0:(_currentProfile$curre4=_currentProfile$curre3.code)===null||_currentProfile$curre4===void 0?void 0:_currentProfile$curre4.toUpperCase())));}),/*#__PURE__*/React.createElement(Col,{style:{display:'flex',justifyContent:'center'}},(data===null||data===void 0?void 0:data[order_id])&&/*#__PURE__*/React.createElement(Text,null,\"Haridingiz Uchun Rahmat!\")),/*#__PURE__*/React.createElement(Col,{span:24},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{border:'1px dashed var(--dark-dwed)'}})))),!loading&&data[order_id]&&data[order_id].status!==0&&/*#__PURE__*/React.createElement(Button,{size:\"l\",variant:\"primary\",onClick:handlePrint},t('print_qr_code'))));};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Views/Records/organisms/info-mat-view.jsx"],"names":["React","useRef","useState","moment","Col","Image","Row","useStore","useParams","useTranslation","useReactToPrint","DetailImageWrapper","RecordDetailWrapper","$accountModel","$orderModel","Modal","IconBox","SkeletonUI","CloseSvg","Text","Title","Button","OnCloseModal","generateQrCodeBase64","qrBlur","InfoMatView","t","order_id","openModal","setModalOpen","currentProfile","$profiles","$orderDetail","data","forceLoading","loading","orderIdOffersData","$orderIdOffers","ref","handlePrint","content","current","status","mask","qr_code","date","format","id","responsible","org","name","user","full_name","spec_cat","slug_name","meet_date","total_cost","toLocaleString","currency","code","toUpperCase","map","item","idx","offering","qty","cost","display","justifyContent","border"],"mappings":"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","sourcesContent":["import React, {useRef, useState} from 'react'\nimport moment from 'moment'\nimport {Col, Image, Row} from 'antd'\nimport {useStore} from 'effector-react'\nimport {useParams} from 'react-router-dom'\nimport {useTranslation} from 'react-i18next'\nimport {useReactToPrint} from 'react-to-print'\nimport {DetailImageWrapper, RecordDetailWrapper} from '../atoms'\nimport {$accountModel} from '../../../Models/account-model'\nimport {$orderModel} from '../../../Models/order-model'\nimport {Modal} from '../../../UIComponents/Modal'\nimport {IconBox, SkeletonUI} from '../../../UIComponents/GlobalStyles'\nimport {CloseSvg} from '../../../Icons/Close'\nimport {Text} from '../../../UIComponents/Typography/Text'\nimport {Title} from '../../../UIComponents/Typography/Title'\nimport {Button} from '../../../UIComponents/Button'\nimport {OnCloseModal} from './on-close-modal'\nimport {generateQrCodeBase64} from '../../../utils/qr_code'\nimport qrBlur from '../../../Assets/Images/qr-blur.png'\n\nexport const InfoMatView = () => {\n    const {t} = useTranslation()\n    const {order_id} = useParams()\n    const [openModal, setModalOpen] = useState(false)\n    const {$profiles: {currentProfile}} = useStore($accountModel)\n    const {$orderDetail: {data, forceLoading, loading}} = useStore($orderModel)\n    const {$orderIdOffers: {data: orderIdOffersData}} = useStore($orderModel)\n    \n    \n    const ref = useRef(null)\n    const handlePrint = useReactToPrint({\n        content: () => ref.current\n    })\n    \n    return (\n        <>\n            <Modal\n                centered\n                modalIsOpen={openModal}\n                component={<OnCloseModal data={data?.[order_id]}/>}\n                onCancel={() => setModalOpen(false)}\n                width={940}\n            />\n            <RecordDetailWrapper>\n                <IconBox\n                    onClick={() => setModalOpen(true)}\n                >\n                    <CloseSvg/>\n                </IconBox>\n                <DetailImageWrapper ref={ref}>\n                    <Row\n                        gutter={[12, 4]}\n                        className='check-form-wrapper'\n                    >\n                        <Col className='qr-code-wrapper'>\n                            {\n                                forceLoading === 2 && data?.[order_id]\n                                    ? <>\n                                        <Image\n                                            width={210}\n                                            height={210}\n                                            preview={data?.[order_id]?.status !== 0 ? {mask: ''} : false}\n                                            src={\n                                                data?.[order_id]?.status !== 0\n                                                    ? generateQrCodeBase64(data?.[order_id]?.qr_code)\n                                                    : qrBlur\n                                            }\n                                        />\n                                    </>\n                                    : <SkeletonUI animation='wave' variant='rect' width={210} height={210}/>\n                            }\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Sana')}: `}\n                            </Text>\n                            {\n                                data && order_id && data[order_id] && (\n                                    <Title>\n                                        {moment(data?.[order_id]?.date).format('DD-MM-YYYY HH:mm')}\n                                    </Title>\n                                )\n                            }\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Kvitansiya raqami')}: `}\n                            </Text>\n                            <Title alignType='right'>\n                                {data?.[order_id]?.id}\n                            </Title>\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Tashkilot')}: `}\n                            </Text>\n                            <Title alignType='right'>\n                                {data?.[order_id]?.responsible?.org?.name}\n                            </Title>\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Mutaxassis')}: `}\n                            </Text>\n                            <Title alignType='right'>\n                                {data?.[order_id]?.responsible?.user?.full_name}\n                            </Title>\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Bo\\'lim')}: `}\n                            </Text>\n                            <Title alignType='right'>\n                                {data?.[order_id]?.responsible?.spec_cat?.name}\n                            </Title>\n                        </Col>\n                        \n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Foydalanuvchi')}: `}\n                            </Text>\n                            <Title alignType='right'>\n                                {\n                                    data?.[order_id] && currentProfile?.name === `${null} `\n                                        ? currentProfile?.slug_name\n                                        : currentProfile?.name\n                                }\n                            </Title>\n                        </Col>\n                        \n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Uchrashuv vaqti')}: `}\n                            </Text>\n                            <Title>\n                                {data?.[order_id] && moment(data?.[order_id]?.meet_date).format('DD-MM-YYYY HH:mm')}\n                            </Title>\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Umumiy narx')}: `}\n                            </Text>\n                            <Title>\n                                {data?.[order_id] && `${data?.[order_id]?.total_cost?.toLocaleString('fi-Fi')}\n                                                ${currentProfile?.currency?.code?.toUpperCase()}`}\n                            </Title>\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('To\\'lov turi')}: `}\n                            </Text>\n                            {data?.[order_id] && <Title>Naqd</Title>}\n                        </Col>\n                        <Col className='display-style'>\n                            <Text\n                                className='static-width'\n                            >\n                                {`${t('Takliflar')}: `}\n                            </Text>\n                        </Col>\n                        {orderIdOffersData && orderIdOffersData.map((item, idx) => (\n                            <Col\n                                span={24}\n                                key={`${idx + 1}`}\n                                className='display-style'\n                            >\n                                <Title>\n                                    {`${item.offering.name} ${item.qty}x${item.cost.toLocaleString('fi-Fi')}\n                                    ${currentProfile?.currency?.code?.toUpperCase()}`}\n                                </Title>\n                            </Col>\n                        ))}\n                        <Col style={{display: 'flex', justifyContent: 'center'}}>\n                            {data?.[order_id] && <Text>Haridingiz Uchun Rahmat!</Text>}\n                        </Col>\n                        <Col span={24}>\n                            <br/>\n                            <div style={{border: '1px dashed var(--dark-dwed)'}}/>\n                        </Col>\n                    </Row>\n                </DetailImageWrapper>\n                {\n                    !loading && data[order_id] && data[order_id].status !== 0 && (\n                        <Button\n                            size='l'\n                            variant='primary'\n                            onClick={handlePrint}\n                        >\n                            {t('print_qr_code')}\n                        </Button>\n                    )\n                }\n            </RecordDetailWrapper>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}