{"ast":null,"code":"import _defineProperty from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from'react';import{removeMessageEvent,temporaryMessageMount}from'../../Models/chat-model';import copy from'copy-text-to-clipboard';import moment from'moment';import chat from'../../Service/chat';export function useChatAction(_ref){var partner_slug=_ref.partner_slug,formik=_ref.formik,inputRef=_ref.inputRef;//Local states\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),msgInfo=_useState4[0],setMsgInfo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showDelMenu=_useState6[0],setShowDelMenu=_useState6[1];var handleMsgClick=function handleMsgClick(event,data,me){setAnchorEl({el:event.currentTarget,me:me});setMsgInfo(data);};var handleClosePopup=function handleClosePopup(){setAnchorEl(null);setMsgInfo(null);};useEffect(function(){if(!!anchorEl){setShowDelMenu(false);}},[anchorEl]);var handleCopy=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(msgInfo){copy(msgInfo.text);setAnchorEl(null);}case 1:case\"end\":return _context.stop();}}},_callee);})),[msgInfo]);var handleEdit=useCallback(function(){if(msgInfo){setAnchorEl(null);setMsgInfo(null);inputRef.current.focus();temporaryMessageMount(_objectSpread({type:'edit'},msgInfo));formik.setFieldValue('text',msgInfo.text);}},[msgInfo,formik,inputRef]);var handleReply=useCallback(function(){if(msgInfo){temporaryMessageMount(_objectSpread({type:'reply'},msgInfo));setAnchorEl(null);setMsgInfo(null);}},[msgInfo]);var handleCancelEditAndReply=useCallback(function(action){temporaryMessageMount(null);setMsgInfo(null);setShowDelMenu(false);},[]);var handleRemove=useCallback(function(type){if(msgInfo){if(type){var data={id:msgInfo.id,partner:partner_slug};if(type==='irrevocably'){data['params']=_defineProperty({},type,'1');}removeMessageEvent({key:partner_slug,id:msgInfo.id,date:moment(msgInfo.date).format('YYYY-MM-DD')});handleClosePopup();temporaryMessageMount(null);chat.removeMessageToUser(data).then(function(res){console.log(res);});}else{setShowDelMenu(true);}}},[partner_slug,msgInfo]);return{msgInfo:msgInfo,anchorEl:anchorEl,handleCopy:handleCopy,handleEdit:handleEdit,handleReply:handleReply,showDelMenu:showDelMenu,handleRemove:handleRemove,handleMsgClick:handleMsgClick,handleClosePopup:handleClosePopup,handleCancelEditAndReply:handleCancelEditAndReply};}","map":null,"metadata":{},"sourceType":"module"}