{"ast":null,"code":"import { useUrlParams } from '../app';\nimport { URL_KEYS } from '../../Constants';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useEffect } from 'react';\nimport { $orgModel, orgSpecialistCatMount, orgSpecialistsMount } from '../../Models/org-model';\nimport { useStore } from 'effector-react';\nconst initialParams = {\n  limit: 20,\n  offset: 0\n};\nexport function useOrgSpecialistLists() {\n  const {\n    urlData\n  } = useUrlParams();\n  const {\n    organization\n  } = useParams();\n  const {\n    $orgSpecialistsList: {\n      result\n    }\n  } = useStore($orgModel);\n  const spec_cat_id = urlData[URL_KEYS.SPECIALIST_CATEGORY_ID];\n  const getOrgSpecialists = useCallback(params => {\n    if (organization) {\n      const data = {\n        organization,\n        ...params\n      };\n      orgSpecialistsMount(data);\n    }\n  }, [organization]);\n  const getOrgSpecCatList = useCallback(params => {\n    if (organization) {\n      const data = {\n        organization,\n        ...params\n      };\n      orgSpecialistCatMount(data);\n    }\n  }, [organization]);\n  const loadMore = useCallback(() => {\n    if (result.nextOffset) {\n      const params = { ...initialParams,\n        offset: result.nextOffset\n      };\n      getOrgSpecialists(params);\n    }\n  }, [result, getOrgSpecialists]);\n  useEffect(() => {\n    const data = {\n      clear: true,\n      params: { ...initialParams\n      }\n    };\n    getOrgSpecCatList(data);\n  }, [getOrgSpecCatList]);\n  useEffect(() => {\n    let timeout = null;\n    timeout = setTimeout(() => {\n      const data = {\n        clear: true,\n        params: { ...initialParams\n        }\n      };\n\n      if (spec_cat_id) {\n        data['params']['spec_cat'] = spec_cat_id;\n      } else {\n        delete data['params']['spec_cat'];\n      }\n\n      getOrgSpecialists(data);\n    }, 300);\n    return () => {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n  }, [getOrgSpecialists, spec_cat_id]);\n  return {\n    loadMore\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/org/use-org-specialists.js"],"names":["useUrlParams","URL_KEYS","useParams","useCallback","useEffect","$orgModel","orgSpecialistCatMount","orgSpecialistsMount","useStore","initialParams","limit","offset","useOrgSpecialistLists","urlData","organization","$orgSpecialistsList","result","spec_cat_id","SPECIALIST_CATEGORY_ID","getOrgSpecialists","params","data","getOrgSpecCatList","loadMore","nextOffset","clear","timeout","setTimeout","clearTimeout"],"mappings":"AAAA,SAAQA,YAAR,QAA2B,QAA3B;AACA,SAAQC,QAAR,QAAuB,iBAAvB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,WAAR,EAAqBC,SAArB,QAAqC,OAArC;AACA,SAAQC,SAAR,EAAmBC,qBAAnB,EAA0CC,mBAA1C,QAAoE,wBAApE;AACA,SAAQC,QAAR,QAAuB,gBAAvB;AAEA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,KAAK,EAAE,EADW;AAElBC,EAAAA,MAAM,EAAE;AAFU,CAAtB;AAKA,OAAO,SAASC,qBAAT,GAAiC;AACpC,QAAM;AAACC,IAAAA;AAAD,MAAYb,YAAY,EAA9B;AACA,QAAM;AAACc,IAAAA;AAAD,MAAiBZ,SAAS,EAAhC;AACA,QAAM;AAACa,IAAAA,mBAAmB,EAAE;AAACC,MAAAA;AAAD;AAAtB,MAAkCR,QAAQ,CAACH,SAAD,CAAhD;AACA,QAAMY,WAAW,GAAGJ,OAAO,CAACZ,QAAQ,CAACiB,sBAAV,CAA3B;AAEA,QAAMC,iBAAiB,GAAGhB,WAAW,CAAEiB,MAAD,IAAY;AAC9C,QAAIN,YAAJ,EAAkB;AACd,YAAMO,IAAI,GAAG;AACTP,QAAAA,YADS;AAET,WAAGM;AAFM,OAAb;AAIAb,MAAAA,mBAAmB,CAACc,IAAD,CAAnB;AACH;AACJ,GARoC,EAQlC,CAACP,YAAD,CARkC,CAArC;AAUA,QAAMQ,iBAAiB,GAAGnB,WAAW,CAAEiB,MAAD,IAAY;AAC9C,QAAIN,YAAJ,EAAkB;AACd,YAAMO,IAAI,GAAG;AACTP,QAAAA,YADS;AAET,WAAGM;AAFM,OAAb;AAIAd,MAAAA,qBAAqB,CAACe,IAAD,CAArB;AACH;AACJ,GARoC,EAQlC,CAACP,YAAD,CARkC,CAArC;AAUA,QAAMS,QAAQ,GAAGpB,WAAW,CAAC,MAAM;AAC/B,QAAIa,MAAM,CAACQ,UAAX,EAAuB;AACnB,YAAMJ,MAAM,GAAG,EACX,GAAGX,aADQ;AAEXE,QAAAA,MAAM,EAAEK,MAAM,CAACQ;AAFJ,OAAf;AAIAL,MAAAA,iBAAiB,CAACC,MAAD,CAAjB;AACH;AACJ,GAR2B,EAQzB,CAACJ,MAAD,EAASG,iBAAT,CARyB,CAA5B;AAUAf,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMiB,IAAI,GAAG;AACTI,MAAAA,KAAK,EAAE,IADE;AAETL,MAAAA,MAAM,EAAE,EAAC,GAAGX;AAAJ;AAFC,KAAb;AAIAa,IAAAA,iBAAiB,CAACD,IAAD,CAAjB;AACH,GANQ,EAMN,CAACC,iBAAD,CANM,CAAT;AAQAlB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIsB,OAAO,GAAG,IAAd;AAEAA,IAAAA,OAAO,GAAGC,UAAU,CAAC,MAAM;AACvB,YAAMN,IAAI,GAAG;AACTI,QAAAA,KAAK,EAAE,IADE;AAETL,QAAAA,MAAM,EAAE,EACJ,GAAGX;AADC;AAFC,OAAb;;AAOA,UAAIQ,WAAJ,EAAiB;AACbI,QAAAA,IAAI,CAAC,QAAD,CAAJ,CAAe,UAAf,IAA6BJ,WAA7B;AACH,OAFD,MAEO;AACH,eAAOI,IAAI,CAAC,QAAD,CAAJ,CAAe,UAAf,CAAP;AACH;;AAEDF,MAAAA,iBAAiB,CAACE,IAAD,CAAjB;AACH,KAfmB,EAejB,GAfiB,CAApB;AAiBA,WAAO,MAAM;AACTO,MAAAA,YAAY,CAACF,OAAD,CAAZ;AACAA,MAAAA,OAAO,GAAG,IAAV;AACH,KAHD;AAKH,GAzBQ,EAyBN,CAACP,iBAAD,EAAoBF,WAApB,CAzBM,CAAT;AA2BA,SAAO;AAACM,IAAAA;AAAD,GAAP;AACH","sourcesContent":["import {useUrlParams} from '../app'\r\nimport {URL_KEYS} from '../../Constants'\r\nimport {useParams} from 'react-router-dom'\r\nimport {useCallback, useEffect} from 'react'\r\nimport {$orgModel, orgSpecialistCatMount, orgSpecialistsMount} from '../../Models/org-model'\r\nimport {useStore} from 'effector-react'\r\n\r\nconst initialParams = {\r\n    limit: 20,\r\n    offset: 0\r\n}\r\n\r\nexport function useOrgSpecialistLists() {\r\n    const {urlData} = useUrlParams()\r\n    const {organization} = useParams()\r\n    const {$orgSpecialistsList: {result}} = useStore($orgModel)\r\n    const spec_cat_id = urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]\r\n    \r\n    const getOrgSpecialists = useCallback((params) => {\r\n        if (organization) {\r\n            const data = {\r\n                organization,\r\n                ...params\r\n            }\r\n            orgSpecialistsMount(data)\r\n        }\r\n    }, [organization])\r\n    \r\n    const getOrgSpecCatList = useCallback((params) => {\r\n        if (organization) {\r\n            const data = {\r\n                organization,\r\n                ...params\r\n            }\r\n            orgSpecialistCatMount(data)\r\n        }\r\n    }, [organization])\r\n    \r\n    const loadMore = useCallback(() => {\r\n        if (result.nextOffset) {\r\n            const params = {\r\n                ...initialParams,\r\n                offset: result.nextOffset\r\n            }\r\n            getOrgSpecialists(params)\r\n        }\r\n    }, [result, getOrgSpecialists])\r\n    \r\n    useEffect(() => {\r\n        const data = {\r\n            clear: true,\r\n            params: {...initialParams}\r\n        }\r\n        getOrgSpecCatList(data)\r\n    }, [getOrgSpecCatList])\r\n    \r\n    useEffect(() => {\r\n        let timeout = null\r\n        \r\n        timeout = setTimeout(() => {\r\n            const data = {\r\n                clear: true,\r\n                params: {\r\n                    ...initialParams\r\n                }\r\n            }\r\n            \r\n            if (spec_cat_id) {\r\n                data['params']['spec_cat'] = spec_cat_id\r\n            } else {\r\n                delete data['params']['spec_cat']\r\n            }\r\n            \r\n            getOrgSpecialists(data)\r\n        }, 300)\r\n        \r\n        return () => {\r\n            clearTimeout(timeout)\r\n            timeout = null\r\n        }\r\n        \r\n    }, [getOrgSpecialists, spec_cat_id])\r\n    \r\n    return {loadMore}\r\n}"]},"metadata":{},"sourceType":"module"}