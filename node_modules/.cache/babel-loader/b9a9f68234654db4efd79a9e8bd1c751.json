{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport { useTheme } from './theme';\nimport useMediaQuery from './useMediaQuery';\nexport var isServer = typeof window === 'undefined';\nexport function getQueryStatusColor(query, theme) {\n  return query.state.isFetching ? theme.active : !query.getObserversCount() ? theme.gray : query.isStale() ? theme.warning : theme.success;\n}\nexport function getQueryStatusLabel(query) {\n  return query.state.isFetching ? 'fetching' : !query.getObserversCount() ? 'inactive' : query.isStale() ? 'stale' : 'fresh';\n}\nexport function styled(type, newStyles, queries) {\n  if (queries === void 0) {\n    queries = {};\n  }\n\n  return /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n    var style = _ref.style,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"style\"]);\n\n    var theme = useTheme();\n    var mediaStyles = Object.entries(queries).reduce(function (current, _ref2) {\n      var key = _ref2[0],\n          value = _ref2[1]; // eslint-disable-next-line react-hooks/rules-of-hooks\n\n      return useMediaQuery(key) ? _extends({}, current, typeof value === 'function' ? value(rest, theme) : value) : current;\n    }, {});\n    return /*#__PURE__*/React.createElement(type, _extends({}, rest, {\n      style: _extends({}, typeof newStyles === 'function' ? newStyles(rest, theme) : newStyles, style, mediaStyles),\n      ref: ref\n    }));\n  });\n}\nexport function useIsMounted() {\n  var mountedRef = React.useRef(false);\n  var isMounted = React.useCallback(function () {\n    return mountedRef.current;\n  }, []);\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  return isMounted;\n}\n/**\n * This hook is a safe useState version which schedules state updates in microtasks\n * to prevent updating a component state while React is rendering different components\n * or when the component is not mounted anymore.\n */\n\nexport function useSafeState(initialState) {\n  var isMounted = useIsMounted();\n\n  var _React$useState = React.useState(initialState),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var safeSetState = React.useCallback(function (value) {\n    scheduleMicrotask(function () {\n      if (isMounted()) {\n        setState(value);\n      }\n    });\n  }, [isMounted]);\n  return [state, safeSetState];\n}\n/**\n * Schedules a microtask.\n * This can be useful to schedule state updates after rendering.\n */\n\nfunction scheduleMicrotask(callback) {\n  Promise.resolve().then(callback).catch(function (error) {\n    return setTimeout(function () {\n      throw error;\n    });\n  });\n}","map":null,"metadata":{},"sourceType":"module"}