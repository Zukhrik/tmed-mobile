{"ast":null,"code":"import _toConsumableArray from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useInfiniteQuery}from'react-query';import orgApi from'../../Service-v2/organization';import{useListQuery}from'../app';import{useMemo}from'react';import{useParams}from'react-router-dom';export function useQueryOfferingList(){var _useListQuery=useListQuery(),query=_useListQuery.query;var _useParams=useParams(),organization=_useParams.organization;var orgOfferQuery=useInfiniteQuery(['/org/offerings',organization,query],/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$pageParam,pageParam,params,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$pageParam=_ref.pageParam,pageParam=_ref$pageParam===void 0?0:_ref$pageParam;params={limit:10,offset:pageParam};if(query){params=_objectSpread(_objectSpread({},params),query);}_context.next=5;return orgApi.getOrgOffering({slug:organization,params:params});case 5:res=_context.sent;return _context.abrupt(\"return\",_objectSpread(_objectSpread({},res.data),{},{nextOffset:pageParam+10}));case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),{enabled:!!(organization&&query),getNextPageParam:function getNextPageParam(data){if(data.count>data.nextOffset){return data===null||data===void 0?void 0:data.nextOffset;}else{return undefined;}}});var list=useMemo(function(){var data=orgOfferQuery.data;if((data===null||data===void 0?void 0:data.pages)&&(data===null||data===void 0?void 0:data.pages.length)>0){var arr=data===null||data===void 0?void 0:data.pages;var tmp=[];var _iterator=_createForOfIteratorHelper(arr),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var g=_step.value;if(g===null||g===void 0?void 0:g.result){tmp=[].concat(_toConsumableArray(tmp),_toConsumableArray(g.result));}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return tmp;}return[];},[orgOfferQuery.data]);var dataLength=useMemo(function(){var _data$pages;var data=orgOfferQuery.data;return(data===null||data===void 0?void 0:data.pages)?((_data$pages=data.pages[data.pages.length-1])===null||_data$pages===void 0?void 0:_data$pages.nextOffset)||10:10;},[orgOfferQuery.data]);return{orgOfferQuery:orgOfferQuery,dataLength:dataLength,list:list};}","map":null,"metadata":{},"sourceType":"module"}