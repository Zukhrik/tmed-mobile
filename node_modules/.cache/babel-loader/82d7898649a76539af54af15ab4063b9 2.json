{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from'react';import{LazyLoadImage}from'react-lazy-load-image-component';import'react-lazy-load-image-component/src/effects/blur.css';import{CircularProgress}from'@material-ui/core';import{httpGet}from'../../Service';import{ImageLazyLoadWrapper}from'./style';export var ImageLazyLoad=function ImageLazyLoad(_ref){var alt=_ref.alt,src=_ref.src,dataSrc=_ref.dataSrc,height=_ref.height,showProgress=_ref.showProgress,uploadProgress=_ref.uploadProgress,hideEffect=_ref.hideEffect;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setIsLoading=_useState2[1];// const [compHeight, setCompHeight] = useState(0)\nvar _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),downloadingProgress=_useState4[0],setDownloadingProgress=_useState4[1];// useEffect(() => {\n//     if (src) {\n//         const img = new Image()\n//         img.onload = function () {\n//             // console.log(this.width + 'x' + this.height)\n//             // setCompHeight(this.height)\n//         }\n//         img.src = src\n//     }\n// }, [src])\nvar downloadImage=useCallback(function(){if(src&&!dataSrc){httpGet({url:src.substring(19),headers:{hideSuffix:true},onDownloadProgress:function onDownloadProgress(progressEvent){var percentCompleted=Math.round(progressEvent.loaded*100/progressEvent.total);setDownloadingProgress(percentCompleted);}}).finally(function(){setDownloadingProgress(null);});}},[src,dataSrc]);useEffect(function(){if(showProgress){downloadImage();}},[downloadImage,showProgress]);return/*#__PURE__*/React.createElement(ImageLazyLoadWrapper,null,showProgress&&/*#__PURE__*/React.createElement(React.Fragment,null,!uploadProgress?downloadingProgress!==null&&/*#__PURE__*/React.createElement(\"div\",{className:\"loading-progress\"},/*#__PURE__*/React.createElement(CircularProgress,{color:\"primary\",variant:\"determinate\",value:downloadingProgress})):/*#__PURE__*/React.createElement(\"div\",{className:\"loading-progress\"},/*#__PURE__*/React.createElement(CircularProgress,{color:\"primary\",variant:\"determinate\",value:uploadProgress}))),/*#__PURE__*/React.createElement(LazyLoadImage,{alt:alt,src:src,effect:!hideEffect&&'blur',height:loading?height:undefined,afterLoad:function afterLoad(){return setIsLoading(false);}}));};","map":null,"metadata":{},"sourceType":"module"}