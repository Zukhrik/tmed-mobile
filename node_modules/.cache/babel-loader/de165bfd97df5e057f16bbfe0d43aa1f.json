{"ast":null,"code":"var _jsxFileName = \"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/src/Views/Checkout/InfoCard/CheckoutDetail/index.jsx\";\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Col, Row } from 'antd';\nimport { useStore } from 'effector-react';\nimport { useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { CheckoutDetailWrapper } from '../style';\nimport { CreditCardDetail } from './CreditCardDetail';\nimport { ArrowIosRightSvg } from '../../../../Icons/Arrow';\nimport { $orderModel } from '../../../../Models/order-model';\nimport { Text } from '../../../../UIComponents/Typography/Text';\nimport { $accountModel } from '../../../../Models/account-model';\nimport { OverlaySettings } from '../../../../Components/Overlay';\nimport { Title } from '../../../../UIComponents/Typography/Title';\nimport { AllScreenModal } from '../../../../Components/Modal';\nimport { CouponList } from './CouponList';\nimport { CouponCardItem } from '../../../../Components/Cards/Coupon/molecules';\nexport const CheckoutDetail = ({\n  payment,\n  setPayment,\n  setCouponId\n}) => {\n  var _result$organization, _result$organization$, _result$organization2, _result$organization3, _data$organization2, _data$organization2$, _data$organization2$$, _currentProfile$curre, _currentProfile$curre2, _currentProfile$curre3, _currentProfile$curre4;\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    organization\n  } = useParams();\n  const [discount, setDiscount] = useState(null);\n  const [openCard, setOpenCard] = useState(false);\n  const {\n    $orgOrderCartList: {\n      data,\n      result\n    }\n  } = useStore($orderModel);\n  const {\n    $profiles: {\n      currentProfile\n    }\n  } = useStore($accountModel);\n  const [cardWrapper, setCardWrapper] = useState(false);\n  const [couponView, setCouponView] = useState(false);\n  const [couponName, setCouponName] = useState(t('select_coupon'));\n\n  const onClose = () => {\n    setOpenCard(false);\n    setCardWrapper(false);\n  };\n\n  const paymentInfo = useMemo(() => {\n    return payment.id !== 3 ? t(payment.title) : payment.title;\n  }, [payment.id, payment.title, t]);\n  const generateDiscountCost = useCallback(() => {\n    var _data$organization, _data$organization$;\n\n    let cost = data === null || data === void 0 ? void 0 : (_data$organization = data[organization]) === null || _data$organization === void 0 ? void 0 : (_data$organization$ = _data$organization[0]) === null || _data$organization$ === void 0 ? void 0 : _data$organization$.total_cost;\n\n    if (discount && data) {\n      return cost - cost * (discount / 100).toLocaleString('fi-Fi');\n    } else {\n      return cost.toLocaleString('fi-Fi');\n    }\n  }, [discount, data, organization]);\n\n  const handleClick = item => {\n    setCouponId(item.id);\n    setCouponView(false);\n    setCouponName(item.title);\n    setDiscount(item.offerings_discount);\n  };\n\n  return /*#__PURE__*/React.createElement(CheckoutDetailWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(OverlaySettings, {\n    openSettings: openCard,\n    onClose: onClose,\n    content: /*#__PURE__*/React.createElement(CreditCardDetail, {\n      onClose: onClose,\n      cardWrapper: cardWrapper,\n      setCardWrapper: setCardWrapper,\n      payment: payment,\n      setPayment: setPayment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 26\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(AllScreenModal, {\n    visible: couponView,\n    close: () => setCouponView(false),\n    body: /*#__PURE__*/React.createElement(CouponList, {\n      goBack: () => setCouponView(false),\n      handleClick: handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 23\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    gutter: [0, 12],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    onClick: () => setOpenCard(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 37\n    }\n  }, t('select_payment_methods'))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 37\n    }\n  }, paymentInfo)))), /*#__PURE__*/React.createElement(Col, {\n    className: \"payment-icon-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ArrowIosRightSvg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  })))), result && organization && (result === null || result === void 0 ? void 0 : (_result$organization = result[organization]) === null || _result$organization === void 0 ? void 0 : (_result$organization$ = _result$organization.coupons) === null || _result$organization$ === void 0 ? void 0 : _result$organization$.length) > 0 && /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 37\n    }\n  }, t('coupon_discount'))), result === null || result === void 0 ? void 0 : (_result$organization2 = result[organization]) === null || _result$organization2 === void 0 ? void 0 : (_result$organization3 = _result$organization2.coupons) === null || _result$organization3 === void 0 ? void 0 : _result$organization3.map((item, idx) => /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    key: `${idx + 1}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(CouponCardItem, {\n    color: item.background_color,\n    title: item.title,\n    percent: item.offerings_discount,\n    fromDate: item.from_date,\n    toDate: item.to_date,\n    handleClick: () => handleClick(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 45\n    }\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [12, 0],\n    align: \"middle\",\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, `${t('cost')}:`)), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, (data === null || data === void 0 ? void 0 : data[organization]) && currentProfile && /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, `${data === null || data === void 0 ? void 0 : (_data$organization2 = data[organization]) === null || _data$organization2 === void 0 ? void 0 : (_data$organization2$ = _data$organization2[0]) === null || _data$organization2$ === void 0 ? void 0 : (_data$organization2$$ = _data$organization2$.total_cost) === null || _data$organization2$$ === void 0 ? void 0 : _data$organization2$$.toLocaleString('fi-Fi')}\n                                                ${currentProfile === null || currentProfile === void 0 ? void 0 : (_currentProfile$curre = currentProfile.currency) === null || _currentProfile$curre === void 0 ? void 0 : (_currentProfile$curre2 = _currentProfile$curre.code) === null || _currentProfile$curre2 === void 0 ? void 0 : _currentProfile$curre2.toUpperCase()}`)))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [12, 0],\n    align: \"middle\",\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }, `${t('discount')}:`)), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, !!discount && /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  }, `${discount}%`)))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [12, 0],\n    align: \"middle\",\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, `${t('total_cost')}:`)), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, (data === null || data === void 0 ? void 0 : data[organization]) && currentProfile && /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }, `${generateDiscountCost()}\n                                                ${currentProfile === null || currentProfile === void 0 ? void 0 : (_currentProfile$curre3 = currentProfile.currency) === null || _currentProfile$curre3 === void 0 ? void 0 : (_currentProfile$curre4 = _currentProfile$curre3.code) === null || _currentProfile$curre4 === void 0 ? void 0 : _currentProfile$curre4.toUpperCase()}`))))));\n};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/src/Views/Checkout/InfoCard/CheckoutDetail/index.jsx"],"names":["React","useCallback","useMemo","useState","Col","Row","useStore","useParams","useTranslation","CheckoutDetailWrapper","CreditCardDetail","ArrowIosRightSvg","$orderModel","Text","$accountModel","OverlaySettings","Title","AllScreenModal","CouponList","CouponCardItem","CheckoutDetail","payment","setPayment","setCouponId","t","organization","discount","setDiscount","openCard","setOpenCard","$orgOrderCartList","data","result","$profiles","currentProfile","cardWrapper","setCardWrapper","couponView","setCouponView","couponName","setCouponName","onClose","paymentInfo","id","title","generateDiscountCost","cost","total_cost","toLocaleString","handleClick","item","offerings_discount","coupons","length","map","idx","background_color","from_date","to_date","currency","code","toUpperCase"],"mappings":"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","sourcesContent":["import React, {useCallback, useMemo, useState} from 'react'\nimport {Col, Row} from 'antd'\nimport {useStore} from 'effector-react'\nimport {useParams} from 'react-router-dom'\nimport {useTranslation} from 'react-i18next'\nimport {CheckoutDetailWrapper} from '../style'\nimport {CreditCardDetail} from './CreditCardDetail'\nimport {ArrowIosRightSvg} from '../../../../Icons/Arrow'\nimport {$orderModel} from '../../../../Models/order-model'\nimport {Text} from '../../../../UIComponents/Typography/Text'\nimport {$accountModel} from '../../../../Models/account-model'\nimport {OverlaySettings} from '../../../../Components/Overlay'\nimport {Title} from '../../../../UIComponents/Typography/Title'\nimport {AllScreenModal} from '../../../../Components/Modal'\nimport {CouponList} from './CouponList'\nimport {CouponCardItem} from '../../../../Components/Cards/Coupon/molecules'\n\nexport const CheckoutDetail = ({payment, setPayment, setCouponId}) => {\n    const {t} = useTranslation()\n    const {organization} = useParams()\n    const [discount, setDiscount] = useState(null)\n    const [openCard, setOpenCard] = useState(false)\n    const {$orgOrderCartList: {data, result}} = useStore($orderModel)\n    const {$profiles: {currentProfile}} = useStore($accountModel)\n    const [cardWrapper, setCardWrapper] = useState(false)\n    const [couponView, setCouponView] = useState(false)\n    const [couponName, setCouponName] = useState(t('select_coupon'))\n    \n    const onClose = () => {\n        setOpenCard(false)\n        setCardWrapper(false)\n    }\n    \n    const paymentInfo = useMemo(() => {\n        return payment.id !== 3\n            ? t(payment.title)\n            : payment.title\n    }, [payment.id, payment.title, t])\n    \n    const generateDiscountCost = useCallback(() => {\n        let cost = data?.[organization]?.[0]?.total_cost\n        if (discount && data) {\n            return cost - cost * (discount / 100).toLocaleString('fi-Fi')\n        } else {\n            return cost.toLocaleString('fi-Fi')\n        }\n    }, [discount, data, organization])\n    \n    const handleClick = (item) => {\n        setCouponId(item.id)\n        setCouponView(false)\n        setCouponName(item.title)\n        setDiscount(item.offerings_discount)\n    }\n    \n    return (\n        <CheckoutDetailWrapper>\n            <OverlaySettings\n                openSettings={openCard}\n                onClose={onClose}\n                content={<CreditCardDetail\n                    onClose={onClose}\n                    cardWrapper={cardWrapper}\n                    setCardWrapper={setCardWrapper}\n                    payment={payment}\n                    setPayment={setPayment}\n                />}\n            />\n            <AllScreenModal\n                visible={couponView}\n                close={() => setCouponView(false)}\n                body={<CouponList\n                    goBack={() => setCouponView(false)}\n                    handleClick={handleClick}\n                />}\n            />\n            <Row gutter={[0, 12]}>\n                <Col span={24} onClick={() => setOpenCard(true)}>\n                    <Row justify='space-between'>\n                        <Col>\n                            <Row>\n                                <Col span={24}>\n                                    <Text>{t('select_payment_methods')}</Text>\n                                </Col>\n                                <Col span={24}>\n                                    <Text color='var(--grey-dwed)'>\n                                        {paymentInfo}\n                                    </Text>\n                                </Col>\n                            </Row>\n                        </Col>\n                        <Col className='payment-icon-wrapper'>\n                            <ArrowIosRightSvg/>\n                        </Col>\n                    </Row>\n                </Col>\n                {\n                    result && organization && result?.[organization]?.coupons?.length > 0\n                    && (\n                        <Col span={24}>\n                            <Row>\n                                <Col span={24}>\n                                    <Text>{t('coupon_discount')}</Text>\n                                </Col>\n                                {\n                                    result?.[organization]?.coupons?.map((item, idx) => (\n                                        <Col span={24} key={`${idx + 1}`}>\n                                            <CouponCardItem\n                                                color={item.background_color}\n                                                title={item.title}\n                                                percent={item.offerings_discount}\n                                                fromDate={item.from_date}\n                                                toDate={item.to_date}\n                                                handleClick={() => handleClick(item)}\n                                            />\n                                        </Col>\n                                    ))\n                                }\n                            </Row>\n                        </Col>\n                    )\n                }\n                <Col span={24}>\n                    <Row gutter={[12, 0]} align='middle' justify='space-between'>\n                        <Col>\n                            <Title color='var(--grey-dwed)'>{`${t('cost')}:`}</Title>\n                        </Col>\n                        <Col>\n                            {\n                                data?.[organization] && currentProfile &&\n                                <Title>\n                                    {`${data?.[organization]?.[0]?.total_cost?.toLocaleString('fi-Fi')}\n                                                ${currentProfile?.currency?.code?.toUpperCase()}`}\n                                </Title>\n                            }\n                        </Col>\n                    </Row>\n                </Col>\n                <Col span={24}>\n                    <Row gutter={[12, 0]} align='middle' justify='space-between'>\n                        <Col>\n                            <Title color='var(--grey-dwed)'>{`${t('discount')}:`}</Title>\n                        </Col>\n                        <Col>\n                            {\n                                !!discount &&\n                                <Title>{`${discount}%`}</Title>\n                            }\n                        </Col>\n                    </Row>\n                </Col>\n                <Col span={24}>\n                    <Row gutter={[12, 0]} align='middle' justify='space-between'>\n                        <Col>\n                            <Title color='var(--grey-dwed)'>{`${t('total_cost')}:`}</Title>\n                        </Col>\n                        <Col>\n                            {\n                                data?.[organization] && currentProfile &&\n                                <Title>\n                                    {`${generateDiscountCost()}\n                                                ${currentProfile?.currency?.code?.toUpperCase()}`}\n                                </Title>\n                            }\n                        </Col>\n                    </Row>\n                </Col>\n            </Row>\n        </CheckoutDetailWrapper>\n    )\n}"]},"metadata":{},"sourceType":"module"}