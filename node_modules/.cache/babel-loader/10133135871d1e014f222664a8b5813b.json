{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{combine,createStore}from'effector';import{commonStoreList,storeListWithKey,storeWithKey}from'../../utils/store-utils';import{fetchDeleteOrderCart,fetchOrder,fetchOrderCartList,fetchOrderIdOffers,fetchOrderList,fetchOrderOffersConclusions,fetchOrgOrderCarts,fetchOrgOrderResponsible}from'./effects';import{resetOrderCartList,resetOrderDetail,resetOrderIdOffers,resetOrderListMount,resetOrgOrderCart}from'./events';var $orgOrderCartList=createStore({loading:false,error:false,result:{},data:[],forceLoading:0}).on(fetchOrgOrderCarts.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrgOrderCarts.fail,function(state,_ref){var error=_ref.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{},forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrgOrderCarts.done,function(state,_ref2){var params=_ref2.params,result=_ref2.result;var processed=storeListWithKey({key:params.org_slug_name,response:result.data,state:state,clear:params.clear,limit:params.params.limit});if(params.action&&result.data.results.length===0){params.action();}return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).on(fetchDeleteOrderCart.done,function(state,_ref3){var _dataItem$offering;var params=_ref3.params;var id=params.offering_id;var organization=params.organization;var data=_objectSpread({},state.data);var dataItem=data[organization].find(function(item){var _item$offering;return((_item$offering=item.offering)===null||_item$offering===void 0?void 0:_item$offering.id)===id;});var total_cost=_objectSpread({},state.result).total_cost-(dataItem===null||dataItem===void 0?void 0:(_dataItem$offering=dataItem.offering)===null||_dataItem$offering===void 0?void 0:_dataItem$offering.cost);var count=_objectSpread({},state.result).count-1;data[organization]=data[organization].filter(function(item){return item.offering.id!==id;});if(params.action){console.log(params);params.action();}return _objectSpread(_objectSpread(_objectSpread({},state),{},{data:data},state.result.total_cost=total_cost),state.result.count=count);}).reset(resetOrgOrderCart);var $orderCartList=createStore({loading:false,data:[],forceLoading:0,result:{},error:false}).on(fetchOrderCartList.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderCartList.fail,function(state,_ref4){var error=_ref4.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],forceLoading:state.forceLoading===2?state.forceLoading:1,result:{}});}).on(fetchOrderCartList.done,function(state,_ref5){var result=_ref5.result,params=_ref5.params;var isNoData=(params===null||params===void 0?void 0:params.organization)&&result.data.findIndex(function(item){return item.seller.slug_name===params.organization;})===-1;if((params===null||params===void 0?void 0:params.isRedirect)&&(params===null||params===void 0?void 0:params.action)&&isNoData){params.action();}return _objectSpread(_objectSpread({},state),{},{data:result.data,forceLoading:2,result:result.data});}).reset(resetOrderCartList);var $orgOrderResponsible=createStore({loading:false,data:[],result:{},error:false}).on(fetchOrgOrderResponsible.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrgOrderResponsible.fail,function(state,_ref6){var error=_ref6.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{}});}).on(fetchOrgOrderResponsible.done,function(state,_ref7){var result=_ref7.result,params=_ref7.params;var processed=commonStoreList({response:result.data,state:state,clear:params.clear});return _objectSpread(_objectSpread({},state),processed);});var $orderDetail=createStore({data:{},loading:false,error:false,forceLoading:0}).on(fetchOrder.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrder.fail,function(state,_ref8){var error=_ref8.error;return _objectSpread(_objectSpread({},state),{},{error:error,forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrder.done,function(state,_ref9){var result=_ref9.result,params=_ref9.params;var processed=storeWithKey({response:result.data,state:state,key:params});return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).reset(resetOrderDetail);var $orderList=createStore({data:[],loading:false,result:{},error:false,forceLoading:0}).on(fetchOrderList.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderList.fail,function(state,_ref10){var error=_ref10.error;return _objectSpread(_objectSpread({},state),{},{error:error,forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrderList.done,function(state,_ref11){var result=_ref11.result,params=_ref11.params;var processed=commonStoreList({state:state,clear:params.clear,response:result.data,limit:params.params.limit});return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).reset(resetOrderListMount);var $orderIdOffers=createStore({loading:false,data:[],result:{},error:false,forceLoading:0}).on(fetchOrderIdOffers.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderIdOffers.fail,function(state,_ref12){var error=_ref12.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{},forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrderIdOffers.done,function(state,_ref13){var result=_ref13.result,params=_ref13.params;var processed=commonStoreList(_objectSpread({response:result.data,state:state,clear:params.clear},params.params));return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).reset(resetOrderIdOffers);var $orderOffersConclusions=createStore({loading:false,data:[],result:{},error:false,forceLoading:0}).on(fetchOrderOffersConclusions.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderOffersConclusions.fail,function(state,_ref14){var error=_ref14.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{},forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrderOffersConclusions.done,function(state,_ref15){var result=_ref15.result,params=_ref15.params;var processed=commonStoreList(_objectSpread({response:result.data,state:state,clear:params.clear},params.params));return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});});export var $orderModel=combine({$orgOrderResponsible:$orgOrderResponsible,$orgOrderCartList:$orgOrderCartList,$orderIdOffers:$orderIdOffers,$orderCartList:$orderCartList,$orderDetail:$orderDetail,$orderList:$orderList,$orderOffersConclusions:$orderOffersConclusions});","map":null,"metadata":{},"sourceType":"module"}