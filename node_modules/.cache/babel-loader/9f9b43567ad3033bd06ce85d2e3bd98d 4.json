{"ast":null,"code":"import{useEffect}from'react';import{useUrlParams}from'../app';import{URL_KEYS}from'../../Constants';import{useStore}from'effector-react';import{$orderModel}from'../../Models/order-model';import{useHistory,useParams}from'react-router-dom';export function useAddSpecialistUrl(){var _useHistory=useHistory(),push=_useHistory.push;var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var _useParams=useParams(),organization=_useParams.organization;var specId=urlData[URL_KEYS.SPECIALIST_ID];var _useStore=useStore($orderModel),_useStore$$orderCartL=_useStore.$orderCartList,data=_useStore$$orderCartL.data,forceLoading=_useStore$$orderCartL.forceLoading;var currentOrg=data.find(function(item){return item.seller.slug_name===organization;});var otherOrgs=data.filter(function(item){return item.seller.slug_name!==organization;});var specList=currentOrg?currentOrg.seller.specialists:[];var currentSpecInfo=specList.find(function(item){return item.id.toString()===urlData.specialist_id;});useEffect(function(){if((data===null||data===void 0?void 0:data.length)>0){var _currentOrg$seller;if(!specId&&specList.length>0){push({pathname:\"/records/unregistered/\".concat(organization),search:\"\".concat(URL_KEYS.SPECIALIST_ID,\"=\").concat(specList[0].id)});}else if(organization!==(currentOrg===null||currentOrg===void 0?void 0:(_currentOrg$seller=currentOrg.seller)===null||_currentOrg$seller===void 0?void 0:_currentOrg$seller.slug_name)){push(\"/\".concat(organization,\"/offerings\"));}// else if(!specId) push(`/${organization}/offerings`)\n}},[specList,specId,organization,currentOrg,push,data]);return{currentOrg:currentOrg,organization:organization,specId:specId,specList:specList,otherOrgs:otherOrgs,currentSpecInfo:currentSpecInfo,push:push,forceLoading:forceLoading};}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/order/use-add-specialist-url.js"],"names":["useEffect","useUrlParams","URL_KEYS","useStore","$orderModel","useHistory","useParams","useAddSpecialistUrl","push","urlData","organization","specId","SPECIALIST_ID","$orderCartList","data","forceLoading","currentOrg","find","item","seller","slug_name","otherOrgs","filter","specList","specialists","currentSpecInfo","id","toString","specialist_id","length","pathname","search"],"mappings":"AAAA,OAAQA,SAAR,KAAwB,OAAxB,CACA,OAAQC,YAAR,KAA2B,QAA3B,CACA,OAAQC,QAAR,KAAuB,iBAAvB,CACA,OAAQC,QAAR,KAAuB,gBAAvB,CACA,OAAQC,WAAR,KAA0B,0BAA1B,CACA,OAAQC,UAAR,CAAoBC,SAApB,KAAoC,kBAApC,CAEA,MAAO,SAASC,CAAAA,mBAAT,EAA+B,CAClC,gBAAeF,UAAU,EAAzB,CAAOG,IAAP,aAAOA,IAAP,CACA,kBAAkBP,YAAY,EAA9B,CAAOQ,OAAP,eAAOA,OAAP,CACA,eAAuBH,SAAS,EAAhC,CAAOI,YAAP,YAAOA,YAAP,CACA,GAAMC,CAAAA,MAAM,CAAGF,OAAO,CAACP,QAAQ,CAACU,aAAV,CAAtB,CACA,cAA+CT,QAAQ,CAACC,WAAD,CAAvD,iCAAOS,cAAP,CAAwBC,IAAxB,uBAAwBA,IAAxB,CAA8BC,YAA9B,uBAA8BA,YAA9B,CACA,GAAMC,CAAAA,UAAU,CAAGF,IAAI,CAACG,IAAL,CAAU,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,MAAL,CAAYC,SAAZ,GAA0BV,YAA9B,EAAd,CAAnB,CACA,GAAMW,CAAAA,SAAS,CAAGP,IAAI,CAACQ,MAAL,CAAY,SAAAJ,IAAI,QAAIA,CAAAA,IAAI,CAACC,MAAL,CAAYC,SAAZ,GAA0BV,YAA9B,EAAhB,CAAlB,CACA,GAAMa,CAAAA,QAAQ,CAAGP,UAAU,CAAGA,UAAU,CAACG,MAAX,CAAkBK,WAArB,CAAmC,EAA9D,CACA,GAAMC,CAAAA,eAAe,CAAGF,QAAQ,CAACN,IAAT,CAAc,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACQ,EAAL,CAAQC,QAAR,KAAuBlB,OAAO,CAACmB,aAAnC,EAAlB,CAAxB,CAEA5B,SAAS,CAAC,UAAM,CACZ,GAAI,CAAAc,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEe,MAAN,EAAe,CAAnB,CAAqB,wBACjB,GAAI,CAAClB,MAAD,EAAWY,QAAQ,CAACM,MAAT,CAAkB,CAAjC,CAAoC,CAChCrB,IAAI,CAAC,CACDsB,QAAQ,iCAA2BpB,YAA3B,CADP,CAEDqB,MAAM,WAAK7B,QAAQ,CAACU,aAAd,aAA+BW,QAAQ,CAAC,CAAD,CAAR,CAAYG,EAA3C,CAFL,CAAD,CAAJ,CAIH,CALD,IAKO,IAAIhB,YAAY,IAAKM,UAAL,SAAKA,UAAL,qCAAKA,UAAU,CAAEG,MAAjB,6CAAK,mBAAoBC,SAAzB,CAAhB,CAAoD,CACvDZ,IAAI,YAAKE,YAAL,eAAJ,CACH,CAED;AACH,CACJ,CAbQ,CAaN,CAACa,QAAD,CAAWZ,MAAX,CAAmBD,YAAnB,CAAiCM,UAAjC,CAA6CR,IAA7C,CAAmDM,IAAnD,CAbM,CAAT,CAeA,MAAO,CAACE,UAAU,CAAVA,UAAD,CAAaN,YAAY,CAAZA,YAAb,CAA2BC,MAAM,CAANA,MAA3B,CAAmCY,QAAQ,CAARA,QAAnC,CAA6CF,SAAS,CAATA,SAA7C,CAAwDI,eAAe,CAAfA,eAAxD,CAAyEjB,IAAI,CAAJA,IAAzE,CAA+EO,YAAY,CAAZA,YAA/E,CAAP,CACH","sourcesContent":["import {useEffect} from 'react'\nimport {useUrlParams} from '../app'\nimport {URL_KEYS} from '../../Constants'\nimport {useStore} from 'effector-react'\nimport {$orderModel} from '../../Models/order-model'\nimport {useHistory, useParams} from 'react-router-dom'\n\nexport function useAddSpecialistUrl() {\n    const {push} = useHistory()\n    const {urlData} = useUrlParams()\n    const {organization} = useParams()\n    const specId = urlData[URL_KEYS.SPECIALIST_ID]\n    const {$orderCartList: {data, forceLoading}} = useStore($orderModel)\n    const currentOrg = data.find(item => item.seller.slug_name === organization)\n    const otherOrgs = data.filter(item => item.seller.slug_name !== organization)\n    const specList = currentOrg ? currentOrg.seller.specialists : []\n    const currentSpecInfo = specList.find(item => item.id.toString() === urlData.specialist_id)\n    \n    useEffect(() => {\n        if (data?.length > 0){\n            if (!specId && specList.length > 0) {\n                push({\n                    pathname: `/records/unregistered/${organization}`,\n                    search: `${URL_KEYS.SPECIALIST_ID}=${specList[0].id}`\n                })\n            } else if (organization !== currentOrg?.seller?.slug_name ){\n                push(`/${organization}/offerings`)\n            }\n            \n            // else if(!specId) push(`/${organization}/offerings`)\n        }\n    }, [specList, specId, organization, currentOrg, push, data])\n    \n    return {currentOrg, organization, specId, specList, otherOrgs, currentSpecInfo, push, forceLoading}\n}"]},"metadata":{},"sourceType":"module"}