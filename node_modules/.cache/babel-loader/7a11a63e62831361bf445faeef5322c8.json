{"ast":null,"code":"import { useState } from 'react';\nimport { useUrlParams } from '../app';\nimport order from '../../Service/order';\nimport { URL_KEYS } from '../../Constants';\nimport { saveURLMount } from '../../Models/app';\nimport { getOrgOrderCartsMount } from '../../Models/order-model';\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\nimport { useOfferingDetail } from '../offerings';\nexport function useOfferingOrderInOfferPage() {\n  const {\n    push\n  } = useHistory();\n  const {\n    urlData\n  } = useUrlParams();\n  const {\n    pathname\n  } = useLocation();\n  const {\n    organization,\n    offering_id\n  } = useParams();\n  const [openModal, setOpenModal] = useState(false);\n  const {\n    res\n  } = useOfferingDetail(offering_id);\n\n  const handleRequest = () => {\n    var _res$data, _res$data$responsible, _res$data2;\n\n    saveURLMount(pathname);\n    const offeringId = res === null || res === void 0 ? void 0 : res.data.id;\n    const specId = urlData[URL_KEYS.SPECIALIST_ID] ? urlData[URL_KEYS.SPECIALIST_ID] : res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$responsible = _res$data.responsible[0]) === null || _res$data$responsible === void 0 ? void 0 : _res$data$responsible.id;\n\n    if (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.is_in_cart) {\n      push(`/records/unregistered/${organization}/`);\n    } else {\n      const params = {\n        org_slug_name: organization,\n        data: {\n          offering_id: offeringId,\n          responsible_id: specId\n        }\n      };\n      order.postOrgOrderCart(params).then(response => {\n        getOrgOrderCartsMount();\n\n        if (response) {\n          push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${urlData[URL_KEYS.SPECIALIST_ID]}`);\n        }\n      });\n    }\n  };\n\n  return {\n    handleRequest,\n    openModal,\n    setOpenModal\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/src/Hooks/order/use-offering-order-in-offer-page.js"],"names":["useState","useUrlParams","order","URL_KEYS","saveURLMount","getOrgOrderCartsMount","useHistory","useLocation","useParams","useOfferingDetail","useOfferingOrderInOfferPage","push","urlData","pathname","organization","offering_id","openModal","setOpenModal","res","handleRequest","offeringId","data","id","specId","SPECIALIST_ID","responsible","is_in_cart","params","org_slug_name","responsible_id","postOrgOrderCart","then","response"],"mappings":"AAAA,SAAQA,QAAR,QAAuB,OAAvB;AACA,SAAQC,YAAR,QAA2B,QAA3B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,SAAQC,QAAR,QAAuB,iBAAvB;AACA,SAAQC,YAAR,QAA2B,kBAA3B;AACA,SAAQC,qBAAR,QAAoC,0BAApC;AACA,SAAQC,UAAR,EAAoBC,WAApB,EAAiCC,SAAjC,QAAiD,kBAAjD;AACA,SAAQC,iBAAR,QAAgC,cAAhC;AAEA,OAAO,SAASC,2BAAT,GAAuC;AAC1C,QAAM;AAACC,IAAAA;AAAD,MAASL,UAAU,EAAzB;AACA,QAAM;AAACM,IAAAA;AAAD,MAAYX,YAAY,EAA9B;AACA,QAAM;AAACY,IAAAA;AAAD,MAAaN,WAAW,EAA9B;AACA,QAAM;AAACO,IAAAA,YAAD;AAAeC,IAAAA;AAAf,MAA8BP,SAAS,EAA7C;AACA,QAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAACkB,IAAAA;AAAD,MAAQT,iBAAiB,CAACM,WAAD,CAA/B;;AAGA,QAAMI,aAAa,GAAG,MAAM;AAAA;;AACxBf,IAAAA,YAAY,CAACS,QAAD,CAAZ;AACA,UAAMO,UAAU,GAAGF,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEG,IAAL,CAAUC,EAA7B;AACA,UAAMC,MAAM,GAAGX,OAAO,CAACT,QAAQ,CAACqB,aAAV,CAAP,GAAkCZ,OAAO,CAACT,QAAQ,CAACqB,aAAV,CAAzC,GAAoEN,GAApE,aAAoEA,GAApE,oCAAoEA,GAAG,CAAEG,IAAzE,uEAAoE,UAAWI,WAAX,CAAuB,CAAvB,CAApE,0DAAoE,sBAA2BH,EAA9G;;AACA,QAAIJ,GAAJ,aAAIA,GAAJ,qCAAIA,GAAG,CAAEG,IAAT,+CAAI,WAAWK,UAAf,EAA2B;AACvBf,MAAAA,IAAI,CAAE,yBAAwBG,YAAa,GAAvC,CAAJ;AACH,KAFD,MAEO;AACH,YAAMa,MAAM,GAAG;AACXC,QAAAA,aAAa,EAAEd,YADJ;AAEXO,QAAAA,IAAI,EAAE;AACFN,UAAAA,WAAW,EAAEK,UADX;AAEFS,UAAAA,cAAc,EAAEN;AAFd;AAFK,OAAf;AAOArB,MAAAA,KAAK,CAAC4B,gBAAN,CAAuBH,MAAvB,EACKI,IADL,CACUC,QAAQ,IAAI;AACd3B,QAAAA,qBAAqB;;AACrB,YAAI2B,QAAJ,EAAc;AACVrB,UAAAA,IAAI,CAAE,yBAAwBG,YAAa,IAAGX,QAAQ,CAACqB,aAAc,IAAGZ,OAAO,CAACT,QAAQ,CAACqB,aAAV,CAAyB,EAApG,CAAJ;AACH;AACJ,OANL;AAOH;AACJ,GAtBD;;AAwBA,SAAO;AAACL,IAAAA,aAAD;AAAgBH,IAAAA,SAAhB;AAA2BC,IAAAA;AAA3B,GAAP;AACH","sourcesContent":["import {useState} from 'react'\nimport {useUrlParams} from '../app'\nimport order from '../../Service/order'\nimport {URL_KEYS} from '../../Constants'\nimport {saveURLMount} from '../../Models/app'\nimport {getOrgOrderCartsMount} from '../../Models/order-model'\nimport {useHistory, useLocation, useParams} from 'react-router-dom'\nimport {useOfferingDetail} from '../offerings'\n\nexport function useOfferingOrderInOfferPage() {\n    const {push} = useHistory()\n    const {urlData} = useUrlParams()\n    const {pathname} = useLocation()\n    const {organization, offering_id} = useParams()\n    const [openModal, setOpenModal] = useState(false)\n    const {res} = useOfferingDetail(offering_id)\n    \n    \n    const handleRequest = () => {\n        saveURLMount(pathname)\n        const offeringId = res?.data.id\n        const specId = urlData[URL_KEYS.SPECIALIST_ID] ? urlData[URL_KEYS.SPECIALIST_ID] : res?.data?.responsible[0]?.id\n        if (res?.data?.is_in_cart) {\n            push(`/records/unregistered/${organization}/`)\n        } else {\n            const params = {\n                org_slug_name: organization,\n                data: {\n                    offering_id: offeringId,\n                    responsible_id: specId\n                }\n            }\n            order.postOrgOrderCart(params)\n                .then(response => {\n                    getOrgOrderCartsMount()\n                    if (response) {\n                        push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${urlData[URL_KEYS.SPECIALIST_ID]}`)\n                    }\n                })\n        }\n    }\n    \n    return {handleRequest, openModal, setOpenModal}\n}"]},"metadata":{},"sourceType":"module"}