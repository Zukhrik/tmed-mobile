{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as Yup from'yup';import{useFormik}from'formik';import{useStore}from'effector-react';import{useEffect,useState}from'react';import account from'../../Service/account';import{useTranslation}from'react-i18next';import{$accountModel,accountAvatarsMount}from'../../Models/account-model';var defaultValue={name:'',avatar:undefined,lastname:'',surname:'',business_ava:undefined,user_lang:'',category:null,region:null,currency:'',birthday:'',gender:'',phone:'',email:''};export function useProfileInfo(){var _useState=useState(defaultValue),_useState2=_slicedToArray(_useState,2),initialValues=_useState2[0],setInitialValues=_useState2[1];var _useStore=useStore($accountModel),$accountInfo=_useStore.$accountInfo,$accountAvatars=_useStore.$accountAvatars;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),mounted=_useState4[0],setMounted=_useState4[1];var validationSchema=Yup.object().shape({});var _useTranslation=useTranslation(),i18n=_useTranslation.i18n;var formik=useFormik({validationSchema:validationSchema,initialValues:initialValues,enableReinitialize:true,onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setSubmitting(true);var category=values.category,region=values.region,user_lang=values.user_lang,gender=values.gender,avatar=values.avatar;var changeLanguage=function changeLanguage(language){i18n.changeLanguage(language).then();};var data={main_cat_id:category.id,region_id:region.id,lang:user_lang,gender:gender,avatar:avatar};if(values.user_lang==='uz'){changeLanguage('uz');}else if(values.user_lang==='ru'){changeLanguage('ru');}account.updateAccount({data:data}).then(function(res){if(res){// console.log(res.data)\n}}).catch(function(error){var errorData=error.response.data.errors||[];var touched={};var data={};if(errorData){for(var i=0;i<errorData.length;i++){touched[errorData[i].field]=true;data[errorData[i].field]=errorData[i].message.replace(/[[\\]']+/g,'');}}}).finally();}});var getData=function getData(value){return value||'';};useEffect(function(){var accountData=$accountInfo===null||$accountInfo===void 0?void 0:$accountInfo.data;var avatarsData=$accountAvatars===null||$accountAvatars===void 0?void 0:$accountAvatars.data;if(!!accountData&&!!avatarsData&&!mounted){var _accountData$currency;var business_ava=avatarsData.length>0&&avatarsData.find(function(item){return item.business_ava;});setInitialValues(_objectSpread(_objectSpread({},defaultValue),{},{region:getData(accountData.region),category:getData(accountData.main_cat),business_ava:business_ava?{stringUrl:getData(business_ava.image),file:null}:false,currency:getData(accountData===null||accountData===void 0?void 0:(_accountData$currency=accountData.currency)===null||_accountData$currency===void 0?void 0:_accountData$currency.code),user_lang:getData(accountData.user_lang),birthday:getData(accountData.birthday),phone:getData(accountData.phone),gender:getData(accountData.gender),email:getData(accountData.email),name:getData(accountData.name),lastname:getData(accountData.lastname),surname:getData(accountData.surname),avatar:getData(accountData.avatar)}));setMounted(true);}},[$accountInfo.data,$accountAvatars.data,mounted]);useEffect(function(){accountAvatarsMount();},[]);return{formik:formik};}","map":null,"metadata":{},"sourceType":"module"}