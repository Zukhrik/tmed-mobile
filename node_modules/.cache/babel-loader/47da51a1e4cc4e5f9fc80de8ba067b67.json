{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useStore}from'effector-react';import{useParams}from'react-router-dom';import{$appModel,changeSpecPanel,switchOrgGroupPanel}from'../../../Models/app';import{useOfferingList,useQueryOfferingList}from'../../../Hooks/offerings';import{OverlaySettings}from'../../../Components/Overlay';import InfiniteScroll from'react-infinite-scroll-component';import{OverlayAuth}from'../../../UIComponents/OverlayAuth';import{generateSkeleton}from'../../../utils/skeleton-utils';import{useOrgOrder,useOrgOrderList}from'../../../Hooks/order';import{OverlayOfferingGroup,OverlaySpecialists}from'../../../Components/Offering/OrgOfferings';import{useBodyOverflowHidden}from'../../../Hooks/app';import{numberFormat}from'../../../utils/number-utils';import{ProductCard,ProductCardSkeleton}from'../../../Components/Cards';import{Col,Row}from'antd';var skeleton=generateSkeleton(10,100,220);export var OfferingsList=function OfferingsList(){useOrgOrderList();var _useParams=useParams(),organization=_useParams.organization;var _useOfferingList=useOfferingList(),loadMoreOfferingGroup=_useOfferingList.loadMoreOfferingGroup;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var _useOrgOrder=useOrgOrder(),currency=_useOrgOrder.currency,getIsLoading=_useOrgOrder.getIsLoading,onCreatingCartItem=_useOrgOrder.onCreatingCartItem;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),offeringItem=_useState4[0],setOfferingItem=_useState4[1];var _useStore=useStore($appModel),_useStore$$app=_useStore.$app,token=_useStore$$app.token,changeOrgGroupPanel=_useStore$$app.changeOrgGroupPanel,showSpecPanel=_useStore$$app.showSpecPanel;useBodyOverflowHidden(changeOrgGroupPanel||showSpecPanel);var _useQueryOfferingList=useQueryOfferingList(),list=_useQueryOfferingList.list,dataLength=_useQueryOfferingList.dataLength,fetchNextPage=_useQueryOfferingList.fetchNextPage,hasNextPage=_useQueryOfferingList.hasNextPage,isLoading=_useQueryOfferingList.isLoading;var handleClose=function handleClose(){if(auth){setAuth(false);}setOfferingItem(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:changeOrgGroupPanel,content:/*#__PURE__*/React.createElement(OverlayOfferingGroup,{loadMore:loadMoreOfferingGroup}),onClose:function onClose(){return switchOrgGroupPanel(false);}}),/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:showSpecPanel,onClose:function onClose(){return changeSpecPanel(false);},content:/*#__PURE__*/React.createElement(OverlaySpecialists,null)}),/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:offeringItem,onClose:handleClose,content:/*#__PURE__*/React.createElement(OverlayAuth,{action:function action(){return onCreatingCartItem(offeringItem);},auth:auth,setAuth:setAuth,onClose:handleClose})}),/*#__PURE__*/React.createElement(InfiniteScroll,{next:function next(){return fetchNextPage();},dataLength:dataLength,hasMore:!isLoading&&!!hasNextPage,loader:/*#__PURE__*/React.createElement(React.Fragment,null,\"...loading\")},/*#__PURE__*/React.createElement(Row,{gutter:[12,12]},!isLoading?(list===null||list===void 0?void 0:list.length)>0&&list.map(function(item,idx){var offeringData={id:item.id,qty:item.qty,name:item.name,image:item.image,currency:currency,loading:getIsLoading(item.id),inCart:item.is_in_cart,organization:organization,cost:numberFormat(item.cost),responsible:item.responsible,path:\"/\".concat(organization,\"/offerings/\").concat(item.id)};return/*#__PURE__*/React.createElement(Col,{span:12,key:idx+1},/*#__PURE__*/React.createElement(ProductCard,{showBag:true,isLoading:isLoading,item:offeringData,handleClick:function handleClick(item){!!token?onCreatingCartItem(item):setOfferingItem(item);}}));}):skeleton.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{span:12,key:idx+1},/*#__PURE__*/React.createElement(ProductCardSkeleton,null));}))));};","map":null,"metadata":{},"sourceType":"module"}