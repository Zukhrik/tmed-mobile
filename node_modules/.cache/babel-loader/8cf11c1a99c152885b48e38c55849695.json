{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useState}from'react';import{OfferGroupWrapper,OfferingGroupSearchForm}from'../style';import{Col,Row}from'antd';import{useStore}from'effector-react';import{OfferingGroupItem}from'../OfferingGroupItem';import{URL_KEYS}from'../../../../Constants';import{useUrlParams}from'../../../../Hooks/app';import{useLocation,useParams}from'react-router-dom';import InfiniteScroll from'react-infinite-scroll-component';import{$offeringsModel,orgOfferGroupListMount}from'../../../../Models/offerings-model';import{SearchSvg}from'../../../../Icons/Search';import{useTranslation}from'react-i18next';export var OverlayOfferingGroup=function OverlayOfferingGroup(_ref){var loadMore=_ref.loadMore;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useParams=useParams(),organization=_useParams.organization;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchText=_useState2[0],setSearchText=_useState2[1];var groupId=urlData[URL_KEYS.OFFERING_GROUP_ID];var _useStore=useStore($offeringsModel),_useStore$$offeringGr=_useStore.$offeringGroupList,data=_useStore$$offeringGr.data,loading=_useStore$$offeringGr.loading,result=_useStore$$offeringGr.result;var generateUrl=useCallback(function(id){var url=[];if(urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]){url.push(\"\".concat(URL_KEYS.SPECIALIST_CATEGORY_ID,\"=\").concat(urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]));}if(urlData[URL_KEYS.SPECIALIST_ID]){url.push(\"\".concat(URL_KEYS.SPECIALIST_ID,\"=\").concat(urlData[URL_KEYS.SPECIALIST_ID]));}if(!groupId||groupId!==String(id)){url.push(\"\".concat(URL_KEYS.OFFERING_GROUP_ID,\"=\").concat(id));}return{pathname:pathname,search:url.join('&')};},[pathname,groupId,urlData]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(searchText.length>2){var params={clear:true,organization:organization,params:{search:searchText}};orgOfferGroupListMount(params);}};return/*#__PURE__*/React.createElement(OfferGroupWrapper,{id:\"scrollableDiv\"},/*#__PURE__*/React.createElement(OfferingGroupSearchForm,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"\".concat(t('search'),\"...\"),value:searchText,onChange:function onChange(e){return setSearchText(e.target.value);}}),/*#__PURE__*/React.createElement(SearchSvg,null)),/*#__PURE__*/React.createElement(InfiniteScroll,{next:loadMore,dataLength:(result===null||result===void 0?void 0:result.nextOffset)||20,hasMore:!loading&&!!(result===null||result===void 0?void 0:result.next),loader:/*#__PURE__*/React.createElement(React.Fragment,null,\"...loading\"),style:{overflow:'hidden',padding:'50px 0'},scrollableTarget:\"scrollableDiv\",endMessage:/*#__PURE__*/React.createElement(\"p\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"b\",null,\"You have seen it all\"))},/*#__PURE__*/React.createElement(Row,{gutter:[12,12]},data&&data.map(function(item,idx){return/*#__PURE__*/React.createElement(Col,{className:\"centered\",key:\"\".concat(idx+1),span:8},/*#__PURE__*/React.createElement(OfferingGroupItem,{name:item.name,imgUrl:item.image,path:generateUrl(item.id),isActive:function isActive(){return groupId&&groupId===String(item.id);}}));}))));};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Components/Offering/OrgOfferings/OverlayOfferingGroup/index.jsx"],"names":["React","useCallback","useState","OfferGroupWrapper","OfferingGroupSearchForm","Col","Row","useStore","OfferingGroupItem","URL_KEYS","useUrlParams","useLocation","useParams","InfiniteScroll","$offeringsModel","orgOfferGroupListMount","SearchSvg","useTranslation","OverlayOfferingGroup","loadMore","t","urlData","pathname","organization","searchText","setSearchText","groupId","OFFERING_GROUP_ID","$offeringGroupList","data","loading","result","generateUrl","id","url","SPECIALIST_CATEGORY_ID","push","SPECIALIST_ID","String","search","join","handleSubmit","e","preventDefault","length","params","clear","target","value","nextOffset","next","overflow","padding","textAlign","map","item","idx","name","image"],"mappings":"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","sourcesContent":["import React, {useCallback, useState} from 'react'\nimport {OfferGroupWrapper, OfferingGroupSearchForm} from '../style'\nimport {Col, Row} from 'antd'\nimport {useStore} from 'effector-react'\nimport {OfferingGroupItem} from '../OfferingGroupItem'\nimport {URL_KEYS} from '../../../../Constants'\nimport {useUrlParams} from '../../../../Hooks/app'\nimport {useLocation, useParams} from 'react-router-dom'\nimport InfiniteScroll from 'react-infinite-scroll-component'\nimport {$offeringsModel, orgOfferGroupListMount} from '../../../../Models/offerings-model'\nimport {SearchSvg} from '../../../../Icons/Search'\nimport {useTranslation} from 'react-i18next'\n\nexport const OverlayOfferingGroup = ({loadMore}) => {\n    const {t} = useTranslation()\n    const {urlData} = useUrlParams()\n    const {pathname} = useLocation()\n    const {organization} = useParams()\n    const [searchText, setSearchText] = useState('')\n    const groupId = urlData[URL_KEYS.OFFERING_GROUP_ID]\n    const {$offeringGroupList: {data, loading, result}} = useStore($offeringsModel)\n    \n    const generateUrl = useCallback((id) => {\n        const url = []\n        if (urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]) {\n            url.push(`${URL_KEYS.SPECIALIST_CATEGORY_ID}=${urlData[URL_KEYS.SPECIALIST_CATEGORY_ID]}`)\n        }\n        \n        if (urlData[URL_KEYS.SPECIALIST_ID]) {\n            url.push(`${URL_KEYS.SPECIALIST_ID}=${urlData[URL_KEYS.SPECIALIST_ID]}`)\n        }\n        \n        if (!groupId || groupId !== String(id)) {\n            url.push(`${URL_KEYS.OFFERING_GROUP_ID}=${id}`)\n        }\n        \n        return {\n            pathname,\n            search: url.join('&')\n        }\n    }, [pathname, groupId, urlData])\n    \n    const handleSubmit = (e) => {\n        e.preventDefault()\n        if (searchText.length > 2) {\n            const params = {\n                clear: true,\n                organization: organization,\n                params: {\n                    search: searchText\n                }\n            }\n            orgOfferGroupListMount(params)\n        }\n    }\n    \n    \n    return (\n        <OfferGroupWrapper id='scrollableDiv'>\n            <OfferingGroupSearchForm onSubmit={handleSubmit}>\n                <input\n                    placeholder={`${t('search')}...`}\n                    value={searchText}\n                    onChange={(e) => setSearchText(e.target.value)}\n                />\n                <SearchSvg/>\n            </OfferingGroupSearchForm>\n            <InfiniteScroll\n                next={loadMore}\n                dataLength={result?.nextOffset || 20}\n                hasMore={!loading && !!result?.next}\n                loader={<>...loading</>}\n                style={{overflow: 'hidden', padding: '50px 0'}}\n                scrollableTarget='scrollableDiv'\n                endMessage={\n                    <p style={{textAlign: 'center'}}>\n                        <b>You have seen it all</b>\n                    </p>\n                }\n            >\n                <Row gutter={[12, 12]}>\n                    {\n                        data && data.map((item, idx) => (\n                            <Col\n                                className='centered'\n                                key={`${idx + 1}`} span={8}\n                            >\n                                <OfferingGroupItem\n                                    name={item.name}\n                                    imgUrl={item.image}\n                                    path={generateUrl(item.id)}\n                                    isActive={() => groupId && groupId === String(item.id)}\n                                />\n                            </Col>\n                        ))\n                    }\n                </Row>\n            </InfiniteScroll>\n        </OfferGroupWrapper>\n    )\n}"]},"metadata":{},"sourceType":"module"}