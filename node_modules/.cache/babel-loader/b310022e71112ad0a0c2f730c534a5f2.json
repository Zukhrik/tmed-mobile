{"ast":null,"code":"import React,{useEffect}from'react';import{Root}from'./Root';import{useStore}from'effector-react';import{Records}from'./Views/Records';import{useTranslation}from'react-i18next';import{SignInPage,SignUpPage}from'./Views/Auth';import{BottomNavBar}from'./Components/BottomNavBar';import{accountInfoMount}from'./Models/account-model';import{$appModel,detectLocationMount}from'./Models/app';import{Route,Switch,useLocation}from'react-router-dom';import{useAppDb,useChatWs,useCommonWs,useIsMobile}from'./Hooks/app';import{QueryClient,QueryClientProvider}from'react-query';import{ReactQueryDevtools}from'react-query/devtools';export var queryClient=new QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:false,retry:false}}});export var App=function App(){var _useLocation=useLocation(),pathname=_useLocation.pathname;var generateBottomNavbar=pathname.indexOf('sign-in')===-1&&pathname.indexOf('sign-up')===-1&&pathname.match(/([^/]*)\\/[^/]*$/)[1]!=='offerings'&&pathname.match(/([^/]*)\\/[^/]*$/)[1]!=='unregistered'&&pathname.match(/([^/]*)\\/[^/]*$/)[1]!=='checkout';useAppDb();useChatWs();useCommonWs();useIsMobile();var _useTranslation=useTranslation(),i18n=_useTranslation.i18n;var _useStore=useStore($appModel),token=_useStore.$app.token,lang=_useStore.$appLang;useEffect(function(){if(token){accountInfoMount();}else{detectLocationMount();}},[token]);useEffect(function(){if(lang){i18n.changeLanguage(lang);}},[i18n,lang]);return/*#__PURE__*/React.createElement(QueryClientProvider,{client:queryClient},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/sign-in\",component:SignInPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/sign-up\",component:SignUpPage}),/*#__PURE__*/React.createElement(Route,{path:\"/records\",component:Records}),/*#__PURE__*/React.createElement(Route,{path:\"/\",component:Root})),generateBottomNavbar&&/*#__PURE__*/React.createElement(BottomNavBar,null),/*#__PURE__*/React.createElement(ReactQueryDevtools,{position:\"bottom-left\"}));};","map":null,"metadata":{},"sourceType":"module"}