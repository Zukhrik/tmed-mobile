{"ast":null,"code":"import { useUrlParams } from '../app';\nimport { URL_KEYS } from '../../Constants';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useEffect } from 'react';\nimport { $offeringsModel, offeringForceLoading, orgOfferGroupListMount, orgOfferingsListMount } from '../../Models/offerings-model';\nimport { useStore } from 'effector-react';\nconst initialParams = {\n  limit: 20,\n  offset: 0\n};\nexport function useOfferingList() {\n  const {\n    urlData\n  } = useUrlParams();\n  const {\n    organization\n  } = useParams();\n  const group = urlData[URL_KEYS.OFFERING_GROUP_ID];\n  const specialist = urlData[URL_KEYS.SPECIALIST_ID];\n  const {\n    $offeringsList: {\n      result\n    }\n  } = useStore($offeringsModel);\n  const getOfferingGroupList = useCallback(params => {\n    if (organization) {\n      const data = {\n        organization,\n        ...params\n      };\n      orgOfferGroupListMount(data);\n    }\n  }, [organization]);\n  const getOrgOfferingsList = useCallback(params => {\n    if (organization) {\n      const data = {\n        organization,\n        ...params\n      };\n      orgOfferingsListMount(data);\n    }\n  }, [organization]);\n  const loadMoreOfferings = useCallback(() => {\n    if (result.nextOffset) {\n      const data = {\n        params: { ...initialParams,\n          offset: result.nextOffset\n        }\n      };\n\n      if (specialist) {\n        data['params']['responsible'] = specialist;\n      } else {\n        delete data['params']['responsible'];\n      }\n\n      if (group) {\n        data['params']['group'] = group;\n      }\n\n      getOrgOfferingsList(data);\n    }\n  }, [getOrgOfferingsList, specialist, group, result]);\n  const loadMoreOfferingGroup = useCallback(() => {\n    console.log('loarmore');\n  }, []);\n  useEffect(() => {\n    let timeout = null;\n    timeout = setTimeout(() => {\n      const data = {\n        clear: true,\n        params: { ...initialParams\n        }\n      };\n\n      if (specialist) {\n        data['params']['specialist'] = specialist;\n      } else {\n        delete data['params']['specialist'];\n      }\n\n      getOfferingGroupList(data);\n    }, 300);\n    return () => {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n  }, [specialist, getOfferingGroupList]);\n  useEffect(() => {\n    let timeout = null;\n    timeout = setTimeout(() => {\n      const data = {\n        clear: true,\n        params: { ...initialParams\n        }\n      };\n\n      if (specialist) {\n        data['params']['responsible'] = specialist;\n      } else {\n        delete data['params']['responsible'];\n      }\n\n      if (group) {\n        data['params']['group'] = group;\n      }\n\n      offeringForceLoading();\n      getOrgOfferingsList(data);\n    }, 300);\n    return () => {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n  }, [getOrgOfferingsList, specialist, group]);\n  return {\n    loadMoreOfferings,\n    loadMoreOfferingGroup\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/offerings/use-offering-list.js"],"names":["useUrlParams","URL_KEYS","useParams","useCallback","useEffect","$offeringsModel","offeringForceLoading","orgOfferGroupListMount","orgOfferingsListMount","useStore","initialParams","limit","offset","useOfferingList","urlData","organization","group","OFFERING_GROUP_ID","specialist","SPECIALIST_ID","$offeringsList","result","getOfferingGroupList","params","data","getOrgOfferingsList","loadMoreOfferings","nextOffset","loadMoreOfferingGroup","console","log","timeout","setTimeout","clear","clearTimeout"],"mappings":"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","sourcesContent":["import {useUrlParams} from '../app'\r\nimport {URL_KEYS} from '../../Constants'\r\nimport {useParams} from 'react-router-dom'\r\nimport {useCallback, useEffect} from 'react'\r\nimport {\r\n    $offeringsModel,\r\n    offeringForceLoading,\r\n    orgOfferGroupListMount,\r\n    orgOfferingsListMount\r\n} from '../../Models/offerings-model'\r\nimport {useStore} from 'effector-react'\r\n\r\nconst initialParams = {\r\n    limit: 20,\r\n    offset: 0\r\n}\r\n\r\nexport function useOfferingList() {\r\n    const {urlData} = useUrlParams()\r\n    const {organization} = useParams()\r\n    const group = urlData[URL_KEYS.OFFERING_GROUP_ID]\r\n    const specialist = urlData[URL_KEYS.SPECIALIST_ID]\r\n    const {$offeringsList: {result}} = useStore($offeringsModel)\r\n    \r\n    const getOfferingGroupList = useCallback((params) => {\r\n        if (organization) {\r\n            const data = {\r\n                organization,\r\n                ...params\r\n            }\r\n            orgOfferGroupListMount(data)\r\n        }\r\n        \r\n    }, [organization])\r\n    \r\n    const getOrgOfferingsList = useCallback((params) => {\r\n        if (organization) {\r\n            const data = {\r\n                organization,\r\n                ...params\r\n            }\r\n            orgOfferingsListMount(data)\r\n        }\r\n    }, [organization])\r\n    \r\n    const loadMoreOfferings = useCallback(() => {\r\n        if (result.nextOffset) {\r\n            const data = {\r\n                params: {\r\n                    ...initialParams,\r\n                    offset: result.nextOffset\r\n                }\r\n            }\r\n            \r\n            if (specialist) {\r\n                data['params']['responsible'] = specialist\r\n            } else {\r\n                delete data['params']['responsible']\r\n            }\r\n            \r\n            if (group) {\r\n                data['params']['group'] = group\r\n            }\r\n            \r\n            getOrgOfferingsList(data)\r\n        }\r\n    }, [getOrgOfferingsList, specialist, group, result])\r\n    \r\n    const loadMoreOfferingGroup = useCallback(() => {\r\n        console.log('loarmore')\r\n    },[])\r\n    \r\n    useEffect(() => {\r\n        let timeout = null\r\n        \r\n        timeout = setTimeout(() => {\r\n            const data = {\r\n                clear: true,\r\n                params: {\r\n                    ...initialParams\r\n                }\r\n            }\r\n            \r\n            if (specialist) {\r\n                data['params']['specialist'] = specialist\r\n            } else {\r\n                delete data['params']['specialist']\r\n            }\r\n            \r\n            getOfferingGroupList(data)\r\n        }, 300)\r\n        \r\n        return () => {\r\n            clearTimeout(timeout)\r\n            timeout = null\r\n        }\r\n    }, [specialist, getOfferingGroupList])\r\n    \r\n    useEffect(() => {\r\n        let timeout = null\r\n        \r\n        timeout = setTimeout(() => {\r\n            const data = {\r\n                clear: true,\r\n                params: {\r\n                    ...initialParams\r\n                }\r\n            }\r\n            \r\n            if (specialist) {\r\n                data['params']['responsible'] = specialist\r\n            } else {\r\n                delete data['params']['responsible']\r\n            }\r\n            \r\n            if (group) {\r\n                data['params']['group'] = group\r\n            }\r\n            offeringForceLoading()\r\n            getOrgOfferingsList(data)\r\n        }, 300)\r\n        \r\n        return () => {\r\n            clearTimeout(timeout)\r\n            timeout = null\r\n        }\r\n    }, [getOrgOfferingsList, specialist, group])\r\n    \r\n    return {\r\n        loadMoreOfferings,\r\n        loadMoreOfferingGroup\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}