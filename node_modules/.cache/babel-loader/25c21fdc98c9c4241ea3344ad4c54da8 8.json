{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{useUrlParams}from'../app';import{useStore}from'effector-react';import order from'../../Service/order';import{URL_KEYS}from'../../Constants';import{saveURLMount}from'../../Models/app';import{$offeringsModel}from'../../Models/offerings-model';import{getOrgOrderCartsMount}from'../../Models/order-model';import{useHistory,useLocation,useParams}from'react-router-dom';export function useOfferingOrderInOfferPage(){var _useHistory=useHistory(),push=_useHistory.push;var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useParams=useParams(),organization=_useParams.organization;var _useStore=useStore($offeringsModel),data=_useStore.$offeringInfo.data;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openModal=_useState2[0],setOpenModal=_useState2[1];var handleRequest=function handleRequest(){var _data$responsible$;saveURLMount(pathname);var offeringId=data.id;var specId=urlData[URL_KEYS.SPECIALIST_ID]?urlData[URL_KEYS.SPECIALIST_ID]:data===null||data===void 0?void 0:(_data$responsible$=data.responsible[0])===null||_data$responsible$===void 0?void 0:_data$responsible$.id;var params={org_slug_name:organization,data:{offering_id:offeringId,responsible_id:specId}};order.postOrgOrderCart(params).then(function(response){getOrgOrderCartsMount();if(response){push(\"/records/unregistered/\".concat(organization,\"?\").concat(URL_KEYS.SPECIALIST_ID,\"=\").concat(urlData[URL_KEYS.SPECIALIST_ID]));}});};return{handleRequest:handleRequest,openModal:openModal,setOpenModal:setOpenModal};}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/order/use-offering-order-in-offer-page.js"],"names":["useState","useUrlParams","useStore","order","URL_KEYS","saveURLMount","$offeringsModel","getOrgOrderCartsMount","useHistory","useLocation","useParams","useOfferingOrderInOfferPage","push","urlData","pathname","organization","data","$offeringInfo","openModal","setOpenModal","handleRequest","offeringId","id","specId","SPECIALIST_ID","responsible","params","org_slug_name","offering_id","responsible_id","postOrgOrderCart","then","response"],"mappings":"qKAAA,OAAQA,QAAR,KAAuB,OAAvB,CACA,OAAQC,YAAR,KAA2B,QAA3B,CACA,OAAQC,QAAR,KAAuB,gBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,OAAQC,QAAR,KAAuB,iBAAvB,CACA,OAAQC,YAAR,KAA2B,kBAA3B,CACA,OAAQC,eAAR,KAA8B,8BAA9B,CACA,OAAQC,qBAAR,KAAoC,0BAApC,CACA,OAAQC,UAAR,CAAoBC,WAApB,CAAiCC,SAAjC,KAAiD,kBAAjD,CAEA,MAAO,SAASC,CAAAA,2BAAT,EAAuC,CAC1C,gBAAeH,UAAU,EAAzB,CAAOI,IAAP,aAAOA,IAAP,CACA,kBAAkBX,YAAY,EAA9B,CAAOY,OAAP,eAAOA,OAAP,CACA,iBAAmBJ,WAAW,EAA9B,CAAOK,QAAP,cAAOA,QAAP,CACA,eAAuBJ,SAAS,EAAhC,CAAOK,YAAP,YAAOA,YAAP,CACA,cAAgCb,QAAQ,CAACI,eAAD,CAAxC,CAAuBU,IAAvB,WAAOC,aAAP,CAAuBD,IAAvB,CACA,cAAkChB,QAAQ,CAAC,KAAD,CAA1C,wCAAOkB,SAAP,eAAkBC,YAAlB,eAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,wBACxBf,YAAY,CAACS,QAAD,CAAZ,CACA,GAAMO,CAAAA,UAAU,CAAGL,IAAI,CAACM,EAAxB,CACA,GAAMC,CAAAA,MAAM,CAAGV,OAAO,CAACT,QAAQ,CAACoB,aAAV,CAAP,CAAkCX,OAAO,CAACT,QAAQ,CAACoB,aAAV,CAAzC,CAAoER,IAApE,SAAoEA,IAApE,qCAAoEA,IAAI,CAAES,WAAN,CAAkB,CAAlB,CAApE,6CAAoE,mBAAsBH,EAAzG,CACA,GAAMI,CAAAA,MAAM,CAAG,CACXC,aAAa,CAAEZ,YADJ,CAEXC,IAAI,CAAE,CACFY,WAAW,CAAEP,UADX,CAEFQ,cAAc,CAAEN,MAFd,CAFK,CAAf,CAOApB,KAAK,CAAC2B,gBAAN,CAAuBJ,MAAvB,EACKK,IADL,CACU,SAAAC,QAAQ,CAAI,CACdzB,qBAAqB,GACrB,GAAIyB,QAAJ,CAAc,CACVpB,IAAI,iCAA0BG,YAA1B,aAA0CX,QAAQ,CAACoB,aAAnD,aAAoEX,OAAO,CAACT,QAAQ,CAACoB,aAAV,CAA3E,EAAJ,CACH,CACJ,CANL,EAOH,CAlBD,CAoBA,MAAO,CAACJ,aAAa,CAAbA,aAAD,CAAgBF,SAAS,CAATA,SAAhB,CAA2BC,YAAY,CAAZA,YAA3B,CAAP,CACH","sourcesContent":["import {useState} from 'react'\nimport {useUrlParams} from '../app'\nimport {useStore} from 'effector-react'\nimport order from '../../Service/order'\nimport {URL_KEYS} from '../../Constants'\nimport {saveURLMount} from '../../Models/app'\nimport {$offeringsModel} from '../../Models/offerings-model'\nimport {getOrgOrderCartsMount} from '../../Models/order-model'\nimport {useHistory, useLocation, useParams} from 'react-router-dom'\n\nexport function useOfferingOrderInOfferPage() {\n    const {push} = useHistory()\n    const {urlData} = useUrlParams()\n    const {pathname} = useLocation()\n    const {organization} = useParams()\n    const {$offeringInfo: {data}} = useStore($offeringsModel)\n    const [openModal, setOpenModal] = useState(false)\n    \n    \n    const handleRequest = () => {\n        saveURLMount(pathname)\n        const offeringId = data.id\n        const specId = urlData[URL_KEYS.SPECIALIST_ID] ? urlData[URL_KEYS.SPECIALIST_ID] : data?.responsible[0]?.id\n        const params = {\n            org_slug_name: organization,\n            data: {\n                offering_id: offeringId,\n                responsible_id: specId\n            }\n        }\n        order.postOrgOrderCart(params)\n            .then(response => {\n                getOrgOrderCartsMount()\n                if (response) {\n                    push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${urlData[URL_KEYS.SPECIALIST_ID]}`)\n                }\n            })\n    }\n    \n    return {handleRequest, openModal, setOpenModal}\n}"]},"metadata":{},"sourceType":"module"}