{"ast":null,"code":"import { useCallback, useEffect } from 'react';\nimport { $orderModel, orderListMount } from '../../Models/order-model';\nimport { useStore } from 'effector-react';\nconst initialParams = {\n  limit: 20,\n  offset: 0\n};\nexport function useOrderList(status) {\n  const getList = useCallback(params => {\n    orderListMount(params);\n  }, []);\n  const {\n    $orderList: {\n      result\n    }\n  } = useStore($orderModel);\n  const loadMore = useCallback(page => {\n    if (result.nextOffset) {\n      const data = {\n        params: { ...initialParams,\n          offset: result.nextOffset\n        }\n      };\n      getList(data);\n    }\n  }, [getList, result]);\n  useEffect(() => {\n    const data = {\n      clear: true,\n      params: {\n        limit: 10,\n        offset: 0\n      }\n    };\n\n    if (status) {\n      data['params']['status'] = status;\n    } else {\n      delete data['params']['status'];\n    }\n\n    getList(data);\n  }, [status, getList]);\n  return {\n    loadMore\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/org/use-order-list.js"],"names":["useCallback","useEffect","$orderModel","orderListMount","useStore","initialParams","limit","offset","useOrderList","status","getList","params","$orderList","result","loadMore","page","nextOffset","data","clear"],"mappings":"AAAA,SAAQA,WAAR,EAAqBC,SAArB,QAAqC,OAArC;AACA,SAAQC,WAAR,EAAqBC,cAArB,QAA0C,0BAA1C;AACA,SAAQC,QAAR,QAAuB,gBAAvB;AAEA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,KAAK,EAAE,EADW;AAElBC,EAAAA,MAAM,EAAE;AAFU,CAAtB;AAKA,OAAO,SAASC,YAAT,CAAsBC,MAAtB,EAA8B;AACjC,QAAMC,OAAO,GAAGV,WAAW,CAAEW,MAAD,IAAY;AACpCR,IAAAA,cAAc,CAACQ,MAAD,CAAd;AACH,GAF0B,EAExB,EAFwB,CAA3B;AAGA,QAAM;AAACC,IAAAA,UAAU,EAAE;AAACC,MAAAA;AAAD;AAAb,MAAyBT,QAAQ,CAACF,WAAD,CAAvC;AAEA,QAAMY,QAAQ,GAAGd,WAAW,CAAEe,IAAD,IAAU;AACnC,QAAIF,MAAM,CAACG,UAAX,EAAuB;AACnB,YAAMC,IAAI,GAAG;AACTN,QAAAA,MAAM,EAAE,EACJ,GAAGN,aADC;AAEJE,UAAAA,MAAM,EAAEM,MAAM,CAACG;AAFX;AADC,OAAb;AAMAN,MAAAA,OAAO,CAACO,IAAD,CAAP;AACH;AAEJ,GAX2B,EAWzB,CAACP,OAAD,EAAUG,MAAV,CAXyB,CAA5B;AAaAZ,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMgB,IAAI,GAAG;AACTC,MAAAA,KAAK,EAAE,IADE;AAETP,MAAAA,MAAM,EAAE;AACJL,QAAAA,KAAK,EAAE,EADH;AAEJC,QAAAA,MAAM,EAAE;AAFJ;AAFC,KAAb;;AAOA,QAAIE,MAAJ,EAAY;AACRQ,MAAAA,IAAI,CAAC,QAAD,CAAJ,CAAe,QAAf,IAA2BR,MAA3B;AACH,KAFD,MAEO;AACH,aAAOQ,IAAI,CAAC,QAAD,CAAJ,CAAe,QAAf,CAAP;AACH;;AAEDP,IAAAA,OAAO,CAACO,IAAD,CAAP;AACH,GAfQ,EAeN,CAACR,MAAD,EAASC,OAAT,CAfM,CAAT;AAiBA,SAAO;AAACI,IAAAA;AAAD,GAAP;AACH","sourcesContent":["import {useCallback, useEffect} from 'react'\nimport {$orderModel, orderListMount} from '../../Models/order-model'\nimport {useStore} from 'effector-react'\n\nconst initialParams = {\n    limit: 20,\n    offset: 0\n}\n\nexport function useOrderList(status) {\n    const getList = useCallback((params) => {\n        orderListMount(params)\n    }, [])\n    const {$orderList: {result}} = useStore($orderModel)\n    \n    const loadMore = useCallback((page) => {\n        if (result.nextOffset) {\n            const data = {\n                params: {\n                    ...initialParams,\n                    offset: result.nextOffset\n                }\n            }\n            getList(data)\n        }\n        \n    }, [getList, result])\n    \n    useEffect(() => {\n        const data = {\n            clear: true,\n            params: {\n                limit: 10,\n                offset: 0\n            }\n        }\n        if (status) {\n            data['params']['status'] = status\n        } else {\n            delete data['params']['status']\n        }\n        \n        getList(data)\n    }, [status, getList])\n    \n    return {loadMore}\n}"]},"metadata":{},"sourceType":"module"}