{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from'react';import{$chatModel,userChatDetailMount}from'../../Models/chat-model';import{useParams}from'react-router-dom';import{useStore}from'effector-react';var initialParams={limit:50,offset:0};export function useUserMessages(){var _useStore=useStore($chatModel),_useStore$$userMessag=_useStore.$userMessages,loading=_useStore$$userMessag.loading,result=_useStore$$userMessag.result;var _useParams=useParams(),partner_slug=_useParams.partner_slug;var _useState=useState(),_useState2=_slicedToArray(_useState,2),mounted=_useState2[0],setMounted=_useState2[1];var getList=useCallback(function(params){if(partner_slug){var data=_objectSpread({partner:partner_slug},params);userChatDetailMount(data);}},[partner_slug]);var loadMore=useCallback(function(e){var r=result[partner_slug];var target=e.target;if(target.offsetHeight-target.scrollTop>target.scrollHeight-300&&!loading&&!!r.next){getList({params:_objectSpread(_objectSpread({},initialParams),{},{offset:r.nextOffset})});}},[partner_slug,result,getList,loading]);useEffect(function(){if(!mounted){getList({clear:true,params:initialParams});setMounted(true);}},[getList,mounted]);return{loadMore:loadMore};}","map":null,"metadata":{},"sourceType":"module"}