{"ast":null,"code":"var _jsxFileName = \"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Views/Checkout/InfoCard/CheckoutDetail/index.jsx\";\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Col, Radio, Row } from 'antd';\nimport { useStore } from 'effector-react';\nimport { useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { CheckoutDetailWrapper } from '../style';\nimport { CreditCardDetail } from './CreditCardDetail';\nimport { ArrowIosRightSvg } from '../../../../Icons/Arrow';\nimport { $orderModel } from '../../../../Models/order-model';\nimport { Text } from '../../../../UIComponents/Typography/Text';\nimport { $accountModel } from '../../../../Models/account-model';\nimport { OverlaySettings } from '../../../../Components/Overlay';\nimport { Title } from '../../../../UIComponents/Typography/Title';\nimport { $appModel } from '../../../../Models/app';\nimport { INFO_MAT } from '../../../../Constants/app';\nimport { $orgModel } from '../../../../Models/org-model';\nimport { FormControl, FormControlLabel, FormLabel, RadioGroup } from '@material-ui/core';\nimport { PAYMENT_METHOD } from '../../../../Constants/payment';\nimport { AllScreenModal } from '../../../../Components/Modal';\nimport { CouponList } from './CouponList';\nexport const CheckoutDetail = ({\n  payment,\n  setPayment\n}) => {\n  var _data$organization, _data$organization$, _data$organization$$t, _currentProfile$curre, _currentProfile$curre2, _data$organization2, _data$organization2$, _data$organization2$$, _currentProfile$curre3, _currentProfile$curre4;\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    organization\n  } = useParams();\n  const {\n    $device\n  } = useStore($appModel);\n  const [openCard, setOpenCard] = useState(false);\n  const {\n    $orgOrderCartList: {\n      data\n    }\n  } = useStore($orderModel);\n  const {\n    $profiles: {\n      currentProfile\n    }\n  } = useStore($accountModel);\n  const [cardWrapper, setCardWrapper] = useState(false);\n  const [couponView, setCouponView] = useState(false);\n  const {\n    $orgPaymentMethods: {\n      data: orgPayments\n    }\n  } = useStore($orgModel);\n\n  const onClose = () => {\n    setOpenCard(false);\n    setCardWrapper(false);\n  };\n\n  const paymentInfo = useMemo(() => {\n    return payment.id !== 3 ? t(payment.title) : payment.title;\n  }, [payment.id, payment.title, t]);\n  const cardStyle = useCallback(number => {\n    let tmp = '';\n\n    for (let i = 0; i < number.length; i++) {\n      if (i % 4 === 0) {\n        tmp += ' ' + number[i];\n      } else {\n        tmp += number[i];\n      }\n    }\n\n    return tmp;\n  }, []);\n\n  const handleChange = (value, item = undefined) => {\n    if (item) {\n      setPayment({\n        id: item.id,\n        title: `${cardStyle(item.card_number)} ${item.name}`,\n        extraId: value\n      });\n    } else {\n      setPayment({\n        id: PAYMENT_METHOD[value].title,\n        title: PAYMENT_METHOD[value].title,\n        extraId: value\n      });\n    }\n  };\n\n  const generateOrgPayments = useCallback(item => {\n    if (item.status && item.method !== 3) {\n      if (item.method === 1) {\n        return t('cash');\n      } else if (item.method === 2) {\n        return t('terminal');\n      }\n    }\n  }, [t]);\n  return /*#__PURE__*/React.createElement(CheckoutDetailWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(OverlaySettings, {\n    openSettings: openCard,\n    onClose: onClose,\n    content: /*#__PURE__*/React.createElement(CreditCardDetail, {\n      onClose: onClose,\n      cardWrapper: cardWrapper,\n      setCardWrapper: setCardWrapper,\n      payment: payment,\n      setPayment: setPayment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 26\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(AllScreenModal, {\n    visible: couponView,\n    close: () => setCouponView(false),\n    body: /*#__PURE__*/React.createElement(CouponList, {\n      goBack: () => setCouponView(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 23\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), $device && $device === INFO_MAT ? /*#__PURE__*/React.createElement(Row, {\n    gutter: [0, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FormLabel, {\n    component: \"legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }, t('select_payment_methods')), /*#__PURE__*/React.createElement(RadioGroup, {\n    row: true,\n    className: \"radio-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 37\n    }\n  }, orgPayments && orgPayments.map(item => /*#__PURE__*/React.createElement(FormControlLabel, {\n    className: \"radio\",\n    key: item.id,\n    checked: payment.extraId === item.method,\n    value: item.status && item.method,\n    label: generateOrgPayments(item),\n    control: item.method !== 3 ? /*#__PURE__*/React.createElement(Radio, {\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 57\n      }\n    }) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 84\n      }\n    }),\n    onChange: () => handleChange(item.method),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 49\n    }\n  }))))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    align: \"middle\",\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 41\n    }\n  }, `${t('total_cost')}:`)), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 37\n    }\n  }, (data === null || data === void 0 ? void 0 : data[organization]) && currentProfile && /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 45\n    }\n  }, `${data === null || data === void 0 ? void 0 : (_data$organization = data[organization]) === null || _data$organization === void 0 ? void 0 : (_data$organization$ = _data$organization[0]) === null || _data$organization$ === void 0 ? void 0 : (_data$organization$$t = _data$organization$.total_cost) === null || _data$organization$$t === void 0 ? void 0 : _data$organization$$t.toLocaleString('fi-Fi')}\n                                                ${currentProfile === null || currentProfile === void 0 ? void 0 : (_currentProfile$curre = currentProfile.currency) === null || _currentProfile$curre === void 0 ? void 0 : (_currentProfile$curre2 = _currentProfile$curre.code) === null || _currentProfile$curre2 === void 0 ? void 0 : _currentProfile$curre2.toUpperCase()}`))))) : /*#__PURE__*/React.createElement(Row, {\n    gutter: [0, 12],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    onClick: () => setOpenCard(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 49\n    }\n  }, t('select_payment_methods'))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 49\n    }\n  }, paymentInfo)))), /*#__PURE__*/React.createElement(Col, {\n    className: \"payment-icon-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ArrowIosRightSvg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 41\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    onClick: () => setCouponView(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 49\n    }\n  }, t('coupon_discount'))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 49\n    }\n  }, \"coupon name\")))), /*#__PURE__*/React.createElement(Col, {\n    className: \"payment-icon-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ArrowIosRightSvg, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 41\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [12, 0],\n    align: \"middle\",\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    color: \"var(--grey-dwed)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 41\n    }\n  }, `${t('total_cost')}:`)), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 37\n    }\n  }, (data === null || data === void 0 ? void 0 : data[organization]) && currentProfile && /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 45\n    }\n  }, `${data === null || data === void 0 ? void 0 : (_data$organization2 = data[organization]) === null || _data$organization2 === void 0 ? void 0 : (_data$organization2$ = _data$organization2[0]) === null || _data$organization2$ === void 0 ? void 0 : (_data$organization2$$ = _data$organization2$.total_cost) === null || _data$organization2$$ === void 0 ? void 0 : _data$organization2$$.toLocaleString('fi-Fi')}\n                                                ${currentProfile === null || currentProfile === void 0 ? void 0 : (_currentProfile$curre3 = currentProfile.currency) === null || _currentProfile$curre3 === void 0 ? void 0 : (_currentProfile$curre4 = _currentProfile$curre3.code) === null || _currentProfile$curre4 === void 0 ? void 0 : _currentProfile$curre4.toUpperCase()}`))))));\n};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Views/Checkout/InfoCard/CheckoutDetail/index.jsx"],"names":["React","useCallback","useMemo","useState","Col","Radio","Row","useStore","useParams","useTranslation","CheckoutDetailWrapper","CreditCardDetail","ArrowIosRightSvg","$orderModel","Text","$accountModel","OverlaySettings","Title","$appModel","INFO_MAT","$orgModel","FormControl","FormControlLabel","FormLabel","RadioGroup","PAYMENT_METHOD","AllScreenModal","CouponList","CheckoutDetail","payment","setPayment","t","organization","$device","openCard","setOpenCard","$orgOrderCartList","data","$profiles","currentProfile","cardWrapper","setCardWrapper","couponView","setCouponView","$orgPaymentMethods","orgPayments","onClose","paymentInfo","id","title","cardStyle","number","tmp","i","length","handleChange","value","item","undefined","card_number","name","extraId","generateOrgPayments","status","method","map","total_cost","toLocaleString","currency","code","toUpperCase"],"mappings":"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","sourcesContent":["import React, {useCallback, useMemo, useState} from 'react'\nimport {Col, Radio, Row} from 'antd'\nimport {useStore} from 'effector-react'\nimport {useParams} from 'react-router-dom'\nimport {useTranslation} from 'react-i18next'\nimport {CheckoutDetailWrapper} from '../style'\nimport {CreditCardDetail} from './CreditCardDetail'\nimport {ArrowIosRightSvg} from '../../../../Icons/Arrow'\nimport {$orderModel} from '../../../../Models/order-model'\nimport {Text} from '../../../../UIComponents/Typography/Text'\nimport {$accountModel} from '../../../../Models/account-model'\nimport {OverlaySettings} from '../../../../Components/Overlay'\nimport {Title} from '../../../../UIComponents/Typography/Title'\nimport {$appModel} from '../../../../Models/app'\nimport {INFO_MAT} from '../../../../Constants/app'\nimport {$orgModel} from '../../../../Models/org-model'\nimport {FormControl, FormControlLabel, FormLabel, RadioGroup} from '@material-ui/core'\nimport {PAYMENT_METHOD} from '../../../../Constants/payment'\nimport {AllScreenModal} from '../../../../Components/Modal'\nimport {CouponList} from './CouponList'\n\nexport const CheckoutDetail = ({payment, setPayment}) => {\n    const {t} = useTranslation()\n    const {organization} = useParams()\n    const {$device} = useStore($appModel)\n    const [openCard, setOpenCard] = useState(false)\n    const {$orgOrderCartList: {data}} = useStore($orderModel)\n    const {$profiles: {currentProfile}} = useStore($accountModel)\n    const [cardWrapper, setCardWrapper] = useState(false)\n    const [couponView, setCouponView] = useState(false)\n    const {$orgPaymentMethods: {data: orgPayments}} = useStore($orgModel)\n    \n    const onClose = () => {\n        setOpenCard(false)\n        setCardWrapper(false)\n    }\n    \n    const paymentInfo = useMemo(() => {\n        return payment.id !== 3\n            ? t(payment.title)\n            : payment.title\n    }, [payment.id, payment.title, t])\n    \n    const cardStyle = useCallback((number) => {\n        let tmp = ''\n        for (let i = 0; i < number.length; i++) {\n            if (i % 4 === 0) {\n                tmp += ' ' + number[i]\n            } else {\n                tmp += number[i]\n            }\n        }\n        return tmp\n    }, [])\n    \n    const handleChange = (value, item = undefined) => {\n        if (item) {\n            setPayment({\n                id: item.id,\n                title: `${cardStyle(item.card_number)} ${item.name}`,\n                extraId: value\n            })\n        } else {\n            setPayment({\n                id: PAYMENT_METHOD[value].title,\n                title: PAYMENT_METHOD[value].title,\n                extraId: value\n            })\n        }\n    }\n    \n    const generateOrgPayments = useCallback((item) => {\n        if (item.status && item.method !== 3) {\n            if (item.method === 1) {\n                return t('cash')\n            } else if (item.method === 2) {\n                return t('terminal')\n            }\n        }\n    }, [t])\n    \n    return (\n        <CheckoutDetailWrapper>\n            <OverlaySettings\n                openSettings={openCard}\n                onClose={onClose}\n                content={<CreditCardDetail\n                    onClose={onClose}\n                    cardWrapper={cardWrapper}\n                    setCardWrapper={setCardWrapper}\n                    payment={payment}\n                    setPayment={setPayment}\n                />}\n            />\n            <AllScreenModal\n                visible={couponView}\n                close={() => setCouponView(false)}\n                body={<CouponList goBack={() => setCouponView(false)}/>}\n            />\n            {\n                $device && $device === INFO_MAT\n                    ? (\n                        <Row gutter={[0, 24]}>\n                            <Col span={24}>\n                                <FormControl>\n                                    <FormLabel component='legend'>\n                                        {t('select_payment_methods')}\n                                    </FormLabel>\n                                    <RadioGroup row className='radio-wrapper'>\n                                        {\n                                            orgPayments && orgPayments.map(item => (\n                                                <FormControlLabel\n                                                    className='radio'\n                                                    key={item.id}\n                                                    checked={payment.extraId === item.method}\n                                                    value={item.status && item.method}\n                                                    label={generateOrgPayments(item)}\n                                                    control={item.method !== 3 ?\n                                                        <Radio color='primary'/> : <span/>}\n                                                    onChange={() => handleChange(item.method)}\n                                                />\n                                            ))\n                                        }\n                                    </RadioGroup>\n                                </FormControl>\n                            </Col>\n                            <Col span={24}>\n                                <Row align='middle' justify='space-between'>\n                                    <Col>\n                                        <Title color='var(--grey-dwed)'>{`${t('total_cost')}:`}</Title>\n                                    </Col>\n                                    <Col>\n                                        {\n                                            data?.[organization] && currentProfile &&\n                                            <Title>\n                                                {`${data?.[organization]?.[0]?.total_cost?.toLocaleString('fi-Fi')}\n                                                ${currentProfile?.currency?.code?.toUpperCase()}`}\n                                            </Title>\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    )\n                    : (\n                        <Row gutter={[0, 12]}>\n                            <Col span={24} onClick={() => setOpenCard(true)}>\n                                <Row justify='space-between'>\n                                    <Col>\n                                        <Row>\n                                            <Col span={24}>\n                                                <Text>{t('select_payment_methods')}</Text>\n                                            </Col>\n                                            <Col span={24}>\n                                                <Text color='var(--grey-dwed)'>\n                                                    {paymentInfo}\n                                                </Text>\n                                            </Col>\n                                        </Row>\n                                    </Col>\n                                    <Col className='payment-icon-wrapper'>\n                                        <ArrowIosRightSvg/>\n                                    </Col>\n                                </Row>\n                            </Col>\n                            <Col span={24} onClick={() => setCouponView(true)}>\n                                <Row justify='space-between'>\n                                    <Col>\n                                        <Row>\n                                            <Col span={24}>\n                                                <Text>{t('coupon_discount')}</Text>\n                                            </Col>\n                                            <Col span={24}>\n                                                <Text color='var(--grey-dwed)'>\n                                                    coupon name\n                                                </Text>\n                                            </Col>\n                                        </Row>\n                                    </Col>\n                                    <Col className='payment-icon-wrapper'>\n                                        <ArrowIosRightSvg/>\n                                    </Col>\n                                </Row>\n                            </Col>\n                            <Col span={24}>\n                                <Row gutter={[12, 0]} align='middle' justify='space-between'>\n                                    <Col>\n                                        <Title color='var(--grey-dwed)'>{`${t('total_cost')}:`}</Title>\n                                    </Col>\n                                    <Col>\n                                        {\n                                            data?.[organization] && currentProfile &&\n                                            <Title>\n                                                {`${data?.[organization]?.[0]?.total_cost?.toLocaleString('fi-Fi')}\n                                                ${currentProfile?.currency?.code?.toUpperCase()}`}\n                                            </Title>\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    )\n            }\n        </CheckoutDetailWrapper>\n    )\n}"]},"metadata":{},"sourceType":"module"}