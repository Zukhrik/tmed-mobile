{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{combine,createStore}from'effector';import Cookies from'js-cookie';import{fetchCurrencies,fetchDetectLocation}from'./effects';import{changeAppLang,changeMenuOpen,changeSearchFocus,changeShowAccounts,changeSpecPanel,commentIdMount,deviceMount,onReplyCommentDataMount,openFastAuthMount,paymentMethodMount,saveURLMount,socketCountersMount,switchOrgGroupPanel,tokenMount}from'./events';import{fetchAccountInfo,fetchUpdateAccount}from'../account-model/effects';var defaultAppState={saveURL:'',commentId:'',menuOpen:false,searchFocus:false,showAccounts:false,openFastAuth:false,showSpecPanel:false,onReplyCommentData:'',changeOrgGroupPanel:false,paymentMethodValue:'cash',token:Cookies.get('token')||null};var $app=createStore(defaultAppState).on(tokenMount,function(state,token){return _objectSpread(_objectSpread({},state),{},{token:token});}).on(saveURLMount,function(state,saveURL){return _objectSpread(_objectSpread({},state),{},{saveURL:saveURL});}).on(commentIdMount,function(state,commentId){return _objectSpread(_objectSpread({},state),{},{commentId:commentId});}).on(changeMenuOpen,function(state,status){return _objectSpread(_objectSpread({},state),{},{menuOpen:status});}).on(changeSearchFocus,function(state,status){return _objectSpread(_objectSpread({},state),{},{searchFocus:status});}).on(changeSpecPanel,function(state,status){return _objectSpread(_objectSpread({},state),{},{showSpecPanel:status});}).on(openFastAuthMount,function(state,status){return _objectSpread(_objectSpread({},state),{},{openFastAuth:status});}).on(changeShowAccounts,function(state,status){return _objectSpread(_objectSpread({},state),{},{showAccounts:status});}).on(switchOrgGroupPanel,function(state,status){return _objectSpread(_objectSpread({},state),{},{changeOrgGroupPanel:status});}).on(paymentMethodMount,function(state,paymentMethodValue){return _objectSpread(_objectSpread({},state),{},{paymentMethodValue:paymentMethodValue});}).on(onReplyCommentDataMount,function(state,onReplyCommentData){return _objectSpread(_objectSpread({},state),{},{onReplyCommentData:onReplyCommentData});});var $currenciesList=createStore({loading:false,data:[],error:false}).on(fetchCurrencies.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchCurrencies.fail,function(state,_ref){var error=_ref.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{}});}).on(fetchCurrencies.done,function(state,res){return _objectSpread(_objectSpread({},state),{},{data:res.result.data.results});});var detectionInfo=localStorage.getItem('detectionInfo');var appLang=localStorage.getItem('lang');var $detectLocationInfo=createStore(detectionInfo?JSON.parse(detectionInfo):{}).on(fetchDetectLocation.done,function(state,res){return res.result.data;});var $appLang=createStore(appLang?JSON.parse(appLang):null).on(fetchDetectLocation.done,function(state,_ref2){var result=_ref2.result;return result.data.lang;}).on(fetchAccountInfo.done,function(state,_ref3){var result=_ref3.result;if(result.data.user_lang!==state){return result.data.user_lang;}return state;}).on(fetchUpdateAccount.done,function(state,_ref4){var result=_ref4.result;if(result.data.user_lang!==state){return result.data.user_lang;}return state;}).on(changeAppLang,function(state,lang){if(state!==lang){return lang;}return state;});$detectLocationInfo.watch(function(state){if(Object.values(state).length>0){localStorage.setItem('detectionInfo',JSON.stringify(state));}else{localStorage.removeItem(detectionInfo);}});var $socketCounters=createStore({chatUnreadCounter:0}).on(socketCountersMount,function(state,payload){return _objectSpread(_objectSpread({},state),payload);});var $device=createStore(null).on(deviceMount,function(state,payload){return payload;});$appLang.watch(function(state){if(state){localStorage.setItem('lang',JSON.stringify(state));}});export var $appModel=combine({$app:$app,$device:$device,$currenciesList:$currenciesList,$socketCounters:$socketCounters,$detectLocationInfo:$detectLocationInfo,$appLang:$appLang});","map":null,"metadata":{},"sourceType":"module"}