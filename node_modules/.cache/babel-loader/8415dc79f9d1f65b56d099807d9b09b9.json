{"ast":null,"code":"import{useCallback}from'react';import Cookies from'js-cookie';import jwtDecode from'jwt-decode';import{useHistory}from'react-router-dom';import account from'../../Service/account';import{tokenMount}from'../../Models/app';import{PROFILE_TYPE}from'../../Constants';import{getCurrentAccount}from'../../Models/account-model';import{showMessage}from'../../UIComponents/MessageNotification';export function useProfileMenu(){var _useHistory=useHistory(),push=_useHistory.push;var tokens=Cookies.get('users')&&JSON.parse(Cookies.get('users'));var changeOrgProfile=useCallback(function(item){getCurrentAccount({slug_name:item.slug_name,type:PROFILE_TYPE.ORGANIZATION});push(\"/\".concat(item.slug_name,\"/offerings\"));},[push]);var changeUserProfile=useCallback(function(username){if(tokens&&tokens[username]){account.refreshToken({refresh:tokens[username].refresh}).then(function(response){var data=response.data;if(tokens){tokens[jwtDecode(data.access).username]={access:data.access,refresh:data.refresh};}Cookies.set('users',JSON.stringify(tokens));Cookies.set('token',data.access);Cookies.set('refresh-token',data.refresh);tokenMount(data.access);getCurrentAccount({slug_name:username,type:PROFILE_TYPE.USER});// if (!pathname.includes('create-organization') || !pathname.includes('sign-in')) {\n//     push(`/@${username}/tape`)\n// }\n// if (pathname.includes('sign-in')) {\n//     push('/')\n// }\n}).catch(function(){push('/sign-in');});}else{push({pathname:'/sign-in',state:{username:username}});}},[push,tokens]);var changeAccount=useCallback(function(username){var messageText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var redirect=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!messageText){changeUserProfile(username);}else{showMessage(messageText,'danger');}},[changeUserProfile]);var handleExit=function handleExit(){Cookies.remove('token');Cookies.remove('refresh-token');Cookies.remove('users');getCurrentAccount(null);tokenMount(null);};return{changeAccount:changeAccount,changeOrgProfile:changeOrgProfile,handleExit:handleExit};}","map":null,"metadata":{},"sourceType":"module"}