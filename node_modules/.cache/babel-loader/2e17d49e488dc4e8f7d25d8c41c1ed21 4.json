{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useStore}from'effector-react';import{useParams}from'react-router-dom';import{useCallback,useEffect}from'react';import{$tapeModel,authorTapeMount,resetAuthorTape}from'../../Models/tape-model';var initialParams={limit:10,offset:0};export function useAuthorTape(){var _useParams=useParams(),username=_useParams.username,organization=_useParams.organization;var _useStore=useStore($tapeModel),result=_useStore.$authorTape.result;var getList=useCallback(function(params){var data=_objectSpread({author:username?\"@\".concat(username):organization},params);authorTapeMount(data);},[username,organization]);var loadMore=useCallback(function(){if(result.nextOffset){var data={params:_objectSpread(_objectSpread({},initialParams),{},{offset:result.nextOffset})};getList(data);}},[result.nextOffset,getList]);useEffect(function(){var data={params:initialParams,clear:true};getList(data);return function(){resetAuthorTape();};},[getList]);return{loadMore:loadMore};}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/tape/use-author-tape.js"],"names":["useStore","useParams","useCallback","useEffect","$tapeModel","authorTapeMount","resetAuthorTape","initialParams","limit","offset","useAuthorTape","username","organization","result","$authorTape","getList","params","data","author","loadMore","nextOffset","clear"],"mappings":"oKAAA,OAAQA,QAAR,KAAuB,gBAAvB,CACA,OAAQC,SAAR,KAAwB,kBAAxB,CACA,OAAQC,WAAR,CAAqBC,SAArB,KAAqC,OAArC,CACA,OAAQC,UAAR,CAAoBC,eAApB,CAAqCC,eAArC,KAA2D,yBAA3D,CAEA,GAAMC,CAAAA,aAAa,CAAG,CAClBC,KAAK,CAAE,EADW,CAElBC,MAAM,CAAE,CAFU,CAAtB,CAKA,MAAO,SAASC,CAAAA,aAAT,EAAyB,CAC5B,eAAiCT,SAAS,EAA1C,CAAOU,QAAP,YAAOA,QAAP,CAAiBC,YAAjB,YAAiBA,YAAjB,CACA,cAAgCZ,QAAQ,CAACI,UAAD,CAAxC,CAAqBS,MAArB,WAAOC,WAAP,CAAqBD,MAArB,CAEA,GAAME,CAAAA,OAAO,CAAGb,WAAW,CAAC,SAACc,MAAD,CAAY,CACpC,GAAMC,CAAAA,IAAI,gBACNC,MAAM,CAAEP,QAAQ,YAAOA,QAAP,EAAoBC,YAD9B,EAEHI,MAFG,CAAV,CAIAX,eAAe,CAACY,IAAD,CAAf,CACH,CAN0B,CAMxB,CAACN,QAAD,CAAWC,YAAX,CANwB,CAA3B,CAQA,GAAMO,CAAAA,QAAQ,CAAGjB,WAAW,CAAC,UAAM,CAC/B,GAAIW,MAAM,CAACO,UAAX,CAAuB,CACnB,GAAMH,CAAAA,IAAI,CAAG,CACTD,MAAM,gCACCT,aADD,MAEFE,MAAM,CAAEI,MAAM,CAACO,UAFb,EADG,CAAb,CAMAL,OAAO,CAACE,IAAD,CAAP,CACH,CACJ,CAV2B,CAUzB,CAACJ,MAAM,CAACO,UAAR,CAAoBL,OAApB,CAVyB,CAA5B,CAYAZ,SAAS,CAAC,UAAM,CACZ,GAAMc,CAAAA,IAAI,CAAG,CACTD,MAAM,CAAET,aADC,CAETc,KAAK,CAAE,IAFE,CAAb,CAIAN,OAAO,CAACE,IAAD,CAAP,CAEA,MAAO,WAAM,CACTX,eAAe,GAClB,CAFD,CAGH,CAVQ,CAUN,CAACS,OAAD,CAVM,CAAT,CAYA,MAAO,CACHI,QAAQ,CAARA,QADG,CAAP,CAGH","sourcesContent":["import {useStore} from 'effector-react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {useCallback, useEffect} from 'react'\r\nimport {$tapeModel, authorTapeMount, resetAuthorTape} from '../../Models/tape-model'\r\n\r\nconst initialParams = {\r\n    limit: 10,\r\n    offset: 0\r\n}\r\n\r\nexport function useAuthorTape() {\r\n    const {username, organization} = useParams()\r\n    const {$authorTape: {result}} = useStore($tapeModel)\r\n    \r\n    const getList = useCallback((params) => {\r\n        const data = {\r\n            author: username ? `@${username}` : organization,\r\n            ...params\r\n        }\r\n        authorTapeMount(data)\r\n    }, [username, organization])\r\n    \r\n    const loadMore = useCallback(() => {\r\n        if (result.nextOffset) {\r\n            const data = {\r\n                params: {\r\n                    ...initialParams,\r\n                    offset: result.nextOffset\r\n                }\r\n            }\r\n            getList(data)\r\n        }\r\n    }, [result.nextOffset, getList])\r\n    \r\n    useEffect(() => {\r\n        const data = {\r\n            params: initialParams,\r\n            clear: true\r\n        }\r\n        getList(data)\r\n        \r\n        return () => {\r\n            resetAuthorTape()\r\n        }\r\n    }, [getList])\r\n    \r\n    return {\r\n        loadMore\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}