{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import moment from'moment';import{useCallback,useEffect,useState}from'react';import{useUrlParams}from'../app';import{URL_KEYS}from'../../Constants';import{useStore}from'effector-react';import{formatter,strHourToInt}from'./use-specialist-date';import{getDateTime,getWeekDay}from'../../utils/time-utils';import{$orderModel}from'../../Models/order-model';import order from'../../Service/order';import{useParams}from'react-router-dom';export function useSpecMeetDate(_ref){var _data$organization$,_data$organization$$r;var activeDay=_ref.activeDay;var _useParams=useParams(),organization=_useParams.organization;var _useState=useState(new Date()),_useState2=_slicedToArray(_useState,1),activeDate=_useState2[0];var _useStore=useStore($orderModel),data=_useStore.$orgOrderCartList.data;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dateRange=_useState4[0],setDateRange=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),meetTimes=_useState6[0],setMeetTimes=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),hours=_useState8[0],setHours=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),requestData=_useState10[0],setRequestData=_useState10[1];var operating_modes=organization&&data[organization]&&((_data$organization$=data[organization][0])===null||_data$organization$===void 0?void 0:(_data$organization$$r=_data$organization$.responsible)===null||_data$organization$$r===void 0?void 0:_data$organization$$r.operating_mode);var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var specId=urlData[URL_KEYS.SPECIALIST_ID];var generateData=useCallback(function(data){var tmp={};for(var i=0;i<data.length;i++){var id=new Date(moment(data[i].meet_date).format(formatter)).getTime();var meetTime=moment(data[i].meet_date).format('HH.mm');tmp[id]={user:data[i].user,meetTime:parseFloat(parseFloat(meetTime).toFixed(1))};}return tmp;},[]);var getOrgOrder=useCallback(function(params){order.getOrgOrderResponsible(params).then(function(res){var data=res.data.results;var orders=generateData(data);setRequestData(orders);});},[generateData]);var renderMeetRow=useCallback(function(id){var strHour=moment(id).format('HH:mm');var hourInt=strHourToInt(strHour);return meetTimes[hourInt]&&Object.values(meetTimes[hourInt]).sort(function(a,b){return a-b;});},[meetTimes]);useEffect(function(){var endDate=moment(activeDate).endOf('month');var start=activeDate.getUTCDate();var end=new Date(endDate).getUTCDate();var tmp=[];for(var i=0;i<=end-start;i++){var d=moment(activeDate).add(i,'days');tmp.push(d.format('YYYY-MM-DD'));}setDateRange(tmp);},[activeDate]);useEffect(function(){var day=getWeekDay(new Date());if(operating_modes&&operating_modes[day]){var mode=operating_modes[day];var breaks=mode.breaks;var to=mode.to;var interval=mode.proc_interval;var tmp=[];var possibleMeetTime={};var from=parseInt(mode.from);var a=mode.from;var date=new Date(activeDay);while(a<to){for(var i=0;i<breaks.length;i++){if(parseInt(a)===parseInt(breaks[i].from)&&(breaks[i].from>=a||a<breaks[i].to)){a=breaks[i].to;}}possibleMeetTime[parseInt(a)]=possibleMeetTime[parseInt(a)]?_objectSpread({},possibleMeetTime[parseInt(a)]):{};var strHour=moment(new Date(new Date(getDateTime(a)).setMinutes(new Date(getDateTime(a===from?mode.from:a)).getMinutes()+interval)));var id=moment(new Date(\"\".concat(date.toDateString(),\" \").concat(moment(getDateTime(a)).format('HH:mm')))).format(formatter);possibleMeetTime[parseInt(a)][id]={intDate:a,strDate:\"\".concat(moment(getDateTime(a)).format('HH:mm'),\" - \").concat(strHour.format('HH:mm')),dateTime:new Date(new Date(\"\".concat(date.toDateString(),\" \").concat(moment(getDateTime(a)).format('HH:mm')))).getTime()};a=parseFloat(strHour.format('HH.mm'));}setMeetTimes(possibleMeetTime);for(var _i=from;_i<to;_i++){var _id=new Date(new Date(\"\".concat(date.toDateString(),\" 0\").concat(_i,\":59\"))).getTime();if(_i<10){tmp.push({hour:\"0\".concat(_i,\":00\"),interval:interval,id:_id});}else{tmp.push({hour:\"\".concat(_i,\":00\"),interval:interval,id:_id});}}setHours(tmp);}},[operating_modes,activeDay]);useEffect(function(){if(specId&&activeDay){var _data={responsible_id:specId,params:{status:'0,1,2',limit:200,offset:0,meet_date__gt:moment(new Date(\"\".concat(new Date(activeDay).toDateString(),\" 00:00\"))).format(formatter),meet_date__lt:moment(new Date(\"\".concat(new Date(activeDay).toDateString(),\" 23:59\"))).format(formatter)}};getOrgOrder(_data);}},[specId,getOrgOrder,activeDay]);return{dateRange:dateRange,activeDate:activeDate,hours:hours,renderMeetRow:renderMeetRow,requestData:requestData};}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/checkout/use-spec-meet-date.js"],"names":["moment","useCallback","useEffect","useState","useUrlParams","URL_KEYS","useStore","formatter","strHourToInt","getDateTime","getWeekDay","$orderModel","order","useParams","useSpecMeetDate","activeDay","organization","Date","activeDate","data","$orgOrderCartList","dateRange","setDateRange","meetTimes","setMeetTimes","hours","setHours","requestData","setRequestData","operating_modes","responsible","operating_mode","urlData","specId","SPECIALIST_ID","generateData","tmp","i","length","id","meet_date","format","getTime","meetTime","user","parseFloat","toFixed","getOrgOrder","params","getOrgOrderResponsible","then","res","results","orders","renderMeetRow","strHour","hourInt","Object","values","sort","a","b","endDate","endOf","start","getUTCDate","end","d","add","push","day","mode","breaks","to","interval","proc_interval","possibleMeetTime","from","parseInt","date","setMinutes","getMinutes","toDateString","intDate","strDate","dateTime","hour","responsible_id","status","limit","offset","meet_date__gt","meet_date__lt"],"mappings":"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","sourcesContent":["import moment from 'moment'\nimport {useCallback, useEffect, useState} from 'react'\nimport {useUrlParams} from '../app'\nimport {URL_KEYS} from '../../Constants'\nimport {useStore} from 'effector-react'\nimport {formatter, strHourToInt} from './use-specialist-date'\nimport {getDateTime, getWeekDay} from '../../utils/time-utils'\nimport {$orderModel} from '../../Models/order-model'\nimport order from '../../Service/order'\nimport {useParams} from 'react-router-dom'\n\nexport function useSpecMeetDate({activeDay}) {\n    const {organization} = useParams()\n    const [activeDate] = useState(new Date())\n    const {$orgOrderCartList: {data}} = useStore($orderModel)\n    const [dateRange, setDateRange] = useState([])\n    const [meetTimes, setMeetTimes] = useState({})\n    const [hours, setHours] = useState([])\n    const [requestData, setRequestData] = useState({})\n    const operating_modes = organization && data[organization] &&  data[organization][0]?.responsible?.operating_mode\n    const {urlData} = useUrlParams()\n    const specId = urlData[URL_KEYS.SPECIALIST_ID]\n\n    const generateData = useCallback((data) => {\n        const tmp = {}\n        for (let i = 0; i < data.length; i++) {\n            const id = new Date(moment(data[i].meet_date).format(formatter)).getTime()\n            const meetTime = moment(data[i].meet_date).format('HH.mm')\n            tmp[id] = {\n                user: data[i].user,\n                meetTime: parseFloat(parseFloat(meetTime).toFixed(1)),\n            }\n        }\n        return tmp\n    }, [])\n\n    const getOrgOrder = useCallback((params) => {\n        order.getOrgOrderResponsible(params)\n            .then(res => {\n                const data = res.data.results\n                let orders = generateData(data)\n                setRequestData(orders)\n            })\n    }, [generateData])\n\n    const renderMeetRow = useCallback((id) => {\n        const strHour = moment(id).format('HH:mm')\n        const hourInt = strHourToInt(strHour)\n        return meetTimes[hourInt] && Object.values(meetTimes[hourInt]).sort((a, b) => a - b)\n    }, [meetTimes])\n\n    useEffect(() => {\n        const endDate = moment(activeDate).endOf('month')\n        let start = activeDate.getUTCDate()\n        const end = new Date(endDate).getUTCDate()\n        const tmp = []\n        for (let i = 0; i <= end - start; i++) {\n            const d = moment(activeDate).add(i, 'days')\n            tmp.push(d.format('YYYY-MM-DD'))\n        }\n\n        setDateRange(tmp)\n    }, [activeDate])\n\n\n    useEffect(() => {\n        const day = getWeekDay(new Date())\n        if (operating_modes && operating_modes[day]) {\n            const mode = operating_modes[day]\n            const breaks = mode.breaks\n            const to = mode.to\n            const interval = mode.proc_interval\n            const tmp = []\n            const possibleMeetTime = {}\n            let from = parseInt(mode.from)\n            let a = mode.from\n            const date = new Date(activeDay)\n\n            while (a < to) {\n\n                for (let i = 0; i < breaks.length; i++) {\n                    if (parseInt(a) === parseInt(breaks[i].from) && (breaks[i].from >= a || a < breaks[i].to)) {\n                        a = breaks[i].to\n                    }\n                }\n\n                possibleMeetTime[parseInt(a)] = possibleMeetTime[parseInt(a)]\n                    ? {...possibleMeetTime[parseInt(a)]}\n                    : {}\n\n                const strHour = moment(new Date(new Date(getDateTime(a))\n                    .setMinutes(new Date(getDateTime(a === from ? mode.from : a)).getMinutes() + interval)))\n\n                const id = moment(new Date(`${date.toDateString()} ${moment(getDateTime(a)).format('HH:mm')}`)).format(formatter)\n\n                possibleMeetTime[parseInt(a)][id] = {\n                    intDate: a,\n                    strDate: `${moment(getDateTime(a)).format('HH:mm')} - ${strHour.format('HH:mm')}`,\n                    dateTime: new Date(new Date(`${date.toDateString()} ${moment(getDateTime(a)).format('HH:mm')}`)).getTime()\n                }\n                a = parseFloat(strHour.format('HH.mm'))\n            }\n            setMeetTimes(possibleMeetTime)\n            for (let i = from; i < to; i++) {\n                const id = new Date(new Date(`${date.toDateString()} 0${i}:59`)).getTime()\n                if (i < 10) {\n                    tmp.push({hour: `0${i}:00`, interval, id})\n                } else {\n                    tmp.push({hour: `${i}:00`, interval, id})\n                }\n            }\n            setHours(tmp)\n        }\n    }, [operating_modes, activeDay])\n\n\n    useEffect(() => {\n        if (specId && activeDay) {\n            const data = {\n                responsible_id: specId,\n                params: {\n                    status: '0,1,2',\n                    limit: 200,\n                    offset: 0,\n                    meet_date__gt: moment(new Date(`${new Date(activeDay).toDateString()} 00:00`)).format(formatter),\n                    meet_date__lt: moment(new Date(`${new Date(activeDay).toDateString()} 23:59`)).format(formatter),\n                }\n            }\n            getOrgOrder(data)\n        }\n    }, [specId, getOrgOrder, activeDay])\n\n    return {dateRange, activeDate, hours, renderMeetRow, requestData}\n}"]},"metadata":{},"sourceType":"module"}