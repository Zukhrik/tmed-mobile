{"ast":null,"code":"import moment from 'moment';\nimport { useStore } from 'effector-react';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useEffect } from 'react';\nimport { $streamModel, allStreamScheduleMount } from '../../Models/stream-model';\nconst initialParams = {\n  limit: 50,\n  offset: 0\n};\nexport function useChannelSchedule() {\n  const {\n    $channelStreamScheduleList: {\n      result\n    }\n  } = useStore($streamModel);\n  const {\n    slug_name\n  } = useParams();\n  const loadMore = useCallback(() => {\n    let offset = 0;\n\n    if (slug_name) {\n      offset = result[slug_name].nextOffset;\n    }\n\n    const params = { ...initialParams,\n      offset: offset\n    };\n    allStreamScheduleMount({\n      params,\n      slug_name\n    });\n  }, [result, slug_name]);\n  useEffect(() => {\n    const params = {\n      clear: true,\n      ...initialParams,\n      date_gte: moment(new Date()).format('YYYY-MM-DD[T00:00:00]'),\n      date_lte: moment(new Date()).format('YYYY-MM-DD[T23:59:59]')\n    };\n    allStreamScheduleMount({\n      params: params,\n      slug_name\n    });\n  }, [slug_name]);\n  return {\n    loadMore\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/stream/use-channel-schedule.js"],"names":["moment","useStore","useParams","useCallback","useEffect","$streamModel","allStreamScheduleMount","initialParams","limit","offset","useChannelSchedule","$channelStreamScheduleList","result","slug_name","loadMore","nextOffset","params","clear","date_gte","Date","format","date_lte"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAAQC,QAAR,QAAuB,gBAAvB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,WAAR,EAAqBC,SAArB,QAAqC,OAArC;AACA,SAAQC,YAAR,EAAsBC,sBAAtB,QAAmD,2BAAnD;AAEA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,KAAK,EAAE,EADW;AAElBC,EAAAA,MAAM,EAAE;AAFU,CAAtB;AAKA,OAAO,SAASC,kBAAT,GAA8B;AACjC,QAAM;AAACC,IAAAA,0BAA0B,EAAE;AAACC,MAAAA;AAAD;AAA7B,MAAyCX,QAAQ,CAACI,YAAD,CAAvD;AACA,QAAM;AAACQ,IAAAA;AAAD,MAAcX,SAAS,EAA7B;AAEA,QAAMY,QAAQ,GAAGX,WAAW,CAAC,MAAM;AAC/B,QAAIM,MAAM,GAAG,CAAb;;AAEA,QAAII,SAAJ,EAAe;AACXJ,MAAAA,MAAM,GAAGG,MAAM,CAACC,SAAD,CAAN,CAAkBE,UAA3B;AACH;;AAED,UAAMC,MAAM,GAAG,EACX,GAAGT,aADQ;AAEXE,MAAAA,MAAM,EAAEA;AAFG,KAAf;AAKAH,IAAAA,sBAAsB,CAAC;AAACU,MAAAA,MAAD;AAASH,MAAAA;AAAT,KAAD,CAAtB;AACH,GAb2B,EAazB,CAACD,MAAD,EAASC,SAAT,CAbyB,CAA5B;AAeAT,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMY,MAAM,GAAG;AACXC,MAAAA,KAAK,EAAE,IADI;AAEX,SAAGV,aAFQ;AAGXW,MAAAA,QAAQ,EAAElB,MAAM,CAAC,IAAImB,IAAJ,EAAD,CAAN,CAAmBC,MAAnB,CAA0B,uBAA1B,CAHC;AAIXC,MAAAA,QAAQ,EAAErB,MAAM,CAAC,IAAImB,IAAJ,EAAD,CAAN,CAAmBC,MAAnB,CAA0B,uBAA1B;AAJC,KAAf;AAOAd,IAAAA,sBAAsB,CAAC;AAACU,MAAAA,MAAM,EAAEA,MAAT;AAAiBH,MAAAA;AAAjB,KAAD,CAAtB;AACH,GATQ,EASN,CAACA,SAAD,CATM,CAAT;AAWA,SAAO;AACHC,IAAAA;AADG,GAAP;AAGH","sourcesContent":["import moment from 'moment'\nimport {useStore} from 'effector-react'\nimport {useParams} from 'react-router-dom'\nimport {useCallback, useEffect} from 'react'\nimport {$streamModel, allStreamScheduleMount} from '../../Models/stream-model'\n\nconst initialParams = {\n    limit: 50,\n    offset: 0\n}\n\nexport function useChannelSchedule() {\n    const {$channelStreamScheduleList: {result}} = useStore($streamModel)\n    const {slug_name} = useParams()\n    \n    const loadMore = useCallback(() => {\n        let offset = 0\n        \n        if (slug_name) {\n            offset = result[slug_name].nextOffset\n        }\n        \n        const params = {\n            ...initialParams,\n            offset: offset\n        }\n        \n        allStreamScheduleMount({params, slug_name})\n    }, [result, slug_name])\n    \n    useEffect(() => {\n        const params = {\n            clear: true,\n            ...initialParams,\n            date_gte: moment(new Date()).format('YYYY-MM-DD[T00:00:00]'),\n            date_lte: moment(new Date()).format('YYYY-MM-DD[T23:59:59]')\n        }\n        \n        allStreamScheduleMount({params: params, slug_name})\n    }, [slug_name])\n    \n    return {\n        loadMore\n    }\n}"]},"metadata":{},"sourceType":"module"}