{"ast":null,"code":"import { useParams } from 'react-router-dom';\nimport { useCallback, useEffect } from 'react';\nimport { getOrgOrderCartsMount } from '../../Models/order-model';\nimport { useStore } from 'effector-react';\nimport { $appModel } from '../../Models/app';\nimport { $offeringsModel } from '../../Models/offerings-model';\nconst initialParams = {\n  limit: 10,\n  offset: 0\n};\nexport function useOrgOrderList() {\n  const {\n    organization\n  } = useParams();\n  const {\n    $app: {\n      token\n    }\n  } = useStore($appModel);\n  const {\n    $offeringsList: {\n      result\n    }\n  } = useStore($offeringsModel);\n  const getList = useCallback(params => {\n    if (!!token) {\n      getOrgOrderCartsMount({\n        clear: true,\n        org_slug_name: organization,\n        params\n      });\n    }\n  }, [organization, token]);\n  const loadMore = useCallback(() => {\n    if (result.nextOffset) {\n      const params = { ...initialParams,\n        offset: result.nextOffset\n      };\n      getList(params);\n    }\n  }, [getList, result]);\n  useEffect(() => {\n    getList(initialParams);\n  }, [getList]);\n  return {\n    loadMore\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/order/use-org-order-list.js"],"names":["useParams","useCallback","useEffect","getOrgOrderCartsMount","useStore","$appModel","$offeringsModel","initialParams","limit","offset","useOrgOrderList","organization","$app","token","$offeringsList","result","getList","params","clear","org_slug_name","loadMore","nextOffset"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,kBAAxB;AACA,SAAQC,WAAR,EAAqBC,SAArB,QAAqC,OAArC;AACA,SAAQC,qBAAR,QAAoC,0BAApC;AACA,SAAQC,QAAR,QAAuB,gBAAvB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,eAAR,QAA8B,8BAA9B;AAEA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,KAAK,EAAE,EADW;AAElBC,EAAAA,MAAM,EAAE;AAFU,CAAtB;AAKA,OAAO,SAASC,eAAT,GAA2B;AAC9B,QAAM;AAACC,IAAAA;AAAD,MAAiBX,SAAS,EAAhC;AACA,QAAM;AAACY,IAAAA,IAAI,EAAE;AAACC,MAAAA;AAAD;AAAP,MAAkBT,QAAQ,CAACC,SAAD,CAAhC;AACA,QAAM;AAACS,IAAAA,cAAc,EAAE;AAACC,MAAAA;AAAD;AAAjB,MAA6BX,QAAQ,CAACE,eAAD,CAA3C;AAEA,QAAMU,OAAO,GAAGf,WAAW,CAAEgB,MAAD,IAAY;AACpC,QAAI,CAAC,CAACJ,KAAN,EAAa;AACTV,MAAAA,qBAAqB,CAAC;AAACe,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,aAAa,EAAER,YAA7B;AAA2CM,QAAAA;AAA3C,OAAD,CAArB;AACH;AACJ,GAJ0B,EAIxB,CAACN,YAAD,EAAeE,KAAf,CAJwB,CAA3B;AAMA,QAAMO,QAAQ,GAAGnB,WAAW,CAAC,MAAM;AAC/B,QAAIc,MAAM,CAACM,UAAX,EAAuB;AACnB,YAAMJ,MAAM,GAAG,EACX,GAAGV,aADQ;AAEXE,QAAAA,MAAM,EAAEM,MAAM,CAACM;AAFJ,OAAf;AAIAL,MAAAA,OAAO,CAACC,MAAD,CAAP;AACH;AACJ,GAR2B,EAQzB,CAACD,OAAD,EAAUD,MAAV,CARyB,CAA5B;AAUAb,EAAAA,SAAS,CAAC,MAAM;AACZc,IAAAA,OAAO,CAACT,aAAD,CAAP;AACH,GAFQ,EAEN,CAACS,OAAD,CAFM,CAAT;AAIA,SAAO;AAACI,IAAAA;AAAD,GAAP;AACH","sourcesContent":["import {useParams} from 'react-router-dom'\nimport {useCallback, useEffect} from 'react'\nimport {getOrgOrderCartsMount} from '../../Models/order-model'\nimport {useStore} from 'effector-react'\nimport {$appModel} from '../../Models/app'\nimport {$offeringsModel} from '../../Models/offerings-model'\n\nconst initialParams = {\n    limit: 10,\n    offset: 0\n}\n\nexport function useOrgOrderList() {\n    const {organization} = useParams()\n    const {$app: {token}} = useStore($appModel)\n    const {$offeringsList: {result}} = useStore($offeringsModel)\n    \n    const getList = useCallback((params) => {\n        if (!!token) {\n            getOrgOrderCartsMount({clear: true, org_slug_name: organization, params})\n        }\n    }, [organization, token])\n    \n    const loadMore = useCallback(() => {\n        if (result.nextOffset) {\n            const params = {\n                ...initialParams,\n                offset: result.nextOffset\n            }\n            getList(params)\n        }\n    }, [getList, result])\n    \n    useEffect(() => {\n        getList(initialParams)\n    }, [getList])\n    \n    return {loadMore}\n}"]},"metadata":{},"sourceType":"module"}