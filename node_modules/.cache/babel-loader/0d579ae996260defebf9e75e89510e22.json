{"ast":null,"code":"import React,{useCallback}from'react';import{InfoCard}from'./InfoCard';import{useStore}from'effector-react';import{useGoBack}from'../../Hooks/app';import{$appModel}from'../../Models/app';import{useParams}from'react-router-dom';import{useTranslation}from'react-i18next';import{INFO_MAT}from'../../Constants/app';import{useOrganization}from'../../Hooks/org';import{useCheckout}from'../../Hooks/checkout';import{Button}from'../../UIComponents/Button';import{$orgModel}from'../../Models/org-model';import{$orderModel}from'../../Models/order-model';import{useHandleSurf,useOrgOrderCarts}from'../../Hooks/order';import{RootContent,SkeletonUI}from'../../UIComponents/GlobalStyles';import{CheckoutPageWireframe}from'../../UIComponents/Wireframe/CheckoutPageWireframe';export var Checkout=function Checkout(){var _orgOrderData$organiz,_orgOrderData$organiz2,_orgInfo$organization,_orgOrderData$organiz3,_orgOrderData$organiz4;//Hooks\nvar _useTranslation=useTranslation(),t=_useTranslation.t;var _useParams=useParams(),organization=_useParams.organization;var _useStore=useStore($orderModel),orgOrderData=_useStore.$orgOrderCartList.data;var _useStore2=useStore($orgModel),_useStore2$$organizat=_useStore2.$organizationInfo,orgInfo=_useStore2$$organizat.data,forceLoading=_useStore2$$organizat.forceLoading;var _useStore3=useStore($appModel),$device=_useStore3.$device;//Custom Hooks\nuseOrganization();useOrgOrderCarts();var _useHandleSurf=useHandleSurf(),handleSurf=_useHandleSurf.handleSurf,next=_useHandleSurf.next;var _useCheckout=useCheckout(),comment=_useCheckout.comment,handleSubmit=_useCheckout.handleSubmit,meetDate=_useCheckout.meetDate,activeDay=_useCheckout.activeDay,setComment=_useCheckout.setComment,payment=_useCheckout.payment,setPayment=_useCheckout.setPayment;var _useGoBack=useGoBack({pathname:\"/records/unregistered/\".concat(organization)}),goBack=_useGoBack.goBack;var totalCost=(orgOrderData===null||orgOrderData===void 0?void 0:orgOrderData[organization])&&(orgOrderData===null||orgOrderData===void 0?void 0:(_orgOrderData$organiz=orgOrderData[organization])===null||_orgOrderData$organiz===void 0?void 0:(_orgOrderData$organiz2=_orgOrderData$organiz[0])===null||_orgOrderData$organiz2===void 0?void 0:_orgOrderData$organiz2.total_cost);var nextTo=totalCost===0?handleSubmit:!next?handleSurf:handleSubmit;var generateDisabledButton=useCallback(function(){if(next){return!payment.id;}else{return!meetDate;}},[next,meetDate,payment.id]);return/*#__PURE__*/React.createElement(RootContent,{paddingTop:$device&&$device===INFO_MAT?100:70,height:\"100vh\"},/*#__PURE__*/React.createElement(CheckoutPageWireframe,{goBack:goBack,disabled:generateDisabledButton()&&'disabled',title:!next?t('select_meet_time'):t('payment'),title1:forceLoading===2?(_orgInfo$organization=orgInfo[organization])===null||_orgInfo$organization===void 0?void 0:_orgInfo$organization.name:/*#__PURE__*/React.createElement(SkeletonUI,{variant:\"text\",width:320,height:12}),nextTo:nextTo,title3:!next?t('next_to'):t('checkout'),infoCard:/*#__PURE__*/React.createElement(InfoCard,{payment:payment,setPayment:setPayment,comment:comment,meetDate:meetDate,activeDay:activeDay,onChange:function onChange(value){return setComment(value);}}),link:$device&&$device!==INFO_MAT&&forceLoading===2&&/*#__PURE__*/React.createElement(React.Fragment,null,orgOrderData&&(orgOrderData===null||orgOrderData===void 0?void 0:(_orgOrderData$organiz3=orgOrderData[organization])===null||_orgOrderData$organiz3===void 0?void 0:(_orgOrderData$organiz4=_orgOrderData$organiz3[0])===null||_orgOrderData$organiz4===void 0?void 0:_orgOrderData$organiz4.total_cost)>0?/*#__PURE__*/React.createElement(React.Fragment,null,!next?/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:handleSurf,disabled:!meetDate},t('next_to')):/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:handleSubmit,disabled:!payment.title},t('checkout'))):/*#__PURE__*/React.createElement(Button,{sile:\"l\",variant:\"primary\",disabled:!meetDate,onClick:handleSubmit},t('checkout')))}));};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Views/Checkout/index.jsx"],"names":["React","useCallback","InfoCard","useStore","useGoBack","$appModel","useParams","useTranslation","INFO_MAT","useOrganization","useCheckout","Button","$orgModel","$orderModel","useHandleSurf","useOrgOrderCarts","RootContent","SkeletonUI","CheckoutPageWireframe","Checkout","t","organization","orgOrderData","$orgOrderCartList","data","$organizationInfo","orgInfo","forceLoading","$device","handleSurf","next","comment","handleSubmit","meetDate","activeDay","setComment","payment","setPayment","pathname","goBack","totalCost","total_cost","nextTo","generateDisabledButton","id","name","value","title"],"mappings":"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","sourcesContent":["import React, {useCallback} from 'react'\nimport {InfoCard} from './InfoCard'\nimport {useStore} from 'effector-react'\nimport {useGoBack} from '../../Hooks/app'\nimport {$appModel} from '../../Models/app'\nimport {useParams} from 'react-router-dom'\nimport {useTranslation} from 'react-i18next'\nimport {INFO_MAT} from '../../Constants/app'\nimport {useOrganization} from '../../Hooks/org'\nimport {useCheckout} from '../../Hooks/checkout'\nimport {Button} from '../../UIComponents/Button'\nimport {$orgModel} from '../../Models/org-model'\nimport {$orderModel} from '../../Models/order-model'\nimport {useHandleSurf, useOrgOrderCarts} from '../../Hooks/order'\nimport {RootContent, SkeletonUI} from '../../UIComponents/GlobalStyles'\nimport {CheckoutPageWireframe} from '../../UIComponents/Wireframe/CheckoutPageWireframe'\n\nexport const Checkout = () => {\n    //Hooks\n    const {t} = useTranslation()\n    const {organization} = useParams()\n    const {$orgOrderCartList: {data: orgOrderData}} = useStore($orderModel)\n    const {$organizationInfo: {data: orgInfo, forceLoading}} = useStore($orgModel)\n    const {$device} = useStore($appModel)\n    \n    //Custom Hooks\n    useOrganization()\n    useOrgOrderCarts()\n    const {handleSurf, next} = useHandleSurf()\n    const {comment, handleSubmit, meetDate, activeDay, setComment, payment, setPayment} = useCheckout()\n    const {goBack} = useGoBack({pathname: `/records/unregistered/${organization}`})\n    \n    const totalCost = orgOrderData?.[organization] && orgOrderData?.[organization]?.[0]?.total_cost\n    const nextTo = totalCost === 0 ? handleSubmit : !next ? handleSurf : handleSubmit\n    \n    const generateDisabledButton = useCallback(() => {\n        if (next) {\n            return !payment.id\n        } else {\n            return !meetDate\n        }\n    }, [next, meetDate, payment.id])\n    \n    \n    return (\n        <RootContent\n            paddingTop={$device && $device === INFO_MAT ? 100 : 70}\n            height='100vh'\n        >\n            <CheckoutPageWireframe\n                goBack={goBack}\n                disabled={generateDisabledButton() && 'disabled'}\n                title={!next ? t('select_meet_time') : t('payment')}\n                title1={\n                    forceLoading === 2\n                        ? orgInfo[organization]?.name\n                        : <SkeletonUI variant='text' width={320} height={12}/>\n                }\n                nextTo={nextTo}\n                title3={!next ? t('next_to') : t('checkout')}\n                infoCard={(\n                    <InfoCard\n                        payment={payment}\n                        setPayment={setPayment}\n                        comment={comment}\n                        meetDate={meetDate}\n                        activeDay={activeDay}\n                        onChange={(value) => setComment(value)}\n                    />\n                )}\n                link={\n                    $device && $device !== INFO_MAT && forceLoading === 2 && (\n                        <>\n                            {\n                                orgOrderData && orgOrderData?.[organization]?.[0]?.total_cost > 0\n                                    ? <>\n                                        {\n                                            !next\n                                                ? (\n                                                    <Button\n                                                        variant='primary'\n                                                        onClick={handleSurf}\n                                                        disabled={!meetDate}\n                                                    >\n                                                        {t('next_to')}\n                                                    </Button>\n                                                )\n                                                : (\n                                                    <Button\n                                                        variant='primary'\n                                                        onClick={handleSubmit}\n                                                        disabled={!payment.title}\n                                                    >\n                                                        {t('checkout')}\n                                                    </Button>\n                                                )\n                                        }\n                                    </>\n                                    : (\n                                        <Button\n                                            sile='l'\n                                            variant='primary'\n                                            disabled={!meetDate}\n                                            onClick={handleSubmit}\n                                        >\n                                            {t('checkout')}\n                                        </Button>\n                                    )\n                            }\n                        </>\n                    )\n                }\n            />\n        </RootContent>\n    )\n}"]},"metadata":{},"sourceType":"module"}