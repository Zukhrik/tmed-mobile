{"ast":null,"code":"import _defineProperty from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{combine,createStore}from'effector';import{fetchAllChatList,fetchChatAllGroup,fetchChatAllOrg,fetchChatAllUser,fetchGroupChats,fetchSentMessage,fetchUpdateMessage,fetchUserDetailChat}from'./effects';import{addedMessageFromSocket,addedMessageToListFromSocket,chatForceLoading,chatSocketActionsMount,removeMessageEvent,temporaryMessageMount,updateChatFromSocket,updateCounterFromSocket,userMessageUploadProgress,userSentMessageMount,userUpdateMessageMount}from'./events';import{URL_VALUES}from'../../Constants';import{storeListWithKey}from'../../utils/store-utils';import moment from'moment';var $allChatList=createStore({loading:false,userChats:{},groupChats:{},userChatResult:{},groupChatResult:{},error:false,userChatForceLoading:0,groupChatForCeLoading:0}).on(fetchAllChatList.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchAllChatList.done,function(state,_ref){var error=_ref.error;return _objectSpread(_objectSpread({},state),{},{data:[],error:error,result:{},forceLoading:0});}).on(fetchAllChatList.done,function(state,_ref2){var result=_ref2.result,params=_ref2.params;var userChats=_objectSpread({},state.userChats);var groupChats=_objectSpread({},state.groupChats);var userChatResult={};var groupChatResult={};var userChatForceLoading=0;var groupChatForCeLoading=0;var data=result.data.results;if(params.params.rtype==='user'){for(var i=0;i<data.length;i++){userChats[data[i].receiver.username]=data[i];}userChatForceLoading=2;userChatResult=_objectSpread({nextOffset:params.params.offset+10},result.data);}return _objectSpread(_objectSpread({},state),{},{result:result.data,userChatResult:userChatResult,userChats:userChats,groupChatResult:groupChatResult,groupChats:groupChats,userChatForceLoading:userChatForceLoading,groupChatForCeLoading:groupChatForCeLoading});}).on(addedMessageToListFromSocket,function(state,_ref3){var type=_ref3.type,key=_ref3.key,payload=_ref3.payload;var userChats=_objectSpread({},state.userChats);if(type==='user'){if(state.userChatForceLoading===2){userChats[key]=userChats[key]?_objectSpread(_objectSpread({},userChats[key]),payload):payload;}}return _objectSpread(_objectSpread({},state),{},{userChats:userChats});}).on(updateCounterFromSocket,function(state,_ref4){var type=_ref4.type,key=_ref4.key,payload=_ref4.payload;var userChats=_objectSpread({},state.userChats);if(type==='user'){if(state.userChatForceLoading===2){userChats[key]=userChats[key]?_objectSpread(_objectSpread({},userChats[key]),payload):payload;}}return _objectSpread(_objectSpread({},state),{},{userChats:userChats});}).on(fetchSentMessage.done,function(state,_ref5){var result=_ref5.result,params=_ref5.params;var receiver=params.receiver;var userChats=_objectSpread({},state.userChats);if(state.userChatForceLoading===2&&userChats[receiver]){userChats[receiver]=_objectSpread(_objectSpread({},userChats[receiver]),{},{last_message:_objectSpread(_objectSpread({},userChats[receiver].last_message),{},{text:result.data.text})});}return _objectSpread(_objectSpread({},state),{},{userChats:userChats});}).on(chatForceLoading,function(state,_ref6){var type=_ref6.type;var userChatForceLoading=0;var groupChatForCeLoading=0;if(type===URL_VALUES.ALL_CHATS){userChatForceLoading=1;}if(type===URL_VALUES.GROUP_CHATS){groupChatForCeLoading=1;}return _objectSpread(_objectSpread({},state),{},{userChatForceLoading:userChatForceLoading,groupChatForCeLoading:groupChatForCeLoading});});var $groupChatList=createStore({loading:false,data:[],result:{},error:false,forceLoading:0}).on(fetchGroupChats.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchGroupChats.done,function(state,_ref7){var error=_ref7.error;return _objectSpread(_objectSpread({},state),{},{data:[],error:error,result:{},forceLoading:0});}).on(fetchGroupChats.done,function(state,_ref8){var result=_ref8.result,params=_ref8.params;var data=params.clear?result.data.results:[].concat(_toConsumableArray(state.data),_toConsumableArray(result.data.results));return _objectSpread(_objectSpread({},state),{},{result:result.data,data:data,forceLoading:2});}).on(chatForceLoading,function(state,_ref9){var type=_ref9.type;return _objectSpread(_objectSpread({},state),{},{forceLoading:type===URL_VALUES.GROUP_CHATS?1:0});});var $userMessages=createStore({loading:true,result:{},partner:{},error:false,typing:{},messages:{}}).on(fetchUserDetailChat.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchUserDetailChat.fail,function(state,_ref10){var error=_ref10.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:{},result:{}});}).on(fetchUserDetailChat.done,function(state,_ref11){var response=_ref11.result,params=_ref11.params;var offset=params.params.offset,clear=params.clear,key=params.partner;var result=_objectSpread({},state.result);var partner=_objectSpread({},state.sender);var typing=_objectSpread({},state.typing);var nextOffset=offset+20;result[key]=_objectSpread(_objectSpread({},response.data),{},{nextOffset:nextOffset});partner[key]=response.data.partner;typing[key]=false;var messages=_objectSpread({},state.messages);var tmp=response.data.results.reduce(function(acc,cur){var date=moment(cur.date).format('YYYY-MM-DD');acc[date]=acc[date]?[_objectSpread({},cur)].concat(_toConsumableArray(acc[date])):[_objectSpread({},cur)];return acc;},{});var tmp2={};if(messages[key]){for(var date in messages[key]){if(messages[key].hasOwnProperty(date)){if(tmp[date]){var concated=[].concat(_toConsumableArray(messages[key][date]),_toConsumableArray(tmp[date])).reduce(function(acc,cur){var i=acc.findIndex(function(m){return m.id===cur.id;});if(!~i||!acc[i].checked){acc.push(cur);if(~i){acc.splice(i,1);}}return acc;},[]);tmp2[date]=concated.sort(function(a,b){return new Date(a.date).getTime()-new Date(b.date).getTime();});}}}}messages[key]=clear?tmp:_objectSpread(_objectSpread(_objectSpread({},state.messages[key]),tmp),tmp2);return _objectSpread(_objectSpread({},state),{},{result:result,partner:partner,typing:typing,messages:messages});}).on(addedMessageFromSocket,function(state,_ref12){var key=_ref12.key,payload=_ref12.payload;var result=_objectSpread({},state.result);var messages=_objectSpread({},state.messages);var date=moment(payload.date).format('YYYY-MM-DD');messages[key]=messages[key]?_objectSpread({},messages[key]):{};messages[key][date]=messages[key][date]?[].concat(_toConsumableArray(messages[key][date]),[_objectSpread({},payload)]):[_objectSpread({},payload)];return _objectSpread(_objectSpread({},state),{},{result:result,messages:messages});}).on(userSentMessageMount,function(state,_ref13){var payload=_ref13.payload,partner=_ref13.partner,uuid=_ref13.uuid;var messages=_objectSpread({},state.messages);var date=moment(payload.date).format('YYYY-MM-DD');messages[partner][date]=messages[partner][date]?[].concat(_toConsumableArray(messages[partner][date]),[_objectSpread(_objectSpread({},payload),{},{id:uuid,sent:true,uploadStatus:0,dataSrc:true})]):[_objectSpread(_objectSpread({},payload),{},{sent:true})];return _objectSpread(_objectSpread({},state),{},{messages:messages});}).on(userMessageUploadProgress,function(state,_ref14){var partner=_ref14.partner,payload=_ref14.payload,status=_ref14.status;var messages=_objectSpread({},state.messages);var date=moment(payload.date).format('YYYY-MM-DD');var idx=messages[partner][date].findIndex(function(item){return item.id===payload.id;});var oldItem=_objectSpread(_objectSpread({},messages[partner][date][idx]),{},{uploadStatus:status});messages[partner][date]=[].concat(_toConsumableArray(messages[partner][date].slice(0,idx)),[_objectSpread({},oldItem)],_toConsumableArray(messages[partner][date].slice(idx+1)));return _objectSpread(_objectSpread({},state),{},{messages:messages});}).on(userUpdateMessageMount,function(state,_ref15){var payload=_ref15.payload,partner=_ref15.partner;var messages=_objectSpread({},state.messages);var date=moment(payload.date).format('YYYY-MM-DD');var idx=messages[partner][date].findIndex(function(item){return item.id===payload.id;});var oldItem=_objectSpread(_objectSpread(_objectSpread({},messages[partner][date][idx]),payload),{},{sent:true});messages[partner][date]=[].concat(_toConsumableArray(messages[partner][date].slice(0,idx)),[_objectSpread({},oldItem)],_toConsumableArray(messages[partner][date].slice(idx+1)));return _objectSpread(_objectSpread({},state),{},{messages:messages});}).on(removeMessageEvent,function(state,_ref16){var id=_ref16.id,key=_ref16.key,date=_ref16.date;var messages=_objectSpread({},state.messages);messages[key][date]=messages[key][date].filter(function(item){return item.id!==id;});return _objectSpread(_objectSpread({},state),{},{messages:messages});}).on(fetchSentMessage.done,function(state,_ref17){var response=_ref17.result,params=_ref17.params;var partner=params.partner,uuid=params.uuid;var date=moment(response.data.date).format('YYYY-MM-DD');var result=_objectSpread({},state.result);result[partner]=_objectSpread(_objectSpread({},result),{},{count:result.count+1});var messages=_objectSpread({},state.messages);var data=messages[partner][date];var idx=data.findIndex(function(item){return item.id===uuid;});messages[partner][date]=[].concat(_toConsumableArray(data.slice(0,idx)),[_objectSpread(_objectSpread({},response.data),{},{file:messages[partner][date][idx].file,dataSrc:response.data.file})],_toConsumableArray(data.slice(idx+1)));return _objectSpread(_objectSpread({},state),{},{result:result,messages:messages});}).on(fetchUpdateMessage.done,function(state,_ref18){var response=_ref18.result,params=_ref18.params;var partner=params.partner,id=params.id;var date=moment(response.data.date).format('YYYY-MM-DD');var result=_objectSpread({},state.result);result[partner]=_objectSpread(_objectSpread({},result),{},{count:result.count+1});var messages=_objectSpread({},state.messages);var data=messages[partner][date];var idx=data.findIndex(function(item){return item.id===id;});messages[partner][date]=[].concat(_toConsumableArray(data.slice(0,idx)),[_objectSpread(_objectSpread({},messages[partner][date][idx]),{},{updated:response.data.updated,sent:false})],_toConsumableArray(data.slice(idx+1)));return _objectSpread({},state);}).on(updateChatFromSocket,function(state,_ref19){var id=_ref19.id,username=_ref19.username,action=_ref19.action,typingStatus=_ref19.typing;var data=_objectSpread({},state.data);var typing=_objectSpread({},state.typing);var arr=data[username];if(arr&&arr.length>0&&action==='read'){var idx=arr.findIndex(function(item){return item.id===id;});var item=arr.find(function(item){return item.id===id;});data[username]=[].concat(_toConsumableArray(data[username].slice(0,idx)),[_objectSpread(_objectSpread({},item),{},{is_read:true})],_toConsumableArray(data[username].slice(idx+1)));}if(action==='typing'){typing[username]=typingStatus;}return _objectSpread(_objectSpread({},state),{},{typing:typing,data:data});});var $chatSocketActions=createStore({chatActionSendMessage:function chatActionSendMessage(){return null;}}).on(chatSocketActionsMount,function(state,payload){return _objectSpread(_objectSpread({},state),payload);});var getStatus=function getStatus(status){return status&&status===2?status:1;};var $searchContact=createStore({data:{},result:{},forceLoading:{},error:{}}).on(fetchChatAllUser.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading,forceLoading:_objectSpread(_objectSpread({},state.forceLoading),{},_defineProperty({},URL_VALUES.PEOPLE,getStatus(state.forceLoading[URL_VALUES.PEOPLE])))});}).on(fetchChatAllUser.fail,function(state,_ref20){var error=_ref20.error;return _objectSpread(_objectSpread({},state),{},{error:_objectSpread(_objectSpread({},state.error),{},_defineProperty({},URL_VALUES.PEOPLE,error)),result:_objectSpread(_objectSpread({},state.result),{},_defineProperty({},URL_VALUES.PEOPLE,false))});}).on(fetchChatAllUser.done,function(state,_ref21){var result=_ref21.result,params=_ref21.params;var processed=storeListWithKey(_objectSpread({state:state,response:result.data,key:URL_VALUES.PEOPLE,clear:params.clear},params.params));return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:_objectSpread(_objectSpread({},state.forceLoading),{},_defineProperty({},URL_VALUES.PEOPLE,2)),error:_objectSpread(_objectSpread({},state.error),{},_defineProperty({},URL_VALUES.PEOPLE,false))});}).on(fetchChatAllOrg.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading,forceLoading:_objectSpread(_objectSpread({},state.forceLoading),{},_defineProperty({},URL_VALUES.ORGANIZATION,getStatus(state.forceLoading[URL_VALUES.ORGANIZATION])))});}).on(fetchChatAllOrg.fail,function(state,_ref22){var error=_ref22.error;return _objectSpread(_objectSpread({},state),{},{error:_objectSpread(_objectSpread({},state.error),{},_defineProperty({},URL_VALUES.ORGANIZATION,error)),result:_objectSpread(_objectSpread({},state.result),{},_defineProperty({},URL_VALUES.ORGANIZATION,false))});}).on(fetchChatAllOrg.done,function(state,_ref23){var result=_ref23.result,params=_ref23.params;var processed=storeListWithKey(_objectSpread({state:state,response:result.data,key:URL_VALUES.ORGANIZATION,clear:params.clear},params.params));return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:_objectSpread(_objectSpread({},state.forceLoading),{},_defineProperty({},URL_VALUES.ORGANIZATION,2)),error:_objectSpread(_objectSpread({},state.error),{},_defineProperty({},URL_VALUES.ORGANIZATION,false))});}).on(fetchChatAllGroup.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading,forceLoading:_objectSpread(_objectSpread({},state.forceLoading),{},_defineProperty({},URL_VALUES.GROUP,getStatus(state.forceLoading[URL_VALUES.GROUP])))});}).on(fetchChatAllGroup.fail,function(state,_ref24){var error=_ref24.error;return _objectSpread(_objectSpread({},state),{},{error:_objectSpread(_objectSpread({},state.error),{},_defineProperty({},URL_VALUES.GROUP,error)),result:_objectSpread(_objectSpread({},state.result),{},_defineProperty({},URL_VALUES.GROUP,false))});}).on(fetchChatAllGroup.done,function(state,_ref25){var result=_ref25.result,params=_ref25.params;var processed=storeListWithKey(_objectSpread({state:state,response:result.data,key:URL_VALUES.GROUP,clear:params.clear},params.params));return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:_objectSpread(_objectSpread({},state.forceLoading),{},_defineProperty({},URL_VALUES.GROUP,2)),error:_objectSpread(_objectSpread({},state.error),{},_defineProperty({},URL_VALUES.GROUP,false))});});var $temporaryMessage=createStore(null).on(temporaryMessageMount,function(state,payload){return payload;});// $userMessages.watch(console.log)\nexport var $chatModel=combine({$allChatList:$allChatList,$temporaryMessage:$temporaryMessage,$userMessages:$userMessages,$groupChatList:$groupChatList,$searchContact:$searchContact,$chatSocketActions:$chatSocketActions});","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Models/chat-model/stores.js"],"names":["combine","createStore","fetchAllChatList","fetchChatAllGroup","fetchChatAllOrg","fetchChatAllUser","fetchGroupChats","fetchSentMessage","fetchUpdateMessage","fetchUserDetailChat","addedMessageFromSocket","addedMessageToListFromSocket","chatForceLoading","chatSocketActionsMount","removeMessageEvent","temporaryMessageMount","updateChatFromSocket","updateCounterFromSocket","userMessageUploadProgress","userSentMessageMount","userUpdateMessageMount","URL_VALUES","storeListWithKey","moment","$allChatList","loading","userChats","groupChats","userChatResult","groupChatResult","error","userChatForceLoading","groupChatForCeLoading","on","pending","state","done","data","result","forceLoading","params","results","rtype","i","length","receiver","username","nextOffset","offset","type","key","payload","last_message","text","ALL_CHATS","GROUP_CHATS","$groupChatList","clear","$userMessages","partner","typing","messages","fail","response","sender","tmp","reduce","acc","cur","date","format","tmp2","hasOwnProperty","concated","findIndex","m","id","checked","push","splice","sort","a","b","Date","getTime","uuid","sent","uploadStatus","dataSrc","status","idx","item","oldItem","slice","filter","count","file","updated","action","typingStatus","arr","find","is_read","$chatSocketActions","chatActionSendMessage","getStatus","$searchContact","PEOPLE","processed","ORGANIZATION","GROUP","$temporaryMessage","$chatModel"],"mappings":"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","sourcesContent":["import {combine, createStore} from 'effector'\nimport {\n    fetchAllChatList,\n    fetchChatAllGroup,\n    fetchChatAllOrg,\n    fetchChatAllUser,\n    fetchGroupChats,\n    fetchSentMessage,\n    fetchUpdateMessage,\n    fetchUserDetailChat\n} from './effects'\nimport {\n    addedMessageFromSocket,\n    addedMessageToListFromSocket,\n    chatForceLoading,\n    chatSocketActionsMount,\n    removeMessageEvent,\n    temporaryMessageMount,\n    updateChatFromSocket,\n    updateCounterFromSocket,\n    userMessageUploadProgress,\n    userSentMessageMount,\n    userUpdateMessageMount\n} from './events'\nimport {URL_VALUES} from '../../Constants'\nimport {storeListWithKey} from '../../utils/store-utils'\nimport moment from 'moment'\n\nconst $allChatList = createStore({\n    loading: false,\n    userChats: {},\n    groupChats: {},\n    userChatResult: {},\n    groupChatResult: {},\n    error: false,\n    userChatForceLoading: 0,\n    groupChatForCeLoading: 0\n})\n    .on(fetchAllChatList.pending, (state, loading) => ({...state, loading}))\n    .on(fetchAllChatList.done, (state, {error}) => ({\n        ...state, data: [], error, result: {}, forceLoading: 0\n    }))\n    .on(fetchAllChatList.done, (state, {result, params}) => {\n        const userChats = {...state.userChats}\n        const groupChats = {...state.groupChats}\n        let userChatResult = {}\n        let groupChatResult = {}\n        let userChatForceLoading = 0\n        let groupChatForCeLoading = 0\n\n        const data = result.data.results\n        if (params.params.rtype === 'user') {\n            for (let i = 0; i < data.length; i++) {\n                userChats[data[i].receiver.username] = data[i]\n            }\n            userChatForceLoading = 2\n            userChatResult = {\n                nextOffset: params.params.offset + 10,\n                ...result.data\n            }\n        }\n\n        return {\n            ...state,\n            result: result.data,\n            userChatResult,\n            userChats,\n            groupChatResult,\n            groupChats,\n            userChatForceLoading,\n            groupChatForCeLoading\n        }\n    })\n    .on(addedMessageToListFromSocket, (state, {type, key, payload}) => {\n        const userChats = {...state.userChats}\n\n        if (type === 'user') {\n            if (state.userChatForceLoading === 2) {\n                userChats[key] = userChats[key] ? {...userChats[key], ...payload} : payload\n            }\n        }\n\n        return {\n            ...state,\n            userChats\n        }\n    })\n    .on(updateCounterFromSocket, (state, {type, key, payload}) => {\n        const userChats = {...state.userChats}\n\n        if (type === 'user') {\n            if (state.userChatForceLoading === 2) {\n                userChats[key] = userChats[key] ? {...userChats[key], ...payload} : payload\n            }\n        }\n\n        return {\n            ...state,\n            userChats\n        }\n    })\n    .on(fetchSentMessage.done, (state, {result, params}) => {\n        const {receiver} = params\n        const userChats = {...state.userChats}\n\n        if (state.userChatForceLoading === 2 && userChats[receiver]) {\n            userChats[receiver] = {\n                ...userChats[receiver],\n                last_message: {...userChats[receiver].last_message, text: result.data.text}\n            }\n        }\n\n        return {\n            ...state,\n            userChats\n        }\n    })\n    .on(chatForceLoading, (state, {type}) => {\n        let userChatForceLoading = 0\n        let groupChatForCeLoading = 0\n\n        if (type === URL_VALUES.ALL_CHATS) {\n            userChatForceLoading = 1\n        }\n\n        if (type === URL_VALUES.GROUP_CHATS) {\n            groupChatForCeLoading = 1\n        }\n\n        return {\n            ...state,\n            userChatForceLoading,\n            groupChatForCeLoading\n        }\n    })\n\nconst $groupChatList = createStore({loading: false, data: [], result: {}, error: false, forceLoading: 0})\n    .on(fetchGroupChats.pending, (state, loading) => ({...state, loading}))\n    .on(fetchGroupChats.done, (state, {error}) => ({\n        ...state, data: [], error, result: {}, forceLoading: 0\n    }))\n    .on(fetchGroupChats.done, (state, {result, params}) => {\n        const data = params.clear ? result.data.results : [...state.data, ...result.data.results]\n        return {\n            ...state, result: result.data, data, forceLoading: 2\n        }\n    })\n    .on(chatForceLoading, (state, {type}) => ({\n        ...state, forceLoading: type === URL_VALUES.GROUP_CHATS ? 1 : 0\n    }))\n\nconst $userMessages = createStore({\n    loading: true,\n    result: {},\n    partner: {},\n    error: false,\n    typing: {},\n    messages: {}\n})\n    .on(fetchUserDetailChat.pending, (state, loading) => ({...state, loading}))\n    .on(fetchUserDetailChat.fail, (state, {error}) => ({\n        ...state, error, data: {}, result: {}\n    }))\n    .on(fetchUserDetailChat.done, (state, {result: response, params}) => {\n        const {params: {offset}, clear, partner: key} = params\n        const result = {...state.result}\n        const partner = {...state.sender}\n        const typing = {...state.typing}\n        const nextOffset = offset + 20\n        result[key] = {...response.data, nextOffset}\n        partner[key] = response.data.partner\n        typing[key] = false\n        const messages = {...state.messages}\n\n        const tmp = response.data.results.reduce((acc, cur) => {\n            const date = moment(cur.date).format('YYYY-MM-DD')\n            acc[date] = acc[date] ? [{...cur}, ...acc[date]] : [{...cur}]\n            return acc\n        }, {})\n\n        const tmp2 = {}\n\n        if (messages[key]) {\n            for (let date in messages[key]) {\n                if (messages[key].hasOwnProperty(date)) {\n                    if (tmp[date]) {\n                        const concated = [...messages[key][date], ...tmp[date]].reduce((acc, cur) => {\n                            const i = acc.findIndex(m => m.id === cur.id)\n                            if (!~i || !acc[i].checked) {\n                                acc.push(cur)\n                                if (~i) {\n                                    acc.splice(i, 1)\n                                }\n                            }\n                            return acc\n                        }, [])\n                        tmp2[date] = concated.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())\n                    }\n                }\n            }\n        }\n\n        messages[key] = clear\n            ? tmp\n            : {...state.messages[key], ...tmp, ...tmp2}\n\n        return {\n            ...state,\n            result,\n            partner,\n            typing,\n            messages\n        }\n    })\n    .on(addedMessageFromSocket, (state, {key, payload}) => {\n        const result = {...state.result}\n        const messages = {...state.messages}\n        const date = moment(payload.date).format('YYYY-MM-DD')\n\n        messages[key] = messages[key] ? {...messages[key]} : {}\n        messages[key][date] = messages[key][date] ? [...messages[key][date], {...payload}] : [{...payload}]\n\n        return {\n            ...state,\n            result,\n            messages\n        }\n    })\n    .on(userSentMessageMount, (state, {payload, partner, uuid}) => {\n        const messages = {...state.messages}\n        const date = moment(payload.date).format('YYYY-MM-DD')\n        messages[partner][date] = messages[partner][date]\n            ? [...messages[partner][date], {...payload, id: uuid, sent: true, uploadStatus: 0, dataSrc: true}]\n            : [{...payload, sent: true}]\n\n        return {\n            ...state,\n            messages\n        }\n    })\n    .on(userMessageUploadProgress, (state, {partner, payload, status}) => {\n        const messages = {...state.messages}\n        const date = moment(payload.date).format('YYYY-MM-DD')\n        const idx = messages[partner][date].findIndex(item => item.id === payload.id)\n        const oldItem = {...messages[partner][date][idx], uploadStatus: status}\n        messages[partner][date] = [\n            ...messages[partner][date].slice(0, idx),\n            {...oldItem},\n            ...messages[partner][date].slice(idx + 1)\n        ]\n        return {\n            ...state,\n            messages,\n        }\n    })\n    .on(userUpdateMessageMount, (state, {payload, partner}) => {\n        const messages = {...state.messages}\n        const date = moment(payload.date).format('YYYY-MM-DD')\n        const idx = messages[partner][date].findIndex(item => item.id === payload.id)\n        const oldItem = {...messages[partner][date][idx], ...payload, sent: true}\n        messages[partner][date] = [\n            ...messages[partner][date].slice(0, idx),\n            {...oldItem},\n            ...messages[partner][date].slice(idx + 1)\n        ]\n\n        return {\n            ...state,\n            messages\n        }\n    })\n    .on(removeMessageEvent, (state, {id, key, date}) => {\n        const messages = {...state.messages}\n        messages[key][date] = messages[key][date].filter(item => item.id !== id)\n        return {\n            ...state,\n            messages\n        }\n    })\n    .on(fetchSentMessage.done, (state, {result: response, params}) => {\n        const {partner, uuid} = params\n        const date = moment(response.data.date).format('YYYY-MM-DD')\n        const result = {...state.result}\n        result[partner] = {...result, count: result.count + 1}\n        const messages = {...state.messages}\n        const data = messages[partner][date]\n        const idx = data.findIndex(item => item.id === uuid)\n        messages[partner][date] = [\n            ...data.slice(0, idx),\n            {...response.data, file: messages[partner][date][idx].file, dataSrc: response.data.file},\n            ...data.slice(idx + 1)\n        ]\n        return {\n            ...state,\n            result,\n            messages\n        }\n    })\n    .on(fetchUpdateMessage.done, (state, {result: response, params}) => {\n        const {partner, id} = params\n        const date = moment(response.data.date).format('YYYY-MM-DD')\n        const result = {...state.result}\n        result[partner] = {...result, count: result.count + 1}\n        const messages = {...state.messages}\n        const data = messages[partner][date]\n        const idx = data.findIndex(item => item.id === id)\n        messages[partner][date] = [\n            ...data.slice(0, idx),\n            {...messages[partner][date][idx], updated: response.data.updated, sent: false},\n            ...data.slice(idx + 1)\n        ]\n        return {\n            ...state\n        }\n    })\n    .on(updateChatFromSocket, (state, {id, username, action, typing: typingStatus}) => {\n        const data = {...state.data}\n        const typing = {...state.typing}\n        const arr = data[username]\n\n        if (arr && arr.length > 0 && action === 'read') {\n            const idx = arr.findIndex(item => item.id === id)\n            const item = arr.find(item => item.id === id)\n            data[username] = [...data[username].slice(0, idx), {\n                ...item,\n                is_read: true\n            }, ...data[username].slice(idx + 1)]\n        }\n\n        if (action === 'typing') {\n            typing[username] = typingStatus\n        }\n\n        return {\n            ...state,\n            typing,\n            data\n        }\n    })\n\n\nconst $chatSocketActions = createStore({chatActionSendMessage: () => null})\n    .on(chatSocketActionsMount, (state, payload) => ({\n        ...state, ...payload\n    }))\n\nconst getStatus = (status) => {\n    return status && status === 2 ? status : 1\n}\n\nconst $searchContact = createStore({\n    data: {},\n    result: {},\n    forceLoading: {},\n    error: {}\n})\n    .on(fetchChatAllUser.pending, (state, loading) => {\n        return {\n            ...state,\n            loading,\n            forceLoading: {...state.forceLoading, [URL_VALUES.PEOPLE]: getStatus(state.forceLoading[URL_VALUES.PEOPLE])}\n\n        }\n    })\n    .on(fetchChatAllUser.fail, (state, {error}) => ({\n        ...state,\n        error: {...state.error, [URL_VALUES.PEOPLE]: error},\n        result: {...state.result, [URL_VALUES.PEOPLE]: false},\n    }))\n    .on(fetchChatAllUser.done, (state, {result, params}) => {\n        const processed = storeListWithKey({\n            state,\n            response: result.data,\n            key: URL_VALUES.PEOPLE,\n            clear: params.clear,\n            ...params.params\n        })\n\n        return {\n            ...state,\n            ...processed,\n            forceLoading: {...state.forceLoading, [URL_VALUES.PEOPLE]: 2},\n            error: {...state.error, [URL_VALUES.PEOPLE]: false}\n        }\n    })\n    .on(fetchChatAllOrg.pending, (state, loading) => {\n        return {\n            ...state,\n            loading,\n            forceLoading: {\n                ...state.forceLoading,\n                [URL_VALUES.ORGANIZATION]: getStatus(state.forceLoading[URL_VALUES.ORGANIZATION])\n            }\n        }\n    })\n    .on(fetchChatAllOrg.fail, (state, {error}) => ({\n        ...state,\n        error: {...state.error, [URL_VALUES.ORGANIZATION]: error},\n        result: {...state.result, [URL_VALUES.ORGANIZATION]: false},\n    }))\n    .on(fetchChatAllOrg.done, (state, {result, params}) => {\n        const processed = storeListWithKey({\n            state,\n            response: result.data,\n            key: URL_VALUES.ORGANIZATION,\n            clear: params.clear,\n            ...params.params\n        })\n\n        return {\n            ...state,\n            ...processed,\n            forceLoading: {...state.forceLoading, [URL_VALUES.ORGANIZATION]: 2},\n            error: {...state.error, [URL_VALUES.ORGANIZATION]: false}\n        }\n    })\n    .on(fetchChatAllGroup.pending, (state, loading) => {\n        return {\n            ...state,\n            loading,\n            forceLoading: {\n                ...state.forceLoading,\n                [URL_VALUES.GROUP]: getStatus(state.forceLoading[URL_VALUES.GROUP])\n            }\n        }\n    })\n    .on(fetchChatAllGroup.fail, (state, {error}) => ({\n        ...state,\n        error: {...state.error, [URL_VALUES.GROUP]: error},\n        result: {...state.result, [URL_VALUES.GROUP]: false},\n    }))\n    .on(fetchChatAllGroup.done, (state, {result, params}) => {\n        const processed = storeListWithKey({\n            state,\n            response: result.data,\n            key: URL_VALUES.GROUP,\n            clear: params.clear,\n            ...params.params\n        })\n\n        return {\n            ...state,\n            ...processed,\n            forceLoading: {...state.forceLoading, [URL_VALUES.GROUP]: 2},\n            error: {...state.error, [URL_VALUES.GROUP]: false}\n        }\n    })\n\nconst $temporaryMessage = createStore(null)\n    .on(temporaryMessageMount, (state, payload) => {\n        return payload\n    })\n\n// $userMessages.watch(console.log)\n\nexport const $chatModel = combine({\n    $allChatList,\n    $temporaryMessage,\n    $userMessages,\n    $groupChatList,\n    $searchContact,\n    $chatSocketActions,\n})"]},"metadata":{},"sourceType":"module"}