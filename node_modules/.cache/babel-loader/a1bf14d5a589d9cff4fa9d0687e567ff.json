{"ast":null,"code":"import { useInfiniteQuery } from 'react-query';\nimport orgApi from '../../Service-v2/organization';\nimport { useListQuery } from '../app';\nimport { useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nexport function useQueryOfferingList() {\n  const {\n    query\n  } = useListQuery();\n  const {\n    organization\n  } = useParams();\n  const {\n    isLoading,\n    hasNextPage,\n    fetchNextPage,\n    data\n  } = useInfiniteQuery(['/org/offerings', organization, query], async ({\n    pageParam = 0\n  }) => {\n    let params = {\n      limit: 10,\n      offset: pageParam\n    };\n\n    if (query) {\n      params = { ...params,\n        ...query\n      };\n    }\n\n    const res = await orgApi.getOrgOffering({\n      slug: organization,\n      params\n    });\n    return { ...res.data,\n      nextOffset: pageParam + 10\n    };\n  }, {\n    enabled: !!(organization && query),\n    getNextPageParam: data => {\n      if (data.count > data.nextOffset) {\n        return data === null || data === void 0 ? void 0 : data.nextOffset;\n      } else {\n        return undefined;\n      }\n    }\n  });\n  const list = useMemo(() => {\n    if ((data === null || data === void 0 ? void 0 : data.pages) && (data === null || data === void 0 ? void 0 : data.pages.length) > 0) {\n      const arr = data === null || data === void 0 ? void 0 : data.pages;\n      let tmp = [];\n\n      for (let g of arr) {\n        if (g === null || g === void 0 ? void 0 : g.result) {\n          tmp = [...tmp, ...g.result];\n        }\n      }\n\n      return tmp;\n    }\n\n    return [];\n  }, [data]);\n  const dataLength = useMemo(() => {\n    var _data$pages;\n\n    return (data === null || data === void 0 ? void 0 : data.pages) ? ((_data$pages = data.pages[data.pages.length - 1]) === null || _data$pages === void 0 ? void 0 : _data$pages.nextOffset) || 10 : 10;\n  }, [data]);\n  return {\n    dataLength,\n    list,\n    isLoading,\n    hasNextPage,\n    fetchNextPage\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/src/Hooks/offerings/use-query-offering-list.js"],"names":["useInfiniteQuery","orgApi","useListQuery","useMemo","useParams","useQueryOfferingList","query","organization","isLoading","hasNextPage","fetchNextPage","data","pageParam","params","limit","offset","res","getOrgOffering","slug","nextOffset","enabled","getNextPageParam","count","undefined","list","pages","length","arr","tmp","g","result","dataLength"],"mappings":"AAAA,SAAQA,gBAAR,QAA+B,aAA/B;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,SAAQC,YAAR,QAA2B,QAA3B;AACA,SAAQC,OAAR,QAAsB,OAAtB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AAEA,OAAO,SAASC,oBAAT,GAAgC;AACnC,QAAM;AAACC,IAAAA;AAAD,MAAUJ,YAAY,EAA5B;AACA,QAAM;AAACK,IAAAA;AAAD,MAAiBH,SAAS,EAAhC;AAEA,QAAM;AAACI,IAAAA,SAAD;AAAYC,IAAAA,WAAZ;AAAyBC,IAAAA,aAAzB;AAAwCC,IAAAA;AAAxC,MAAgDX,gBAAgB,CAClE,CAAC,gBAAD,EAAmBO,YAAnB,EAAiCD,KAAjC,CADkE,EAElE,OAAO;AAACM,IAAAA,SAAS,GAAG;AAAb,GAAP,KAA2B;AAEvB,QAAIC,MAAM,GAAG;AACTC,MAAAA,KAAK,EAAE,EADE;AAETC,MAAAA,MAAM,EAAEH;AAFC,KAAb;;AAKA,QAAIN,KAAJ,EAAW;AACPO,MAAAA,MAAM,GAAG,EAAC,GAAGA,MAAJ;AAAY,WAAGP;AAAf,OAAT;AACH;;AACD,UAAMU,GAAG,GAAG,MAAMf,MAAM,CAACgB,cAAP,CAAsB;AAACC,MAAAA,IAAI,EAAEX,YAAP;AAAqBM,MAAAA;AAArB,KAAtB,CAAlB;AACA,WAAO,EAAC,GAAGG,GAAG,CAACL,IAAR;AAAcQ,MAAAA,UAAU,EAAEP,SAAS,GAAG;AAAtC,KAAP;AACH,GAdiE,EAelE;AACIQ,IAAAA,OAAO,EAAE,CAAC,EAAEb,YAAY,IAAID,KAAlB,CADd;AAEIe,IAAAA,gBAAgB,EAAGV,IAAD,IAAU;AACxB,UAAIA,IAAI,CAACW,KAAL,GAAaX,IAAI,CAACQ,UAAtB,EAAkC;AAC9B,eAAOR,IAAP,aAAOA,IAAP,uBAAOA,IAAI,CAAEQ,UAAb;AACH,OAFD,MAEO;AACH,eAAOI,SAAP;AACH;AACJ;AARL,GAfkE,CAAtE;AA2BA,QAAMC,IAAI,GAAGrB,OAAO,CAAC,MAAM;AACvB,QAAI,CAAAQ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEc,KAAN,KAAe,CAAAd,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEc,KAAN,CAAYC,MAAZ,IAAqB,CAAxC,EAA2C;AACvC,YAAMC,GAAG,GAAGhB,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEc,KAAlB;AACA,UAAIG,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,CAAT,IAAcF,GAAd,EAAmB;AACf,YAAIE,CAAJ,aAAIA,CAAJ,uBAAIA,CAAC,CAAEC,MAAP,EAAe;AACXF,UAAAA,GAAG,GAAG,CAAC,GAAGA,GAAJ,EAAS,GAAGC,CAAC,CAACC,MAAd,CAAN;AACH;AACJ;;AACD,aAAOF,GAAP;AACH;;AACD,WAAO,EAAP;AACH,GAZmB,EAYjB,CAACjB,IAAD,CAZiB,CAApB;AAcA,QAAMoB,UAAU,GAAG5B,OAAO,CAAC,MAAM;AAAA;;AAC7B,WAAO,CAAAQ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEc,KAAN,IAAc,gBAAAd,IAAI,CAACc,KAAL,CAAWd,IAAI,CAACc,KAAL,CAAWC,MAAX,GAAoB,CAA/B,6DAAmCP,UAAnC,KAAiD,EAA/D,GAAoE,EAA3E;AACH,GAFyB,EAEvB,CAACR,IAAD,CAFuB,CAA1B;AAIA,SAAO;AAACoB,IAAAA,UAAD;AAAaP,IAAAA,IAAb;AAAmBhB,IAAAA,SAAnB;AAA8BC,IAAAA,WAA9B;AAA2CC,IAAAA;AAA3C,GAAP;AACH","sourcesContent":["import {useInfiniteQuery} from 'react-query'\nimport orgApi from '../../Service-v2/organization'\nimport {useListQuery} from '../app'\nimport {useMemo} from 'react'\nimport {useParams} from 'react-router-dom'\n\nexport function useQueryOfferingList() {\n    const {query} = useListQuery()\n    const {organization} = useParams()\n    \n    const {isLoading, hasNextPage, fetchNextPage, data} = useInfiniteQuery(\n        ['/org/offerings', organization, query],\n        async ({pageParam = 0}) => {\n            \n            let params = {\n                limit: 10,\n                offset: pageParam\n            }\n            \n            if (query) {\n                params = {...params, ...query}\n            }\n            const res = await orgApi.getOrgOffering({slug: organization, params})\n            return {...res.data, nextOffset: pageParam + 10}\n        },\n        {\n            enabled: !!(organization && query),\n            getNextPageParam: (data) => {\n                if (data.count > data.nextOffset) {\n                    return data?.nextOffset\n                } else {\n                    return undefined\n                }\n            }\n        }\n    )\n    \n    const list = useMemo(() => {\n        if (data?.pages && data?.pages.length > 0) {\n            const arr = data?.pages\n            let tmp = []\n            for (let g of arr) {\n                if (g?.result) {\n                    tmp = [...tmp, ...g.result]\n                }\n            }\n            return tmp\n        }\n        return []\n    }, [data])\n    \n    const dataLength = useMemo(() => {\n        return data?.pages ? data.pages[data.pages.length - 1]?.nextOffset || 10 : 10\n    }, [data])\n    \n    return {dataLength, list, isLoading, hasNextPage, fetchNextPage, }\n}"]},"metadata":{},"sourceType":"module"}