{"ast":null,"code":"import moment from 'moment';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useUrlParams } from '../app';\nimport { URL_KEYS } from '../../Constants';\nimport { useStore } from 'effector-react';\nimport { formatter, strHourToInt } from './use-specialist-date';\nimport { getDateTime, getWeekDay } from '../../utils/time-utils';\nimport { $orderModel } from '../../Models/order-model';\nimport order from '../../Service/order';\nimport { useParams } from 'react-router-dom';\nexport function useSpecMeetDate({\n  activeDay\n}) {\n  var _data$organization$, _data$organization$$r;\n\n  const {\n    organization\n  } = useParams();\n  const [activeDate] = useState(new Date());\n  const {\n    $orgOrderCartList: {\n      data\n    }\n  } = useStore($orderModel);\n  const [dateRange, setDateRange] = useState([]);\n  const [meetTimes, setMeetTimes] = useState({});\n  const [hours, setHours] = useState([]);\n  const [procInterval, setProcInterval] = useState(false);\n  const [requestData, setRequestData] = useState({});\n  const operating_modes = organization && data[organization] && ((_data$organization$ = data[organization][0]) === null || _data$organization$ === void 0 ? void 0 : (_data$organization$$r = _data$organization$.responsible) === null || _data$organization$$r === void 0 ? void 0 : _data$organization$$r.operating_mode);\n  const {\n    urlData\n  } = useUrlParams();\n  const specId = urlData[URL_KEYS.SPECIALIST_ID];\n  const generateData = useCallback(data => {\n    const tmp = {};\n\n    for (let i = 0; i < data.length; i++) {\n      const id = new Date(moment(data[i].meet_date).format(formatter)).getTime();\n      const meetTime = moment(data[i].meet_date).format('HH.mm');\n      tmp[id] = {\n        user: data[i].user,\n        meetTime: parseFloat(parseFloat(meetTime).toFixed(1))\n      };\n    }\n\n    return tmp;\n  }, []);\n  const getOrgOrder = useCallback(params => {\n    order.getOrgOrderResponsible(params).then(res => {\n      const data = res.data.results;\n      let orders = generateData(data);\n      setRequestData(orders);\n    });\n  }, [generateData]);\n  const renderMeetRow = useCallback(id => {\n    const strHour = moment(id).format('HH:mm');\n    const hourInt = strHourToInt(strHour);\n    return meetTimes[hourInt] && Object.values(meetTimes[hourInt]).sort((a, b) => a - b);\n  }, [meetTimes]);\n  useEffect(() => {\n    const endDate = moment(activeDate).endOf('month');\n    let start = activeDate.getUTCDate();\n    const end = new Date(endDate).getUTCDate();\n    const tmp = [];\n\n    for (let i = 0; i <= end - start; i++) {\n      const d = moment(activeDate).add(i, 'days');\n      tmp.push(d.format('YYYY-MM-DD'));\n    }\n\n    setDateRange(tmp);\n  }, [activeDate]);\n  useEffect(() => {\n    const day = getWeekDay(new Date());\n\n    if (operating_modes && operating_modes[day]) {\n      const mode = operating_modes[day];\n      const breaks = mode.breaks;\n      const to = mode.to;\n      const interval = mode.proc_interval;\n      const tmp = [];\n      const possibleMeetTime = {};\n      let from = parseInt(mode.from);\n      let a = mode.from;\n      const date = new Date(activeDay);\n\n      if (interval !== 0) {\n        while (a < to) {\n          for (let i = 0; i < breaks.length; i++) {\n            if (parseInt(a) === parseInt(breaks[i].from) && (breaks[i].from >= a || a < breaks[i].to)) {\n              a = breaks[i].to;\n            }\n          }\n\n          possibleMeetTime[parseInt(a)] = possibleMeetTime[parseInt(a)] ? { ...possibleMeetTime[parseInt(a)]\n          } : {};\n          const strHour = moment(new Date(new Date(getDateTime(a)).setMinutes(new Date(getDateTime(a === from ? mode.from : a)).getMinutes() + interval)));\n          const id = moment(new Date(`${date.toDateString()} ${moment(getDateTime(a)).format('HH:mm')}`)).format(formatter);\n          possibleMeetTime[parseInt(a)][id] = {\n            intDate: a,\n            strDate: `${moment(getDateTime(a)).format('HH:mm')} - ${strHour.format('HH:mm')}`,\n            dateTime: new Date(new Date(`${date.toDateString()} ${moment(getDateTime(a)).format('HH:mm')}`)).getTime()\n          };\n          a = parseFloat(strHour.format('HH.mm'));\n        }\n\n        setMeetTimes(possibleMeetTime);\n\n        for (let i = from; i < to; i++) {\n          const id = new Date(new Date(`${date.toDateString()} 0${i}:59`)).getTime();\n\n          if (i < 10) {\n            tmp.push({\n              hour: `0${i}:00`,\n              interval,\n              id\n            });\n          } else {\n            tmp.push({\n              hour: `${i}:00`,\n              interval,\n              id\n            });\n          }\n        }\n\n        setHours(tmp);\n      } else {\n        setProcInterval(true);\n      }\n    }\n  }, [operating_modes, activeDay]);\n  useEffect(() => {\n    if (specId && activeDay) {\n      const data = {\n        responsible_id: specId,\n        params: {\n          status: '0,1,2',\n          limit: 200,\n          offset: 0,\n          meet_date__gt: moment(new Date(`${new Date(activeDay).toDateString()} 00:00`)).format(formatter),\n          meet_date__lt: moment(new Date(`${new Date(activeDay).toDateString()} 23:59`)).format(formatter)\n        }\n      };\n      getOrgOrder(data);\n    }\n  }, [specId, getOrgOrder, activeDay]);\n  return {\n    dateRange,\n    activeDate,\n    hours,\n    renderMeetRow,\n    requestData\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/checkout/use-spec-meet-date.js"],"names":["moment","useCallback","useEffect","useState","useUrlParams","URL_KEYS","useStore","formatter","strHourToInt","getDateTime","getWeekDay","$orderModel","order","useParams","useSpecMeetDate","activeDay","organization","activeDate","Date","$orgOrderCartList","data","dateRange","setDateRange","meetTimes","setMeetTimes","hours","setHours","procInterval","setProcInterval","requestData","setRequestData","operating_modes","responsible","operating_mode","urlData","specId","SPECIALIST_ID","generateData","tmp","i","length","id","meet_date","format","getTime","meetTime","user","parseFloat","toFixed","getOrgOrder","params","getOrgOrderResponsible","then","res","results","orders","renderMeetRow","strHour","hourInt","Object","values","sort","a","b","endDate","endOf","start","getUTCDate","end","d","add","push","day","mode","breaks","to","interval","proc_interval","possibleMeetTime","from","parseInt","date","setMinutes","getMinutes","toDateString","intDate","strDate","dateTime","hour","responsible_id","status","limit","offset","meet_date__gt","meet_date__lt"],"mappings":"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","sourcesContent":["import moment from 'moment'\nimport {useCallback, useEffect, useState} from 'react'\nimport {useUrlParams} from '../app'\nimport {URL_KEYS} from '../../Constants'\nimport {useStore} from 'effector-react'\nimport {formatter, strHourToInt} from './use-specialist-date'\nimport {getDateTime, getWeekDay} from '../../utils/time-utils'\nimport {$orderModel} from '../../Models/order-model'\nimport order from '../../Service/order'\nimport {useParams} from 'react-router-dom'\n\nexport function useSpecMeetDate({activeDay}) {\n    const {organization} = useParams()\n    const [activeDate] = useState(new Date())\n    const {$orgOrderCartList: {data}} = useStore($orderModel)\n    const [dateRange, setDateRange] = useState([])\n    const [meetTimes, setMeetTimes] = useState({})\n    const [hours, setHours] = useState([])\n    const [procInterval, setProcInterval] = useState(false)\n    const [requestData, setRequestData] = useState({})\n    const operating_modes = organization && data[organization] && data[organization][0]?.responsible?.operating_mode\n    const {urlData} = useUrlParams()\n    const specId = urlData[URL_KEYS.SPECIALIST_ID]\n    \n    const generateData = useCallback((data) => {\n        const tmp = {}\n        for (let i = 0; i < data.length; i++) {\n            const id = new Date(moment(data[i].meet_date).format(formatter)).getTime()\n            const meetTime = moment(data[i].meet_date).format('HH.mm')\n            tmp[id] = {\n                user: data[i].user,\n                meetTime: parseFloat(parseFloat(meetTime).toFixed(1))\n            }\n        }\n        return tmp\n    }, [])\n    \n    const getOrgOrder = useCallback((params) => {\n        order.getOrgOrderResponsible(params)\n            .then(res => {\n                const data = res.data.results\n                let orders = generateData(data)\n                setRequestData(orders)\n            })\n    }, [generateData])\n    \n    const renderMeetRow = useCallback((id) => {\n        const strHour = moment(id).format('HH:mm')\n        const hourInt = strHourToInt(strHour)\n        return meetTimes[hourInt] && Object.values(meetTimes[hourInt]).sort((a, b) => a - b)\n    }, [meetTimes])\n    \n    useEffect(() => {\n        const endDate = moment(activeDate).endOf('month')\n        let start = activeDate.getUTCDate()\n        const end = new Date(endDate).getUTCDate()\n        const tmp = []\n        for (let i = 0; i <= end - start; i++) {\n            const d = moment(activeDate).add(i, 'days')\n            tmp.push(d.format('YYYY-MM-DD'))\n        }\n        \n        setDateRange(tmp)\n    }, [activeDate])\n    \n    \n    useEffect(() => {\n        const day = getWeekDay(new Date())\n        if (operating_modes && operating_modes[day]) {\n            const mode = operating_modes[day]\n            const breaks = mode.breaks\n            const to = mode.to\n            const interval = mode.proc_interval\n            const tmp = []\n            const possibleMeetTime = {}\n            let from = parseInt(mode.from)\n            let a = mode.from\n            const date = new Date(activeDay)\n            \n            if (interval !== 0) {\n                while (a < to) {\n                    \n                    for (let i = 0; i < breaks.length; i++) {\n                        if (parseInt(a) === parseInt(breaks[i].from) && (breaks[i].from >= a || a < breaks[i].to)) {\n                            a = breaks[i].to\n                        }\n                    }\n                    \n                    possibleMeetTime[parseInt(a)] = possibleMeetTime[parseInt(a)]\n                        ? {...possibleMeetTime[parseInt(a)]}\n                        : {}\n                    \n                    const strHour = moment(new Date(new Date(getDateTime(a))\n                        .setMinutes(new Date(getDateTime(a === from ? mode.from : a)).getMinutes() + interval)))\n                    \n                    const id = moment(new Date(`${date.toDateString()} ${moment(getDateTime(a)).format('HH:mm')}`)).format(formatter)\n                    \n                    possibleMeetTime[parseInt(a)][id] = {\n                        intDate: a,\n                        strDate: `${moment(getDateTime(a)).format('HH:mm')} - ${strHour.format('HH:mm')}`,\n                        dateTime: new Date(new Date(`${date.toDateString()} ${moment(getDateTime(a)).format('HH:mm')}`)).getTime()\n                    }\n                    a = parseFloat(strHour.format('HH.mm'))\n                }\n                setMeetTimes(possibleMeetTime)\n                for (let i = from; i < to; i++) {\n                    const id = new Date(new Date(`${date.toDateString()} 0${i}:59`)).getTime()\n                    if (i < 10) {\n                        tmp.push({hour: `0${i}:00`, interval, id})\n                    } else {\n                        tmp.push({hour: `${i}:00`, interval, id})\n                    }\n                }\n                setHours(tmp)\n            } else {\n                setProcInterval(true)\n            }\n        }\n    }, [operating_modes, activeDay])\n    \n    \n    useEffect(() => {\n        if (specId && activeDay) {\n            const data = {\n                responsible_id: specId,\n                params: {\n                    status: '0,1,2',\n                    limit: 200,\n                    offset: 0,\n                    meet_date__gt: moment(new Date(`${new Date(activeDay).toDateString()} 00:00`)).format(formatter),\n                    meet_date__lt: moment(new Date(`${new Date(activeDay).toDateString()} 23:59`)).format(formatter)\n                }\n            }\n            getOrgOrder(data)\n        }\n    }, [specId, getOrgOrder, activeDay])\n    \n    return {dateRange, activeDate, hours, renderMeetRow, requestData}\n}"]},"metadata":{},"sourceType":"module"}