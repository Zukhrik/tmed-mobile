{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useState}from'react';import{useStore}from'effector-react';import{$appModel,saveURLMount}from'../../Models/app';import{POST_ACTIONS}from'../../Constants';import{useHistory,useParams}from'react-router-dom';import{$accountModel}from'../../Models/account-model';import{tapeLikeMount,tapeRemoveLikesMount}from'../../Models/tape-model';import{useTranslation}from'react-i18next';export function usePostActions(data){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useParams=useParams(),username=_useParams.username;var _useStore=useStore($appModel),token=_useStore.$app.token;var _useHistory=useHistory(),push=_useHistory.push,pathname=_useHistory.location.pathname;var _useStore2=useStore($accountModel),currentProfile=_useStore2.$profiles.currentProfile;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openOverlay=_useState2[0],setOpenOverlay=_useState2[1];var addMethod=useCallback(function(type){if(currentProfile&&!!token){var author=data.author.slug_name;if(data.author.type==='user'){author=\"@\".concat(data.author.slug_name);}var params={post_id:data.id,author:author};if(type===POST_ACTIONS.LIKES_COUNT){tapeLikeMount(params);}}else{setOpenOverlay(true);}},[currentProfile,token,data]);var deleteMethod=useCallback(function(type){if(currentProfile&&!!token){var author=data.author.slug_name;if(data.author.type==='user'){author=\"@\".concat(data.author.slug_name);}var params={post_id:data.id,author:author};if(type===POST_ACTIONS.LIKES_COUNT){tapeRemoveLikesMount(params);}}},[currentProfile,token,data]);var postCommentMethod=useCallback(function(type){if(currentProfile&&!!token){var params={post_id:data.id};if(type===POST_ACTIONS.COMMENTS_COUNT){push(\"/tape/\".concat(params.post_id));}saveURLMount(pathname);}else{setOpenOverlay(true);}},[currentProfile,token,data,push,pathname]);var handleClick=useCallback(function(type){var _data$author;if(type===POST_ACTIONS.LIKES_COUNT){if(data.is_liked){deleteMethod(type);}else{addMethod(type);}}if(type===POST_ACTIONS.COMMENTS_COUNT){postCommentMethod(type);}if(type===POST_ACTIONS.REPOST_COUNT&&(data===null||data===void 0?void 0:(_data$author=data.author)===null||_data$author===void 0?void 0:_data$author.slug_name)!==(currentProfile===null||currentProfile===void 0?void 0:currentProfile.slug_name)&&!!token){push(\"/repost/\".concat(data.id))&&saveURLMount(pathname);}else{setOpenOverlay(true);}},[addMethod,data,deleteMethod,postCommentMethod,push,currentProfile,token,pathname]);var getStyle=function getStyle(item){currentProfile&&(currentProfile.slug_name=username&&item.title==='reply'&&{display:'none'});};var generatePostIndicators=function generatePostIndicators(item){switch(item.title){case'like':return\"\".concat(data.likes_count>0?data.likes_count:'',\" \").concat(t('likes'));case'comment':return\"\".concat(data.comments_count>0?data.comments_count:'',\" \").concat(t('comments'));case'share':return\"\".concat(data.repost_count>0?data.repost_count:'',\" \").concat(t('shares'));default:return'';}};return{handleClick:handleClick,getStyle:getStyle,generatePostIndicators:generatePostIndicators,setOpenOverlay:setOpenOverlay,openOverlay:openOverlay};}","map":null,"metadata":{},"sourceType":"module"}