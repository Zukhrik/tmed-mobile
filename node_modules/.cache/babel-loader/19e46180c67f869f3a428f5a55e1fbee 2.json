{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useStore}from'effector-react';import{useParams}from'react-router-dom';import{OfferingListWrapper}from'../style';import{$appModel,switchOrgGroupPanel}from'../../../Models/app';import{INFO_MAT}from'../../../Constants/app';import{NoOfferingSvg}from'../../../Icons/NoOffering';import{numberFormat}from'../../../utils/number-utils';import{useOfferingList}from'../../../Hooks/offerings';import{AuthModal}from'../../../UIComponents/AuthModal';import{OverlaySettings}from'../../../Components/Overlay';import InfiniteScroll from'react-infinite-scroll-component';import{OverlayAuth}from'../../../UIComponents/OverlayAuth';import{generateSkeleton}from'../../../utils/skeleton-utils';import{$offeringsModel}from'../../../Models/offerings-model';import{useOrgOrder,useOrgOrderList}from'../../../Hooks/order';import Masorny,{ResponsiveMasonry}from'react-responsive-masonry';import{EmptyContainerWrapper}from'../../../UIComponents/GlobalStyles';import{ProductCard,ProductCardSkeleton}from'../../../Components/Cards';import{OverlayOfferingGroup}from'../../../Components/Offering/OrgOfferings';var skeleton=generateSkeleton(10,100,220);export var OfferingsList=function OfferingsList(){useOrgOrderList();var _useParams=useParams(),organization=_useParams.organization;var _useStore=useStore($appModel),_useStore$$app=_useStore.$app,token=_useStore$$app.token,changeOrgGroupPanel=_useStore$$app.changeOrgGroupPanel,$device=_useStore.$device;var _useOfferingList=useOfferingList(),loadMoreOfferings=_useOfferingList.loadMoreOfferings,loadMoreOfferingGroup=_useOfferingList.loadMoreOfferingGroup;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var _useOrgOrder=useOrgOrder(),currency=_useOrgOrder.currency,checkoutOffering=_useOrgOrder.checkoutOffering;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),offeringItem=_useState4[0],setOfferingItem=_useState4[1];var _useStore2=useStore($offeringsModel),_useStore2$$offerings=_useStore2.$offeringsList,data=_useStore2$$offerings.data,result=_useStore2$$offerings.result,loading=_useStore2$$offerings.loading,forceLoading=_useStore2$$offerings.forceLoading;var handleClose=function handleClose(){if(auth){setAuth(false);}setOfferingItem(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:changeOrgGroupPanel,content:/*#__PURE__*/React.createElement(OverlayOfferingGroup,{loadMore:loadMoreOfferingGroup}),onClose:function onClose(){return switchOrgGroupPanel(false);}}),$device&&$device===INFO_MAT?/*#__PURE__*/React.createElement(AuthModal,{modalIsOpen:!!offeringItem,action:function action(){return checkoutOffering(offeringItem);},onCancel:function onCancel(){return setOfferingItem(null);}}):/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:offeringItem,onClose:handleClose,content:/*#__PURE__*/React.createElement(OverlayAuth,{action:function action(){return checkoutOffering(offeringItem);},auth:auth,setAuth:setAuth,onClose:handleClose})}),/*#__PURE__*/React.createElement(InfiniteScroll,{next:loadMoreOfferings,dataLength:(result===null||result===void 0?void 0:result.nextOffset)||20,hasMore:!loading&&!!(result===null||result===void 0?void 0:result.next),loader:/*#__PURE__*/React.createElement(React.Fragment,null,\"...loading\")},/*#__PURE__*/React.createElement(OfferingListWrapper,null,/*#__PURE__*/React.createElement(ResponsiveMasonry,{style:{padding:'0 12px'},columnsCountBreakPoints:{350:2,768:2,900:3}},forceLoading===2?/*#__PURE__*/React.createElement(Masorny,{gutter:\"8px\",style:{marginBottom:60}},data&&data.length>0&&data.map(function(item,idx){var offeringData={id:item.id,qty:item.qty,name:item.name,image:item.image,currency:currency,loading:item.loading,inCart:item.is_in_cart,organization:organization,cost:numberFormat(item.cost),responsible:item.responsible,path:\"/\".concat(organization,\"/offerings/\").concat(item.id)};return/*#__PURE__*/React.createElement(ProductCard,{showBag:true,key:\"\".concat(idx+1),item:offeringData,handleClick:function handleClick(item){token?checkoutOffering(item):setOfferingItem(item);}});})):/*#__PURE__*/React.createElement(Masorny,{gutter:\"12px\"},skeleton.map(function(item,idx){return/*#__PURE__*/React.createElement(ProductCardSkeleton,{key:\"\".concat(idx+1),imgSkeletonHeight:item});}))))),result&&result.count===0&&/*#__PURE__*/React.createElement(EmptyContainerWrapper,null,/*#__PURE__*/React.createElement(NoOfferingSvg,null)));};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Views/OrganizationPage/OfferingsList/index.jsx"],"names":["React","useState","useStore","useParams","OfferingListWrapper","$appModel","switchOrgGroupPanel","INFO_MAT","NoOfferingSvg","numberFormat","useOfferingList","AuthModal","OverlaySettings","InfiniteScroll","OverlayAuth","generateSkeleton","$offeringsModel","useOrgOrder","useOrgOrderList","Masorny","ResponsiveMasonry","EmptyContainerWrapper","ProductCard","ProductCardSkeleton","OverlayOfferingGroup","skeleton","OfferingsList","organization","$app","token","changeOrgGroupPanel","$device","loadMoreOfferings","loadMoreOfferingGroup","auth","setAuth","currency","checkoutOffering","offeringItem","setOfferingItem","$offeringsList","data","result","loading","forceLoading","handleClose","nextOffset","next","padding","marginBottom","length","map","item","idx","offeringData","id","qty","name","image","inCart","is_in_cart","cost","responsible","path","count"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\r\nimport {useStore} from 'effector-react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {OfferingListWrapper} from '../style'\r\nimport {$appModel, switchOrgGroupPanel} from '../../../Models/app'\r\nimport {INFO_MAT} from '../../../Constants/app'\r\nimport {NoOfferingSvg} from '../../../Icons/NoOffering'\r\nimport {numberFormat} from '../../../utils/number-utils'\r\nimport {useOfferingList} from '../../../Hooks/offerings'\r\nimport {AuthModal} from '../../../UIComponents/AuthModal'\r\nimport {OverlaySettings} from '../../../Components/Overlay'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport {OverlayAuth} from '../../../UIComponents/OverlayAuth'\r\nimport {generateSkeleton} from '../../../utils/skeleton-utils'\r\nimport {$offeringsModel} from '../../../Models/offerings-model'\r\nimport {useOrgOrder, useOrgOrderList} from '../../../Hooks/order'\r\nimport Masorny, {ResponsiveMasonry} from 'react-responsive-masonry'\r\nimport {EmptyContainerWrapper} from '../../../UIComponents/GlobalStyles'\r\nimport {ProductCard, ProductCardSkeleton} from '../../../Components/Cards'\r\nimport {OverlayOfferingGroup} from '../../../Components/Offering/OrgOfferings'\r\n\r\nconst skeleton = generateSkeleton(10, 100, 220)\r\nexport const OfferingsList = () => {\r\n    useOrgOrderList()\r\n    const {organization} = useParams()\r\n    const {$app: {token, changeOrgGroupPanel}, $device} = useStore($appModel)\r\n    const {loadMoreOfferings, loadMoreOfferingGroup} = useOfferingList()\r\n    const [auth, setAuth] = useState(false)\r\n    const {currency, checkoutOffering} = useOrgOrder()\r\n    const [offeringItem, setOfferingItem] = useState(false)\r\n    const {$offeringsList: {data, result, loading, forceLoading}} = useStore($offeringsModel)\r\n    \r\n    const handleClose = () => {\r\n        if (auth) {\r\n            setAuth(false)\r\n        }\r\n        setOfferingItem(false)\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <OverlaySettings\r\n                openSettings={changeOrgGroupPanel}\r\n                content={<OverlayOfferingGroup loadMore={loadMoreOfferingGroup}/>}\r\n                onClose={() => switchOrgGroupPanel(false)}\r\n            />\r\n            {\r\n                $device && $device === INFO_MAT\r\n                    ? <AuthModal\r\n                        modalIsOpen={!!offeringItem}\r\n                        action={() => checkoutOffering(offeringItem)}\r\n                        onCancel={() => setOfferingItem(null)}\r\n                    />\r\n                    : <OverlaySettings\r\n                        openSettings={offeringItem}\r\n                        onClose={handleClose}\r\n                        content={<OverlayAuth\r\n                            action={() => checkoutOffering(offeringItem)}\r\n                            auth={auth}\r\n                            setAuth={setAuth}\r\n                            onClose={handleClose}\r\n                        />}\r\n                    />\r\n            }\r\n            <InfiniteScroll\r\n                next={loadMoreOfferings}\r\n                dataLength={result?.nextOffset || 20}\r\n                hasMore={!loading && !!result?.next}\r\n                loader={<>...loading</>}\r\n            >\r\n                <OfferingListWrapper>\r\n                    <ResponsiveMasonry\r\n                        style={{padding: '0 12px'}}\r\n                        columnsCountBreakPoints={{350: 2, 768: 2, 900: 3}}\r\n                    >\r\n                        {\r\n                            forceLoading === 2\r\n                                ? <Masorny gutter='8px' style={{marginBottom: 60}}>\r\n                                    {\r\n                                        data && data.length > 0 && data.map((item, idx) => {\r\n                                            const offeringData = {\r\n                                                id: item.id,\r\n                                                qty: item.qty,\r\n                                                name: item.name,\r\n                                                image: item.image,\r\n                                                currency: currency,\r\n                                                loading: item.loading,\r\n                                                inCart: item.is_in_cart,\r\n                                                organization: organization,\r\n                                                cost: numberFormat(item.cost),\r\n                                                responsible: item.responsible,\r\n                                                path: `/${organization}/offerings/${item.id}`\r\n                                            }\r\n                                            return (\r\n                                                <ProductCard\r\n                                                    showBag\r\n                                                    key={`${idx + 1}`}\r\n                                                    item={offeringData}\r\n                                                    handleClick={(item) => {\r\n                                                        token ? checkoutOffering(item) : setOfferingItem(item)\r\n                                                    }}\r\n                                                />\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </Masorny>\r\n                                : <Masorny gutter='12px'>\r\n                                    {\r\n                                        skeleton.map((item, idx) => (\r\n                                            <ProductCardSkeleton\r\n                                                key={`${idx + 1}`}\r\n                                                imgSkeletonHeight={item}\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Masorny>\r\n                        }\r\n                    </ResponsiveMasonry>\r\n                </OfferingListWrapper>\r\n            </InfiniteScroll>\r\n            {\r\n                result && result.count === 0 && (\r\n                    <EmptyContainerWrapper>\r\n                        <NoOfferingSvg/>\r\n                    </EmptyContainerWrapper>\r\n                )\r\n            }\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}