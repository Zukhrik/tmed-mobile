{"ast":null,"code":"import { useStore } from 'effector-react';\nimport { useParams } from 'react-router-dom';\nimport { useCallback, useEffect } from 'react';\nimport { $tapeModel, authorTapeMount, resetAuthorTape } from '../../Models/tape-model';\nconst initialParams = {\n  limit: 10,\n  offset: 0\n};\nexport function useAuthorTape() {\n  const {\n    username,\n    organization\n  } = useParams();\n  const {\n    $authorTape: {\n      result\n    }\n  } = useStore($tapeModel);\n  const getList = useCallback(params => {\n    const data = {\n      author: username ? `@${username}` : organization,\n      ...params\n    };\n    authorTapeMount(data);\n  }, [username, organization]);\n  const loadMore = useCallback(() => {\n    if (result.nextOffset) {\n      const data = {\n        params: { ...initialParams,\n          offset: result.nextOffset\n        }\n      };\n      getList(data);\n    }\n  }, [result.nextOffset, getList]);\n  useEffect(() => {\n    const data = {\n      params: initialParams,\n      clear: true\n    };\n    getList(data);\n    return () => {\n      resetAuthorTape();\n    };\n  }, [getList]);\n  return {\n    loadMore\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/tape/use-author-tape.js"],"names":["useStore","useParams","useCallback","useEffect","$tapeModel","authorTapeMount","resetAuthorTape","initialParams","limit","offset","useAuthorTape","username","organization","$authorTape","result","getList","params","data","author","loadMore","nextOffset","clear"],"mappings":"AAAA,SAAQA,QAAR,QAAuB,gBAAvB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,WAAR,EAAqBC,SAArB,QAAqC,OAArC;AACA,SAAQC,UAAR,EAAoBC,eAApB,EAAqCC,eAArC,QAA2D,yBAA3D;AAEA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,KAAK,EAAE,EADW;AAElBC,EAAAA,MAAM,EAAE;AAFU,CAAtB;AAKA,OAAO,SAASC,aAAT,GAAyB;AAC5B,QAAM;AAACC,IAAAA,QAAD;AAAWC,IAAAA;AAAX,MAA2BX,SAAS,EAA1C;AACA,QAAM;AAACY,IAAAA,WAAW,EAAE;AAACC,MAAAA;AAAD;AAAd,MAA0Bd,QAAQ,CAACI,UAAD,CAAxC;AAEA,QAAMW,OAAO,GAAGb,WAAW,CAAEc,MAAD,IAAY;AACpC,UAAMC,IAAI,GAAG;AACTC,MAAAA,MAAM,EAAEP,QAAQ,GAAI,IAAGA,QAAS,EAAhB,GAAoBC,YAD3B;AAET,SAAGI;AAFM,KAAb;AAIAX,IAAAA,eAAe,CAACY,IAAD,CAAf;AACH,GAN0B,EAMxB,CAACN,QAAD,EAAWC,YAAX,CANwB,CAA3B;AAQA,QAAMO,QAAQ,GAAGjB,WAAW,CAAC,MAAM;AAC/B,QAAIY,MAAM,CAACM,UAAX,EAAuB;AACnB,YAAMH,IAAI,GAAG;AACTD,QAAAA,MAAM,EAAE,EACJ,GAAGT,aADC;AAEJE,UAAAA,MAAM,EAAEK,MAAM,CAACM;AAFX;AADC,OAAb;AAMAL,MAAAA,OAAO,CAACE,IAAD,CAAP;AACH;AACJ,GAV2B,EAUzB,CAACH,MAAM,CAACM,UAAR,EAAoBL,OAApB,CAVyB,CAA5B;AAYAZ,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMc,IAAI,GAAG;AACTD,MAAAA,MAAM,EAAET,aADC;AAETc,MAAAA,KAAK,EAAE;AAFE,KAAb;AAIAN,IAAAA,OAAO,CAACE,IAAD,CAAP;AAEA,WAAO,MAAM;AACTX,MAAAA,eAAe;AAClB,KAFD;AAGH,GAVQ,EAUN,CAACS,OAAD,CAVM,CAAT;AAYA,SAAO;AACHI,IAAAA;AADG,GAAP;AAGH","sourcesContent":["import {useStore} from 'effector-react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {useCallback, useEffect} from 'react'\r\nimport {$tapeModel, authorTapeMount, resetAuthorTape} from '../../Models/tape-model'\r\n\r\nconst initialParams = {\r\n    limit: 10,\r\n    offset: 0\r\n}\r\n\r\nexport function useAuthorTape() {\r\n    const {username, organization} = useParams()\r\n    const {$authorTape: {result}} = useStore($tapeModel)\r\n    \r\n    const getList = useCallback((params) => {\r\n        const data = {\r\n            author: username ? `@${username}` : organization,\r\n            ...params\r\n        }\r\n        authorTapeMount(data)\r\n    }, [username, organization])\r\n    \r\n    const loadMore = useCallback(() => {\r\n        if (result.nextOffset) {\r\n            const data = {\r\n                params: {\r\n                    ...initialParams,\r\n                    offset: result.nextOffset\r\n                }\r\n            }\r\n            getList(data)\r\n        }\r\n    }, [result.nextOffset, getList])\r\n    \r\n    useEffect(() => {\r\n        const data = {\r\n            params: initialParams,\r\n            clear: true\r\n        }\r\n        getList(data)\r\n        \r\n        return () => {\r\n            resetAuthorTape()\r\n        }\r\n    }, [getList])\r\n    \r\n    return {\r\n        loadMore\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}