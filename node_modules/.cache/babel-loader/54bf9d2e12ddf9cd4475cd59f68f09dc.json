{"ast":null,"code":"import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useStore}from'effector-react';import{useParams}from'react-router-dom';import{OfferingListWrapper}from'../style';import{$appModel,changeSpecPanel,switchOrgGroupPanel}from'../../../Models/app';import{INFO_MAT}from'../../../Constants/app';import{NoOfferingSvg}from'../../../Icons/NoOffering';import{numberFormat}from'../../../utils/number-utils';import{useOfferingList}from'../../../Hooks/offerings';import{AuthModal}from'../../../UIComponents/AuthModal';import{OverlaySettings}from'../../../Components/Overlay';import InfiniteScroll from'react-infinite-scroll-component';import{OverlayAuth}from'../../../UIComponents/OverlayAuth';import{generateSkeleton}from'../../../utils/skeleton-utils';import{$offeringsModel}from'../../../Models/offerings-model';import{useOrgOrder,useOrgOrderList}from'../../../Hooks/order';import Masorny,{ResponsiveMasonry}from'react-responsive-masonry';import{EmptyContainerWrapper}from'../../../UIComponents/GlobalStyles';import{ProductCard,ProductCardSkeleton}from'../../../Components/Cards';import{OverlayOfferingGroup,OverlaySpecialists}from'../../../Components/Offering/OrgOfferings';import{useBodyOverflowHidden}from'../../../Hooks/app';var skeleton=generateSkeleton(10,100,220);export var OfferingsList=function OfferingsList(){useOrgOrderList();var _useParams=useParams(),organization=_useParams.organization;var _useStore=useStore($appModel),_useStore$$app=_useStore.$app,token=_useStore$$app.token,changeOrgGroupPanel=_useStore$$app.changeOrgGroupPanel,showSpecPanel=_useStore$$app.showSpecPanel,$device=_useStore.$device;useBodyOverflowHidden(changeOrgGroupPanel||showSpecPanel);var _useOfferingList=useOfferingList(),loadMoreOfferings=_useOfferingList.loadMoreOfferings,loadMoreOfferingGroup=_useOfferingList.loadMoreOfferingGroup;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var _useOrgOrder=useOrgOrder(),currency=_useOrgOrder.currency,checkoutOffering=_useOrgOrder.checkoutOffering;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),offeringItem=_useState4[0],setOfferingItem=_useState4[1];var _useStore2=useStore($offeringsModel),_useStore2$$offerings=_useStore2.$offeringsList,data=_useStore2$$offerings.data,result=_useStore2$$offerings.result,loading=_useStore2$$offerings.loading,forceLoading=_useStore2$$offerings.forceLoading;var handleClose=function handleClose(){if(auth){setAuth(false);}setOfferingItem(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:changeOrgGroupPanel,content:/*#__PURE__*/React.createElement(OverlayOfferingGroup,{loadMore:loadMoreOfferingGroup}),onClose:function onClose(){return switchOrgGroupPanel(false);}}),/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:showSpecPanel,onClose:function onClose(){return changeSpecPanel(false);},content:/*#__PURE__*/React.createElement(OverlaySpecialists,null)}),$device&&$device===INFO_MAT?/*#__PURE__*/React.createElement(AuthModal,{modalIsOpen:!!offeringItem,action:function action(){return checkoutOffering(offeringItem);},onCancel:function onCancel(){return setOfferingItem(null);}}):/*#__PURE__*/React.createElement(OverlaySettings,{openSettings:offeringItem,onClose:handleClose,content:/*#__PURE__*/React.createElement(OverlayAuth,{action:function action(){return checkoutOffering(offeringItem);},auth:auth,setAuth:setAuth,onClose:handleClose})}),/*#__PURE__*/React.createElement(InfiniteScroll,{next:loadMoreOfferings,dataLength:(result===null||result===void 0?void 0:result.nextOffset)||20,hasMore:!loading&&!!(result===null||result===void 0?void 0:result.next),loader:/*#__PURE__*/React.createElement(React.Fragment,null,\"...loading\")},/*#__PURE__*/React.createElement(OfferingListWrapper,null,/*#__PURE__*/React.createElement(ResponsiveMasonry,{style:{padding:'0 12px'},columnsCountBreakPoints:{350:2,768:2,900:3}},forceLoading===2&&data?/*#__PURE__*/React.createElement(Masorny,{gutter:\"8px\",style:{marginBottom:60}},data.length>0&&data.map(function(item,idx){var offeringData={id:item.id,qty:item.qty,name:item.name,image:item.image,currency:currency,loading:item.loading,inCart:item.is_in_cart,organization:organization,cost:numberFormat(item.cost),responsible:item.responsible,path:\"/\".concat(organization,\"/offerings/\").concat(item.id)};return/*#__PURE__*/React.createElement(ProductCard,{showBag:true,key:\"\".concat(idx+1),item:offeringData,handleClick:function handleClick(item){token?checkoutOffering(item):setOfferingItem(item);}});})):/*#__PURE__*/React.createElement(Masorny,{gutter:\"12px\"},skeleton.map(function(item,idx){return/*#__PURE__*/React.createElement(ProductCardSkeleton,{key:\"\".concat(idx+1),imgSkeletonHeight:item});}))))),result&&result.count===0&&/*#__PURE__*/React.createElement(EmptyContainerWrapper,null,/*#__PURE__*/React.createElement(NoOfferingSvg,null)));};","map":null,"metadata":{},"sourceType":"module"}