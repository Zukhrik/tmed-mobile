{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{combine,createStore}from'effector';import{commonStoreList,storeListWithKey,storeWithKey}from'../../utils/store-utils';import{fetchDeleteOrderCart,fetchOrder,fetchOrderCartList,fetchOrderIdOffers,fetchOrderList,fetchOrderOffersConclusions,fetchOrgOrderCarts,fetchOrgOrderResponsible}from'./effects';import{resetOrderCartList,resetOrderDetail,resetOrderIdOffers,resetOrgOrderCart}from'./events';var $orgOrderCartList=createStore({loading:false,error:false,result:{},data:[],forceLoading:0}).on(fetchOrgOrderCarts.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrgOrderCarts.fail,function(state,_ref){var error=_ref.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{},forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrgOrderCarts.done,function(state,_ref2){var params=_ref2.params,result=_ref2.result;var processed=storeListWithKey({key:params.org_slug_name,response:result.data,state:state,clear:params.clear,limit:params.params.limit});if(params.action&&result.data.results.length===0){params.action();}return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).on(fetchDeleteOrderCart.done,function(state,_ref3){var _dataItem$offering;var params=_ref3.params;var id=params.offering_id;var organization=params.organization;var data=_objectSpread({},state.data);var dataItem=data[organization].find(function(item){var _item$offering;return((_item$offering=item.offering)===null||_item$offering===void 0?void 0:_item$offering.id)===id;});var total_cost=_objectSpread({},state.result).total_cost-(dataItem===null||dataItem===void 0?void 0:(_dataItem$offering=dataItem.offering)===null||_dataItem$offering===void 0?void 0:_dataItem$offering.cost);var count=_objectSpread({},state.result).count-1;data[organization]=data[organization].filter(function(item){return item.offering.id!==id;});if(params.action){console.log(params);params.action();}return _objectSpread(_objectSpread(_objectSpread({},state),{},{data:data},state.result.total_cost=total_cost),state.result.count=count);}).reset(resetOrgOrderCart);var $orderCartList=createStore({loading:false,data:[],forceLoading:0,result:{},error:false}).on(fetchOrderCartList.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderCartList.fail,function(state,_ref4){var error=_ref4.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],forceLoading:state.forceLoading===2?state.forceLoading:1,result:{}});}).on(fetchOrderCartList.done,function(state,_ref5){var result=_ref5.result,params=_ref5.params;var isNoData=(params===null||params===void 0?void 0:params.organization)&&result.data.findIndex(function(item){return item.seller.slug_name===params.organization;})===-1;if((params===null||params===void 0?void 0:params.isRedirect)&&(params===null||params===void 0?void 0:params.action)&&isNoData){params.action();}return _objectSpread(_objectSpread({},state),{},{data:result.data,forceLoading:2,result:result.data});}).reset(resetOrderCartList);var $orgOrderResponsible=createStore({loading:false,data:[],result:{},error:false}).on(fetchOrgOrderResponsible.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrgOrderResponsible.fail,function(state,_ref6){var error=_ref6.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{}});}).on(fetchOrgOrderResponsible.done,function(state,_ref7){var result=_ref7.result,params=_ref7.params;var processed=commonStoreList({response:result.data,state:state,clear:params.clear});return _objectSpread(_objectSpread({},state),processed);});var $orderDetail=createStore({data:{},loading:false,error:false,forceLoading:0}).on(fetchOrder.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrder.fail,function(state,_ref8){var error=_ref8.error;return _objectSpread(_objectSpread({},state),{},{error:error,forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrder.done,function(state,_ref9){var result=_ref9.result,params=_ref9.params;var processed=storeWithKey({response:result.data,state:state,key:params});return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).reset(resetOrderDetail);var $orderList=createStore({data:[],loading:false,result:{},error:false,forceLoading:0}).on(fetchOrderList.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderList.fail,function(state,_ref10){var error=_ref10.error;return _objectSpread(_objectSpread({},state),{},{error:error,forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrderList.done,function(state,_ref11){var result=_ref11.result,params=_ref11.params;var processed=commonStoreList({state:state,clear:params.clear,response:result.data,limit:params.params.limit});return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});});var $orderIdOffers=createStore({loading:false,data:[],result:{},error:false,forceLoading:0}).on(fetchOrderIdOffers.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderIdOffers.fail,function(state,_ref12){var error=_ref12.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{},forceLoading:state.forceLoading===2?state.forceLoading:1});}).on(fetchOrderIdOffers.done,function(state,_ref13){var result=_ref13.result,params=_ref13.params;var processed=commonStoreList(_objectSpread({response:result.data,state:state,clear:params.clear},params.params));return _objectSpread(_objectSpread(_objectSpread({},state),processed),{},{forceLoading:2});}).reset(resetOrderIdOffers);var $orderOffersConclusions=createStore({loading:false,data:[],result:{},error:false}).on(fetchOrderOffersConclusions.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchOrderOffersConclusions.fail,function(state,_ref14){var error=_ref14.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{}});}).on(fetchOrderOffersConclusions.done,function(state,_ref15){var result=_ref15.result,params=_ref15.params;var processed=commonStoreList(_objectSpread({response:result.data,state:state,clear:params.clear},params.params));return _objectSpread(_objectSpread({},state),processed);});export var $orderModel=combine({$orgOrderResponsible:$orgOrderResponsible,$orgOrderCartList:$orgOrderCartList,$orderIdOffers:$orderIdOffers,$orderCartList:$orderCartList,$orderDetail:$orderDetail,$orderList:$orderList,$orderOffersConclusions:$orderOffersConclusions});","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Models/order-model/store.js"],"names":["combine","createStore","commonStoreList","storeListWithKey","storeWithKey","fetchDeleteOrderCart","fetchOrder","fetchOrderCartList","fetchOrderIdOffers","fetchOrderList","fetchOrderOffersConclusions","fetchOrgOrderCarts","fetchOrgOrderResponsible","resetOrderCartList","resetOrderDetail","resetOrderIdOffers","resetOrgOrderCart","$orgOrderCartList","loading","error","result","data","forceLoading","on","pending","state","fail","done","params","processed","key","org_slug_name","response","clear","limit","action","results","length","id","offering_id","organization","dataItem","find","item","offering","total_cost","cost","count","filter","console","log","reset","$orderCartList","isNoData","findIndex","seller","slug_name","isRedirect","$orgOrderResponsible","$orderDetail","$orderList","$orderIdOffers","$orderOffersConclusions","$orderModel"],"mappings":"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","sourcesContent":["import {combine, createStore} from 'effector'\nimport {commonStoreList, storeListWithKey, storeWithKey} from '../../utils/store-utils'\nimport {\n    fetchDeleteOrderCart,\n    fetchOrder,\n    fetchOrderCartList,\n    fetchOrderIdOffers,\n    fetchOrderList,\n    fetchOrderOffersConclusions,\n    fetchOrgOrderCarts,\n    fetchOrgOrderResponsible\n} from './effects'\nimport {resetOrderCartList, resetOrderDetail, resetOrderIdOffers, resetOrgOrderCart} from './events'\n\nconst $orgOrderCartList = createStore({loading: false, error: false, result: {}, data: [], forceLoading: 0})\n    .on(fetchOrgOrderCarts.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrgOrderCarts.fail, (state, {error}) => ({\n        ...state, error, data: [], result: {}, forceLoading: state.forceLoading === 2 ? state.forceLoading : 1\n    }))\n    .on(fetchOrgOrderCarts.done, (state, {params, result}) => {\n        const processed = storeListWithKey({\n            key: params.org_slug_name,\n            response: result.data,\n            state,\n            clear: params.clear,\n            limit: params.params.limit\n        })\n        if (params.action && result.data.results.length === 0) {\n            params.action()\n        }\n        \n        return {...state, ...processed, forceLoading: 2}\n    })\n    .on(fetchDeleteOrderCart.done, (state, {params}) => {\n        const id = params.offering_id\n        const organization = params.organization\n        const data = {...state.data}\n        const dataItem = data[organization].find(item => item.offering?.id === id)\n        \n        const total_cost = {...state.result}.total_cost - dataItem?.offering?.cost\n        const count = {...state.result}.count - 1\n        data[organization] = data[organization].filter(item => item.offering.id !== id)\n        \n        if (params.action) {\n            console.log(params)\n            params.action()\n        }\n        \n        return {\n            ...state, data, ...state.result.total_cost = total_cost, ...state.result.count = count\n        }\n    })\n    .reset(resetOrgOrderCart)\n\n\nconst $orderCartList = createStore({loading: false, data: [], forceLoading: 0, result: {}, error: false})\n    .on(fetchOrderCartList.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrderCartList.fail, (state, {error}) => ({\n        ...state, error, data: [], forceLoading: state.forceLoading === 2 ? state.forceLoading : 1, result: {}\n    }))\n    .on(fetchOrderCartList.done, (state, {result, params}) => {\n        const isNoData = params?.organization &&\n            result.data.findIndex(item => item.seller.slug_name === params.organization) === -1\n        \n        if (params?.isRedirect && params?.action && isNoData) {\n            params.action()\n        }\n        \n        return {...state, data: result.data, forceLoading: 2, result: result.data}\n    })\n    .reset(resetOrderCartList)\n\nconst $orgOrderResponsible = createStore({loading: false, data: [], result: {}, error: false})\n    .on(fetchOrgOrderResponsible.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrgOrderResponsible.fail, (state, {error}) => ({\n        ...state, error, data: [], result: {}\n    }))\n    .on(fetchOrgOrderResponsible.done, (state, {result, params}) => {\n        const processed = commonStoreList({\n            response: result.data, state, clear: params.clear\n        })\n        return {...state, ...processed}\n    })\n\nconst $orderDetail = createStore({data: {}, loading: false, error: false, forceLoading: 0})\n    .on(fetchOrder.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrder.fail, (state, {error}) => ({\n        ...state, error, forceLoading: state.forceLoading === 2 ? state.forceLoading : 1\n    }))\n    .on(fetchOrder.done, (state, {result, params}) => {\n        const processed = storeWithKey({\n            response: result.data,\n            state,\n            key: params\n        })\n        \n        return {...state, ...processed, forceLoading: 2}\n    })\n    .reset(resetOrderDetail)\n\nconst $orderList = createStore({data: [], loading: false, result: {}, error: false, forceLoading: 0})\n    .on(fetchOrderList.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrderList.fail, (state, {error}) => ({\n        ...state, error, forceLoading: state.forceLoading === 2 ? state.forceLoading : 1\n    }))\n    .on(fetchOrderList.done, (state, {result, params}) => {\n        const processed = commonStoreList({\n            state,\n            clear: params.clear,\n            response: result.data,\n            limit: params.params.limit\n        })\n        \n        return {\n            ...state,\n            ...processed,\n            forceLoading: 2\n        }\n    })\n\nconst $orderIdOffers = createStore({loading: false, data: [], result: {}, error: false, forceLoading: 0})\n    .on(fetchOrderIdOffers.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrderIdOffers.fail, (state, {error}) => ({\n        ...state, error, data: [], result: {}, forceLoading: state.forceLoading === 2 ? state.forceLoading : 1\n    }))\n    .on(fetchOrderIdOffers.done, (state, {result, params}) => {\n        const processed = commonStoreList({\n            response: result.data, state, clear: params.clear, ...params.params\n        })\n        return {...state, ...processed, forceLoading: 2}\n    })\n    .reset(resetOrderIdOffers)\n\nconst $orderOffersConclusions = createStore({loading: false, data: [], result: {}, error: false})\n    .on(fetchOrderOffersConclusions.pending, (state, loading) => ({...state, loading}))\n    .on(fetchOrderOffersConclusions.fail, (state, {error}) => ({\n        ...state, error, data: [], result: {}\n    }))\n    .on(fetchOrderOffersConclusions.done, (state, {result, params}) => {\n        const processed = commonStoreList({\n            response: result.data, state, clear: params.clear, ...params.params\n        })\n        return {...state, ...processed}\n    })\n\n\nexport const $orderModel = combine({\n    $orgOrderResponsible,\n    $orgOrderCartList,\n    $orderIdOffers,\n    $orderCartList,\n    $orderDetail,\n    $orderList,\n    $orderOffersConclusions\n})"]},"metadata":{},"sourceType":"module"}