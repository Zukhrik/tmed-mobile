{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useRef}from'react';import{AvatarInnerIconWrapper,AvatarWrapper,StyledUploadAvatar,UploadAvatarWrapper}from'../style';import{IconBox}from'../../GlobalStyles';import{UploadCloudSvg}from'../../../Icons/UploadCloud';import{PersonalFillSvg}from'../../../Icons/PersonalFill';import{CircularProgress}from'@material-ui/core';import{fileToBase64,resizeFile}from'../../../utils/crop-utils';export var UploadAvatar=function UploadAvatar(_ref){var imgUrl=_ref.imgUrl,size=_ref.size,onChange=_ref.onChange,loading=_ref.loading;var inputRef=useRef(null);var handleChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,resizedFile,_imgUrl,params;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];_context.prev=1;_context.next=4;return resizeFile(file,file.type,'file');case 4:resizedFile=_context.sent;_context.next=7;return fileToBase64(resizedFile);case 7:_imgUrl=_context.sent;params={imgUrl:_imgUrl,file:file};onChange(params);_context.next=14;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function handleChange(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(UploadAvatarWrapper,{onClick:function onClick(){return inputRef.current.click();}},/*#__PURE__*/React.createElement(AvatarWrapper,null,/*#__PURE__*/React.createElement(StyledUploadAvatar,{src:imgUrl,size:size||60},!imgUrl&&/*#__PURE__*/React.createElement(React.Fragment,null,loading?/*#__PURE__*/React.createElement(CircularProgress,{size:48}):/*#__PURE__*/React.createElement(PersonalFillSvg,null))),/*#__PURE__*/React.createElement(AvatarInnerIconWrapper,null,/*#__PURE__*/React.createElement(IconBox,null,/*#__PURE__*/React.createElement(UploadCloudSvg,null)))),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange,ref:inputRef,type:\"file\",accept:\"image/png, image/jpeg\",style:{display:'none'}})));};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/UIComponents/Avatar/UploadAvatar/index.jsx"],"names":["React","useRef","AvatarInnerIconWrapper","AvatarWrapper","StyledUploadAvatar","UploadAvatarWrapper","IconBox","UploadCloudSvg","PersonalFillSvg","CircularProgress","fileToBase64","resizeFile","UploadAvatar","imgUrl","size","onChange","loading","inputRef","handleChange","e","file","target","files","type","resizedFile","params","current","click","display"],"mappings":"uUAAA,MAAOA,CAAAA,KAAP,EAAeC,MAAf,KAA4B,OAA5B,CACA,OAAQC,sBAAR,CAAgCC,aAAhC,CAA+CC,kBAA/C,CAAmEC,mBAAnE,KAA8F,UAA9F,CACA,OAAQC,OAAR,KAAsB,oBAAtB,CACA,OAAQC,cAAR,KAA6B,4BAA7B,CACA,OAAQC,eAAR,KAA8B,6BAA9B,CACA,OAAQC,gBAAR,KAA+B,mBAA/B,CACA,OAAQC,YAAR,CAAsBC,UAAtB,KAAuC,2BAAvC,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAuC,IAArCC,CAAAA,MAAqC,MAArCA,MAAqC,CAA7BC,IAA6B,MAA7BA,IAA6B,CAAvBC,QAAuB,MAAvBA,QAAuB,CAAbC,OAAa,MAAbA,OAAa,CAC/D,GAAMC,CAAAA,QAAQ,CAAGhB,MAAM,CAAC,IAAD,CAAvB,CACA,GAAMiB,CAAAA,YAAY,2FAAG,iBAAOC,CAAP,sJACXC,IADW,CACJD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CADI,uCAGaX,CAAAA,UAAU,CAACS,IAAD,CAAOA,IAAI,CAACG,IAAZ,CAAkB,MAAlB,CAHvB,QAGPC,WAHO,qCAIQd,CAAAA,YAAY,CAACc,WAAD,CAJpB,QAIPX,OAJO,eAKPY,MALO,CAKE,CACXZ,MAAM,CAANA,OADW,CAEXO,IAAI,CAAJA,IAFW,CALF,CASbL,QAAQ,CAACU,MAAD,CAAR,CATa,sJAAH,kBAAZP,CAAAA,YAAY,6CAAlB,CAaA,mBACI,qDACI,oBAAC,mBAAD,EAAqB,OAAO,CAAE,yBAAMD,CAAAA,QAAQ,CAACS,OAAT,CAAiBC,KAAjB,EAAN,EAA9B,eACI,oBAAC,aAAD,mBACI,oBAAC,kBAAD,EACI,GAAG,CAAEd,MADT,CAEI,IAAI,CAAEC,IAAI,EAAI,EAFlB,EAKQ,CAACD,MAAD,eACI,wCAEQG,OAAO,cACD,oBAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,EADC,cAED,oBAAC,eAAD,MAJd,CANZ,CADJ,cAiBI,oBAAC,sBAAD,mBACI,oBAAC,OAAD,mBACI,oBAAC,cAAD,MADJ,CADJ,CAjBJ,CADJ,cAwBI,6BACI,QAAQ,CAAEE,YADd,CAEI,GAAG,CAAED,QAFT,CAGI,IAAI,CAAC,MAHT,CAII,MAAM,CAAC,uBAJX,CAKI,KAAK,CAAE,CAACW,OAAO,CAAE,MAAV,CALX,EAxBJ,CADJ,CADJ,CAoCH,CAnDM","sourcesContent":["import React, {useRef} from 'react'\r\nimport {AvatarInnerIconWrapper, AvatarWrapper, StyledUploadAvatar, UploadAvatarWrapper,} from '../style'\r\nimport {IconBox} from '../../GlobalStyles'\r\nimport {UploadCloudSvg} from '../../../Icons/UploadCloud'\r\nimport {PersonalFillSvg} from '../../../Icons/PersonalFill'\r\nimport {CircularProgress} from '@material-ui/core'\r\nimport {fileToBase64, resizeFile} from '../../../utils/crop-utils'\r\n\r\nexport const UploadAvatar = ({imgUrl, size, onChange, loading}) => {\r\n    const inputRef = useRef(null)\r\n    const handleChange = async (e) => {\r\n        const file = e.target.files[0]\r\n        try {\r\n            const resizedFile = await resizeFile(file, file.type, 'file')\r\n            const imgUrl = await fileToBase64(resizedFile)\r\n            const params = {\r\n                imgUrl,\r\n                file\r\n            }\r\n            onChange(params)\r\n        } catch (e) {\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <UploadAvatarWrapper onClick={() => inputRef.current.click()}>\r\n                <AvatarWrapper>\r\n                    <StyledUploadAvatar\r\n                        src={imgUrl}\r\n                        size={size || 60}\r\n                    >\r\n                        {\r\n                            !imgUrl && (\r\n                                <>\r\n                                    {\r\n                                        loading\r\n                                            ? <CircularProgress size={48}/>\r\n                                            : <PersonalFillSvg/>\r\n                                    }\r\n                                </>\r\n                            )\r\n                        }\r\n                    </StyledUploadAvatar>\r\n                    <AvatarInnerIconWrapper>\r\n                        <IconBox>\r\n                            <UploadCloudSvg/>\r\n                        </IconBox>\r\n                    </AvatarInnerIconWrapper>\r\n                </AvatarWrapper>\r\n                <input\r\n                    onChange={handleChange}\r\n                    ref={inputRef}\r\n                    type='file'\r\n                    accept='image/png, image/jpeg'\r\n                    style={{display: 'none'}}\r\n                />\r\n            </UploadAvatarWrapper>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}