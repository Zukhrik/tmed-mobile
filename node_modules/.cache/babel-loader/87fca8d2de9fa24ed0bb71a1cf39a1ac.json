{"ast":null,"code":"import{useInView}from'react-intersection-observer';import{useEffect}from'react';import{useStore}from'effector-react';import{$chatModel}from'../../Models/chat-model';import{$accountModel}from'../../Models/account-model';export function useChatIsRead(_ref){var item=_ref.item;var _useStore=useStore($chatModel),chatActionSendMessage=_useStore.$chatSocketActions.chatActionSendMessage;var _useStore2=useStore($accountModel),currentProfile=_useStore2.$profiles.currentProfile;var _useInView=useInView({threshold:0.25,delay:300}),ref=_useInView.ref,inView=_useInView.inView,entry=_useInView.entry;useEffect(function(){if(inView&&item&&currentProfile){var target=entry.target;var id=Number(target.getAttribute('data-id'));var message_id=item.id,sender=item.sender,is_read=item.is_read;if(id===message_id&&!is_read&&sender.username!==currentProfile.slug_name){var data={action:'read',message_id:message_id};if(chatActionSendMessage){chatActionSendMessage(JSON.stringify(data));}}}},[entry,inView,item,chatActionSendMessage,currentProfile]);return{ref:ref};}","map":null,"metadata":{},"sourceType":"module"}