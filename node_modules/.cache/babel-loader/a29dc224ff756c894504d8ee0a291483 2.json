{"ast":null,"code":"import _defineProperty from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useState}from'react';import{useUrlParams}from'../app';import order from'../../Service/order';import{URL_KEYS}from'../../Constants';import{useParams}from'react-router-dom';import{useTranslation}from'react-i18next';import{getMeasurement}from'../../utils/get-measurement';import{getOrgOrderCartsMount}from'../../Models/order-model';import{showMessage}from'../../UIComponents/MessageNotification';export function useManageCount(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var _useParams=useParams(),organization=_useParams.organization;var specId=urlData[URL_KEYS.SPECIALIST_ID];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var initialParams={limit:10,offset:0};var handleDecrement=useCallback(function(item){if(item.qty!==item.offering.min_qty){var params={offering_id:item.offering.id,data:{qty:item.qty-item.offering.min_qty}};order.updateOrgOrderCart(params).then(function(res){if(res){var data={clear:true,org_slug_name:organization,params:_objectSpread(_objectSpread({},initialParams),{},{responsible:specId})};getOrgOrderCartsMount(data);}});}},[initialParams,organization,specId]);var handleIncrement=useCallback(function(item){if(item.offering.qty>item.qty||!item.offering.qty){var params={offering_id:item.offering.id,data:{qty:item.qty+item.offering.min_qty}};order.updateOrgOrderCart(params).then(function(res){if(res){var data={clear:true,org_slug_name:organization,params:_objectSpread(_objectSpread({},initialParams),{},{responsible:specId})};getOrgOrderCartsMount(data);}});}},[organization,initialParams,specId]);var handleChange=useCallback(function(value,_ref){var offering=_ref.offering;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},offering.id,value.replace(/\\D/g,''))));},[values]);var handleBlur=useCallback(function(offering,qty){var value=values[offering.id]!==undefined&&values[offering.id]!==''&&Number(values[offering.id]);if(value){if(offering.qty&&value>offering.qty){showMessage(t('in_stock_var',{q:offering.qty,m:t(getMeasurement(offering.measurement,'label'))}),'danger',false);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},offering.id,qty)));return false;}else if(offering.max_qty&&value>offering.max_qty){showMessage(t('max_count_purchases_var',{q:offering.max_qty,m:t(getMeasurement(offering.measurement,'label'))}),'danger',false);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},offering.id,offering.max_qty)));return false;}else if(value>offering.min_qty&&offering.max_qty){showMessage(t('min_count_purchases_var',{q:offering.min_qty,m:t(getMeasurement(offering.measurement,'label'))}),'danger',false);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},offering.id,offering.min_qty)));return false;}}else{showMessage(t('min_count_purchases_var',{q:offering.min_qty,m:t(getMeasurement(offering.measurement,'label'))}),'danger',false);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},offering.id,offering.min_qty)));return false;}},[values,t]);return{handleIncrement:handleIncrement,handleDecrement:handleDecrement,handleChange:handleChange,handleBlur:handleBlur,values:values,setValues:setValues};}","map":null,"metadata":{},"sourceType":"module"}