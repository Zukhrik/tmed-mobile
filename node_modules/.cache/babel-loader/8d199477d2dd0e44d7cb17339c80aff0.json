{"ast":null,"code":"import { useState } from 'react';\nimport { useUrlParams } from '../app';\nimport order from '../../Service/order';\nimport { URL_KEYS } from '../../Constants';\nimport { saveURLMount } from '../../Models/app';\nimport { getOrgOrderCartsMount } from '../../Models/order-model';\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\nimport { useOfferingDetail } from '../offerings';\nexport function useOfferingOrderInOfferPage() {\n  const {\n    push\n  } = useHistory();\n  const {\n    urlData\n  } = useUrlParams();\n  const {\n    pathname\n  } = useLocation();\n  const {\n    organization,\n    offering_id\n  } = useParams();\n  const [openModal, setOpenModal] = useState(false);\n  const {\n    res\n  } = useOfferingDetail(offering_id);\n  const [buttonLoad, setButtonLoad] = useState(false);\n\n  const handleRequest = () => {\n    var _res$data, _res$data$responsible, _res$data2;\n\n    saveURLMount(pathname);\n    const specId = urlData[URL_KEYS.SPECIALIST_ID] ? urlData[URL_KEYS.SPECIALIST_ID] : res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$responsible = _res$data.responsible[0]) === null || _res$data$responsible === void 0 ? void 0 : _res$data$responsible.id;\n    setButtonLoad(true);\n\n    if (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.is_in_cart) {\n      push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${specId}`);\n    } else {\n      const params = {\n        org_slug_name: organization,\n        data: {\n          offering_id,\n          responsible_id: specId\n        }\n      };\n      order.postOrgOrderCart(params).then(response => {\n        getOrgOrderCartsMount();\n\n        if (response) {\n          push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${urlData[URL_KEYS.SPECIALIST_ID]}`);\n        }\n      });\n    }\n  };\n\n  return {\n    handleRequest,\n    openModal,\n    setOpenModal,\n    buttonLoad\n  };\n}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/src/Hooks/order/use-offering-order-in-offer-page.js"],"names":["useState","useUrlParams","order","URL_KEYS","saveURLMount","getOrgOrderCartsMount","useHistory","useLocation","useParams","useOfferingDetail","useOfferingOrderInOfferPage","push","urlData","pathname","organization","offering_id","openModal","setOpenModal","res","buttonLoad","setButtonLoad","handleRequest","specId","SPECIALIST_ID","data","responsible","id","is_in_cart","params","org_slug_name","responsible_id","postOrgOrderCart","then","response"],"mappings":"AAAA,SAAQA,QAAR,QAAuB,OAAvB;AACA,SAAQC,YAAR,QAA2B,QAA3B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,SAAQC,QAAR,QAAuB,iBAAvB;AACA,SAAQC,YAAR,QAA2B,kBAA3B;AACA,SAAQC,qBAAR,QAAoC,0BAApC;AACA,SAAQC,UAAR,EAAoBC,WAApB,EAAiCC,SAAjC,QAAiD,kBAAjD;AACA,SAAQC,iBAAR,QAAgC,cAAhC;AAEA,OAAO,SAASC,2BAAT,GAAuC;AAC1C,QAAM;AAACC,IAAAA;AAAD,MAASL,UAAU,EAAzB;AACA,QAAM;AAACM,IAAAA;AAAD,MAAYX,YAAY,EAA9B;AACA,QAAM;AAACY,IAAAA;AAAD,MAAaN,WAAW,EAA9B;AACA,QAAM;AAACO,IAAAA,YAAD;AAAeC,IAAAA;AAAf,MAA8BP,SAAS,EAA7C;AACA,QAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAACkB,IAAAA;AAAD,MAAQT,iBAAiB,CAACM,WAAD,CAA/B;AACA,QAAM,CAACI,UAAD,EAAaC,aAAb,IAA8BpB,QAAQ,CAAC,KAAD,CAA5C;;AAGA,QAAMqB,aAAa,GAAG,MAAM;AAAA;;AACxBjB,IAAAA,YAAY,CAACS,QAAD,CAAZ;AACA,UAAMS,MAAM,GAAGV,OAAO,CAACT,QAAQ,CAACoB,aAAV,CAAP,GAAkCX,OAAO,CAACT,QAAQ,CAACoB,aAAV,CAAzC,GAAoEL,GAApE,aAAoEA,GAApE,oCAAoEA,GAAG,CAAEM,IAAzE,uEAAoE,UAAWC,WAAX,CAAuB,CAAvB,CAApE,0DAAoE,sBAA2BC,EAA9G;AACAN,IAAAA,aAAa,CAAC,IAAD,CAAb;;AAEA,QAAIF,GAAJ,aAAIA,GAAJ,qCAAIA,GAAG,CAAEM,IAAT,+CAAI,WAAWG,UAAf,EAA2B;AACvBhB,MAAAA,IAAI,CAAE,yBAAwBG,YAAa,IAAGX,QAAQ,CAACoB,aAAc,IAAGD,MAAO,EAA3E,CAAJ;AACH,KAFD,MAEO;AACH,YAAMM,MAAM,GAAG;AACXC,QAAAA,aAAa,EAAEf,YADJ;AAEXU,QAAAA,IAAI,EAAE;AACFT,UAAAA,WADE;AAEFe,UAAAA,cAAc,EAAER;AAFd;AAFK,OAAf;AAOApB,MAAAA,KAAK,CAAC6B,gBAAN,CAAuBH,MAAvB,EACKI,IADL,CACUC,QAAQ,IAAI;AACd5B,QAAAA,qBAAqB;;AACrB,YAAI4B,QAAJ,EAAc;AACVtB,UAAAA,IAAI,CAAE,yBAAwBG,YAAa,IAAGX,QAAQ,CAACoB,aAAc,IAAGX,OAAO,CAACT,QAAQ,CAACoB,aAAV,CAAyB,EAApG,CAAJ;AACH;AACJ,OANL;AAOH;AACJ,GAvBD;;AAyBA,SAAO;AAACF,IAAAA,aAAD;AAAgBL,IAAAA,SAAhB;AAA2BC,IAAAA,YAA3B;AAAyCE,IAAAA;AAAzC,GAAP;AACH","sourcesContent":["import {useState} from 'react'\nimport {useUrlParams} from '../app'\nimport order from '../../Service/order'\nimport {URL_KEYS} from '../../Constants'\nimport {saveURLMount} from '../../Models/app'\nimport {getOrgOrderCartsMount} from '../../Models/order-model'\nimport {useHistory, useLocation, useParams} from 'react-router-dom'\nimport {useOfferingDetail} from '../offerings'\n\nexport function useOfferingOrderInOfferPage() {\n    const {push} = useHistory()\n    const {urlData} = useUrlParams()\n    const {pathname} = useLocation()\n    const {organization, offering_id} = useParams()\n    const [openModal, setOpenModal] = useState(false)\n    const {res} = useOfferingDetail(offering_id)\n    const [buttonLoad, setButtonLoad] = useState(false)\n    \n    \n    const handleRequest = () => {\n        saveURLMount(pathname)\n        const specId = urlData[URL_KEYS.SPECIALIST_ID] ? urlData[URL_KEYS.SPECIALIST_ID] : res?.data?.responsible[0]?.id\n        setButtonLoad(true)\n        \n        if (res?.data?.is_in_cart) {\n            push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${specId}`)\n        } else {\n            const params = {\n                org_slug_name: organization,\n                data: {\n                    offering_id,\n                    responsible_id: specId\n                }\n            }\n            order.postOrgOrderCart(params)\n                .then(response => {\n                    getOrgOrderCartsMount()\n                    if (response) {\n                        push(`/records/unregistered/${organization}?${URL_KEYS.SPECIALIST_ID}=${urlData[URL_KEYS.SPECIALIST_ID]}`)\n                    }\n                })\n        }\n    }\n    \n    return {handleRequest, openModal, setOpenModal, buttonLoad}\n}"]},"metadata":{},"sourceType":"module"}