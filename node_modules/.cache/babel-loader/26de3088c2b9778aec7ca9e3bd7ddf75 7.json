{"ast":null,"code":"import{useCallback}from'react';import{useUrlParams}from'../app';import{useStore}from'effector-react';import order from'../../Service/order';import{useLocation}from'react-router-dom';import{$appModel,saveURLMount}from'../../Models/app';import{$accountModel}from'../../Models/account-model';import{getOrgOrderCartsMount}from'../../Models/order-model';import{changeLoadingStatusOffering,changeOrgOfferingStatus}from'../../Models/offerings-model';export function useOrgOrder(){var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useStore=useStore($appModel),$detectLocationInfo=_useStore.$detectLocationInfo;var _useUrlParams=useUrlParams(),specId=_useUrlParams.urlData.specialist_id;var _useStore2=useStore($accountModel),currentProfile=_useStore2.$profiles.currentProfile;var currency=currentProfile?currentProfile.currency.code:$detectLocationInfo.currency||'';var checkoutOffering=useCallback(function(event){var orgSpecList=event.responsible;if(!event.loading){changeLoadingStatusOffering({id:event.id,status:true});if(!event.inCart){var params={org_slug_name:event.organization,data:{offering_id:event.id,responsible_id:specId?specId:orgSpecList[0].id}};order.postOrgOrderCart(params).then(function(res){if(res){saveURLMount(pathname);changeOrgOfferingStatus({offering_id:params.data.offering_id,status:true,loadingStatus:false});getOrgOrderCartsMount({org_slug_name:event.organization,params:{limit:1,offset:0},clear:true});}}).catch(function(e){console.log(e.response);});}else{order.deleteOrderCart({offering_id:event.id}).then(function(res){if(res){changeOrgOfferingStatus({offering_id:event.id,status:false,loadingStatus:false});getOrgOrderCartsMount({org_slug_name:event.organization,params:{limit:1,offset:0},clear:true});}}).catch(function(e){console.log(e.response);});}}},[specId,pathname]);return{currency:currency,checkoutOffering:checkoutOffering};}","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Hooks/order/use-org-order.js"],"names":["useCallback","useUrlParams","useStore","order","useLocation","$appModel","saveURLMount","$accountModel","getOrgOrderCartsMount","changeLoadingStatusOffering","changeOrgOfferingStatus","useOrgOrder","pathname","$detectLocationInfo","specId","urlData","specialist_id","currentProfile","$profiles","currency","code","checkoutOffering","event","orgSpecList","responsible","loading","id","status","inCart","params","org_slug_name","organization","data","offering_id","responsible_id","postOrgOrderCart","then","res","loadingStatus","limit","offset","clear","catch","e","console","log","response","deleteOrderCart"],"mappings":"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","sourcesContent":["import {useCallback} from 'react'\nimport {useUrlParams} from '../app'\nimport {useStore} from 'effector-react'\nimport order from '../../Service/order'\nimport {useLocation} from 'react-router-dom'\nimport {$appModel, saveURLMount} from '../../Models/app'\nimport {$accountModel} from '../../Models/account-model'\nimport {getOrgOrderCartsMount} from '../../Models/order-model'\nimport {changeLoadingStatusOffering, changeOrgOfferingStatus} from '../../Models/offerings-model'\n\nexport function useOrgOrder() {\n    const {pathname} = useLocation()\n    const {$detectLocationInfo} = useStore($appModel)\n    const {urlData: {specialist_id: specId}} = useUrlParams()\n    const {$profiles: {currentProfile}} = useStore($accountModel)\n    const currency = currentProfile ? currentProfile.currency.code : $detectLocationInfo.currency || ''\n    \n    const checkoutOffering = useCallback((event) => {\n        const orgSpecList = event.responsible\n        \n        if (!event.loading) {\n            changeLoadingStatusOffering({id: event.id, status: true})\n            if (!event.inCart) {\n                const params = {\n                    org_slug_name: event.organization,\n                    data: {\n                        offering_id: event.id,\n                        responsible_id: specId ? specId : orgSpecList[0].id\n                    }\n                }\n                order.postOrgOrderCart(params)\n                    .then((res) => {\n                        if (res) {\n                            saveURLMount(pathname)\n                            changeOrgOfferingStatus({\n                                offering_id: params.data.offering_id,\n                                status: true,\n                                loadingStatus: false\n                            })\n                            getOrgOrderCartsMount({\n                                org_slug_name: event.organization,\n                                params: {limit: 1, offset: 0},\n                                clear: true\n                            })\n                        }\n                    })\n                    .catch((e) => {\n                        console.log(e.response)\n                    })\n            } else {\n                order.deleteOrderCart({offering_id: event.id})\n                    .then((res) => {\n                        if (res) {\n                            changeOrgOfferingStatus({offering_id: event.id, status: false, loadingStatus: false})\n                            getOrgOrderCartsMount({\n                                org_slug_name: event.organization,\n                                params: {limit: 1, offset: 0},\n                                clear: true\n                            })\n                        }\n                    })\n                    .catch((e) => {\n                        console.log(e.response)\n                    })\n            }\n        }\n        \n    }, [specId, pathname])\n    \n    return {\n        currency, checkoutOffering\n    }\n}"]},"metadata":{},"sourceType":"module"}