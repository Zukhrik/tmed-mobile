{"ast":null,"code":"var _jsxFileName = \"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Components/Chat/UserMessages/index.jsx\";\nimport React from 'react';\nimport { MessagesRoot } from '../style';\nimport { MessagesHeader } from '../MessagesHeader';\nimport { useStore } from 'effector-react';\nimport { $chatModel } from '../../../Models/chat-model';\nimport { useChatAction, useChatInput, useUserMessages } from '../../../Hooks/chat';\nimport { useParams } from 'react-router-dom';\nimport { useUserOnline } from '../../../Hooks/user/use-user-online';\nimport { MessagesList } from '../MessagesList';\nimport { MessageInput } from '../MessageInput';\nimport { PopoverUI } from '../../../UIComponents/Popover';\nimport { MessageAction } from '../MessageAction';\nimport { Modal } from '../../../UIComponents/Modal';\nimport { MessageSendFile } from '../MessageSendFile';\nexport const UserMessages = () => {\n  const {\n    partner_slug\n  } = useParams();\n  const {\n    onlineText\n  } = useUserOnline({\n    username: partner_slug\n  });\n  const {\n    $userMessages: {\n      partner,\n      typing,\n      messages\n    },\n    $temporaryMessage: tmpMsg\n  } = useStore($chatModel);\n  const {\n    uploadRef,\n    inputRef,\n    formik,\n    inputWrapperRef,\n    iosHeight,\n    handleFocus,\n    setModalIsOpen,\n    modalIsOpen,\n    handleCancelModal,\n    getTitle,\n    handleGetFile\n  } = useChatInput({\n    partner_slug\n  });\n  const {\n    loadMore\n  } = useUserMessages();\n  const {\n    msgInfo,\n    anchorEl,\n    handleCopy,\n    handleEdit,\n    handleReply,\n    showDelMenu,\n    handleRemove,\n    handleMsgClick,\n    handleClosePopup,\n    handleCancelEditAndReply\n  } = useChatAction({\n    formik,\n    partner_slug,\n    inputRef\n  });\n  const partnerData = partner[partner_slug] || {\n    avatar: undefined,\n    full_name: undefined,\n    is_official: undefined\n  };\n  const actionHeight = tmpMsg ? 48 : 0;\n  const height = inputWrapperRef.current ? inputWrapperRef.current.clientHeight + actionHeight + iosHeight : 60 + iosHeight + actionHeight;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    centered: true,\n    title: getTitle(),\n    modalIsOpen: modalIsOpen,\n    setModalIsOpen: setModalIsOpen,\n    onCancel: handleCancelModal,\n    component: /*#__PURE__*/React.createElement(MessageSendFile, {\n      rType: \"user\",\n      id: partner_slug,\n      formik: formik,\n      onClose: () => setModalIsOpen(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }),\n    width: \"80%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PopoverUI, {\n    anchorEl: anchorEl ? anchorEl.el : null,\n    onClose: handleClosePopup,\n    left: anchorEl && !anchorEl.me,\n    component: /*#__PURE__*/React.createElement(MessageAction, {\n      me: anchorEl && anchorEl.me,\n      showDelMenu: showDelMenu,\n      actions: {\n        handleCopy,\n        handleEdit,\n        handleReply,\n        handleRemove\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 28\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MessagesRoot, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MessagesHeader, {\n    avatar: partnerData.avatar,\n    name: partnerData.full_name,\n    isOfficial: partnerData.is_official,\n    text: typing[partner_slug] || onlineText || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(MessagesList, {\n    loadMore: loadMore,\n    handleMsgClick: handleMsgClick,\n    popupShowed: msgInfo,\n    data: messages[partner_slug] || [],\n    height: height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(MessageInput, {\n    formik: formik,\n    inputRef: inputRef,\n    uploadRef: uploadRef,\n    handleFocus: handleFocus,\n    handleGetFile: handleGetFile,\n    inputWrapperRef: inputWrapperRef,\n    handleCancelEditAndReply: handleCancelEditAndReply,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  })));\n};","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Components/Chat/UserMessages/index.jsx"],"names":["React","MessagesRoot","MessagesHeader","useStore","$chatModel","useChatAction","useChatInput","useUserMessages","useParams","useUserOnline","MessagesList","MessageInput","PopoverUI","MessageAction","Modal","MessageSendFile","UserMessages","partner_slug","onlineText","username","$userMessages","partner","typing","messages","$temporaryMessage","tmpMsg","uploadRef","inputRef","formik","inputWrapperRef","iosHeight","handleFocus","setModalIsOpen","modalIsOpen","handleCancelModal","getTitle","handleGetFile","loadMore","msgInfo","anchorEl","handleCopy","handleEdit","handleReply","showDelMenu","handleRemove","handleMsgClick","handleClosePopup","handleCancelEditAndReply","partnerData","avatar","undefined","full_name","is_official","actionHeight","height","current","clientHeight","el","me"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,YAAR,QAA2B,UAA3B;AACA,SAAQC,cAAR,QAA6B,mBAA7B;AACA,SAAQC,QAAR,QAAuB,gBAAvB;AACA,SAAQC,UAAR,QAAyB,4BAAzB;AACA,SAAQC,aAAR,EAAuBC,YAAvB,EAAqCC,eAArC,QAA2D,qBAA3D;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,aAAR,QAA4B,qCAA5B;AACA,SAAQC,YAAR,QAA2B,iBAA3B;AACA,SAAQC,YAAR,QAA2B,iBAA3B;AACA,SAAQC,SAAR,QAAwB,+BAAxB;AACA,SAAQC,aAAR,QAA4B,kBAA5B;AACA,SAAQC,KAAR,QAAoB,6BAApB;AACA,SAAQC,eAAR,QAA8B,oBAA9B;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAM;AAC9B,QAAM;AAACC,IAAAA;AAAD,MAAiBT,SAAS,EAAhC;AACA,QAAM;AAACU,IAAAA;AAAD,MAAeT,aAAa,CAAC;AAACU,IAAAA,QAAQ,EAAEF;AAAX,GAAD,CAAlC;AACA,QAAM;AAACG,IAAAA,aAAa,EAAE;AAACC,MAAAA,OAAD;AAAUC,MAAAA,MAAV;AAAkBC,MAAAA;AAAlB,KAAhB;AAA6CC,IAAAA,iBAAiB,EAAEC;AAAhE,MAA0EtB,QAAQ,CAACC,UAAD,CAAxF;AACA,QAAM;AACFsB,IAAAA,SADE;AAEFC,IAAAA,QAFE;AAGFC,IAAAA,MAHE;AAIFC,IAAAA,eAJE;AAKFC,IAAAA,SALE;AAMFC,IAAAA,WANE;AAOFC,IAAAA,cAPE;AAQFC,IAAAA,WARE;AASFC,IAAAA,iBATE;AAUFC,IAAAA,QAVE;AAWFC,IAAAA;AAXE,MAYF9B,YAAY,CAAC;AAACW,IAAAA;AAAD,GAAD,CAZhB;AAaA,QAAM;AAACoB,IAAAA;AAAD,MAAa9B,eAAe,EAAlC;AACA,QAAM;AACF+B,IAAAA,OADE;AAEFC,IAAAA,QAFE;AAGFC,IAAAA,UAHE;AAIFC,IAAAA,UAJE;AAKFC,IAAAA,WALE;AAMFC,IAAAA,WANE;AAOFC,IAAAA,YAPE;AAQFC,IAAAA,cARE;AASFC,IAAAA,gBATE;AAUFC,IAAAA;AAVE,MAWF1C,aAAa,CAAC;AAACuB,IAAAA,MAAD;AAASX,IAAAA,YAAT;AAAuBU,IAAAA;AAAvB,GAAD,CAXjB;AAaA,QAAMqB,WAAW,GAAG3B,OAAO,CAACJ,YAAD,CAAP,IAAyB;AACzCgC,IAAAA,MAAM,EAAEC,SADiC;AAEzCC,IAAAA,SAAS,EAAED,SAF8B;AAGzCE,IAAAA,WAAW,EAAEF;AAH4B,GAA7C;AAMA,QAAMG,YAAY,GAAG5B,MAAM,GAAG,EAAH,GAAQ,CAAnC;AACA,QAAM6B,MAAM,GAAGzB,eAAe,CAAC0B,OAAhB,GACT1B,eAAe,CAAC0B,OAAhB,CAAwBC,YAAxB,GAAuCH,YAAvC,GAAsDvB,SAD7C,GAET,KAAKA,SAAL,GAAiBuB,YAFvB;AAIA,sBACI,uDACI,oBAAC,KAAD;AACI,IAAA,QAAQ,MADZ;AAEI,IAAA,KAAK,EAAElB,QAAQ,EAFnB;AAGI,IAAA,WAAW,EAAEF,WAHjB;AAII,IAAA,cAAc,EAAED,cAJpB;AAKI,IAAA,QAAQ,EAAEE,iBALd;AAMI,IAAA,SAAS,eACL,oBAAC,eAAD;AACI,MAAA,KAAK,EAAC,MADV;AAEI,MAAA,EAAE,EAAEjB,YAFR;AAGI,MAAA,MAAM,EAAEW,MAHZ;AAII,MAAA,OAAO,EAAE,MAAMI,cAAc,CAAC,KAAD,CAJjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPR;AAcI,IAAA,KAAK,EAAC,KAdV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAiBI,oBAAC,SAAD;AACI,IAAA,QAAQ,EAAEO,QAAQ,GAAGA,QAAQ,CAACkB,EAAZ,GAAiB,IADvC;AAEI,IAAA,OAAO,EAAEX,gBAFb;AAGI,IAAA,IAAI,EAAEP,QAAQ,IAAI,CAACA,QAAQ,CAACmB,EAHhC;AAII,IAAA,SAAS,eAAE,oBAAC,aAAD;AACP,MAAA,EAAE,EAAEnB,QAAQ,IAAIA,QAAQ,CAACmB,EADlB;AAEP,MAAA,WAAW,EAAEf,WAFN;AAGP,MAAA,OAAO,EAAE;AACLH,QAAAA,UADK;AAELC,QAAAA,UAFK;AAGLC,QAAAA,WAHK;AAILE,QAAAA;AAJK,OAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBJ,eA+BI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,cAAD;AACI,IAAA,MAAM,EAAEI,WAAW,CAACC,MADxB;AAEI,IAAA,IAAI,EAAED,WAAW,CAACG,SAFtB;AAGI,IAAA,UAAU,EAAEH,WAAW,CAACI,WAH5B;AAII,IAAA,IAAI,EAAE9B,MAAM,CAACL,YAAD,CAAN,IAAwBC,UAAxB,IAAsC,EAJhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAOI,oBAAC,YAAD;AACI,IAAA,QAAQ,EAAEmB,QADd;AAEI,IAAA,cAAc,EAAEQ,cAFpB;AAGI,IAAA,WAAW,EAAEP,OAHjB;AAII,IAAA,IAAI,EAAEf,QAAQ,CAACN,YAAD,CAAR,IAA0B,EAJpC;AAKI,IAAA,MAAM,EAAEqC,MALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,eAcI,oBAAC,YAAD;AACI,IAAA,MAAM,EAAE1B,MADZ;AAEI,IAAA,QAAQ,EAAED,QAFd;AAGI,IAAA,SAAS,EAAED,SAHf;AAII,IAAA,WAAW,EAAEK,WAJjB;AAKI,IAAA,aAAa,EAAEK,aALnB;AAMI,IAAA,eAAe,EAAEP,eANrB;AAOI,IAAA,wBAAwB,EAAEkB,wBAP9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdJ,CA/BJ,CADJ;AA0DH,CApGM","sourcesContent":["import React from 'react'\nimport {MessagesRoot} from '../style'\nimport {MessagesHeader} from '../MessagesHeader'\nimport {useStore} from 'effector-react'\nimport {$chatModel} from '../../../Models/chat-model'\nimport {useChatAction, useChatInput, useUserMessages} from '../../../Hooks/chat'\nimport {useParams} from 'react-router-dom'\nimport {useUserOnline} from '../../../Hooks/user/use-user-online'\nimport {MessagesList} from '../MessagesList'\nimport {MessageInput} from '../MessageInput'\nimport {PopoverUI} from '../../../UIComponents/Popover'\nimport {MessageAction} from '../MessageAction'\nimport {Modal} from '../../../UIComponents/Modal'\nimport {MessageSendFile} from '../MessageSendFile'\n\nexport const UserMessages = () => {\n    const {partner_slug} = useParams()\n    const {onlineText} = useUserOnline({username: partner_slug})\n    const {$userMessages: {partner, typing, messages}, $temporaryMessage: tmpMsg} = useStore($chatModel)\n    const {\n        uploadRef,\n        inputRef,\n        formik,\n        inputWrapperRef,\n        iosHeight,\n        handleFocus,\n        setModalIsOpen,\n        modalIsOpen,\n        handleCancelModal,\n        getTitle,\n        handleGetFile\n    } = useChatInput({partner_slug})\n    const {loadMore} = useUserMessages()\n    const {\n        msgInfo,\n        anchorEl,\n        handleCopy,\n        handleEdit,\n        handleReply,\n        showDelMenu,\n        handleRemove,\n        handleMsgClick,\n        handleClosePopup,\n        handleCancelEditAndReply,\n    } = useChatAction({formik, partner_slug, inputRef})\n\n    const partnerData = partner[partner_slug] || {\n        avatar: undefined,\n        full_name: undefined,\n        is_official: undefined\n    }\n\n    const actionHeight = tmpMsg ? 48 : 0\n    const height = inputWrapperRef.current\n        ? inputWrapperRef.current.clientHeight + actionHeight + iosHeight\n        : 60 + iosHeight + actionHeight\n\n    return (\n        <>\n            <Modal\n                centered\n                title={getTitle()}\n                modalIsOpen={modalIsOpen}\n                setModalIsOpen={setModalIsOpen}\n                onCancel={handleCancelModal}\n                component={(\n                    <MessageSendFile\n                        rType='user'\n                        id={partner_slug}\n                        formik={formik}\n                        onClose={() => setModalIsOpen(false)}\n                    />\n                )}\n                width='80%'\n            />\n            <PopoverUI\n                anchorEl={anchorEl ? anchorEl.el : null}\n                onClose={handleClosePopup}\n                left={anchorEl && !anchorEl.me}\n                component={<MessageAction\n                    me={anchorEl && anchorEl.me}\n                    showDelMenu={showDelMenu}\n                    actions={{\n                        handleCopy,\n                        handleEdit,\n                        handleReply,\n                        handleRemove\n                    }}/>}\n            />\n            <MessagesRoot>\n                <MessagesHeader\n                    avatar={partnerData.avatar}\n                    name={partnerData.full_name}\n                    isOfficial={partnerData.is_official}\n                    text={typing[partner_slug] || onlineText || ''}\n                />\n                <MessagesList\n                    loadMore={loadMore}\n                    handleMsgClick={handleMsgClick}\n                    popupShowed={msgInfo}\n                    data={messages[partner_slug] || []}\n                    height={height}\n                />\n                <MessageInput\n                    formik={formik}\n                    inputRef={inputRef}\n                    uploadRef={uploadRef}\n                    handleFocus={handleFocus}\n                    handleGetFile={handleGetFile}\n                    inputWrapperRef={inputWrapperRef}\n                    handleCancelEditAndReply={handleCancelEditAndReply}\n                />\n            </MessagesRoot>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}