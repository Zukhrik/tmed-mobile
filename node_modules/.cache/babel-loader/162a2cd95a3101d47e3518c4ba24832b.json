{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/t-med(mobile)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useUrlParams}from'../app';import{URL_KEYS}from'../../Constants';import{useParams}from'react-router-dom';import{useCallback,useEffect}from'react';import{$offeringsModel,offeringForceLoading,orgOfferGroupListMount,orgOfferingsListMount}from'../../Models/offerings-model';import{useStore}from'effector-react';var initialParams={limit:20,offset:0};export function useOfferingList(){var _useUrlParams=useUrlParams(),urlData=_useUrlParams.urlData;var _useParams=useParams(),organization=_useParams.organization;var group=urlData[URL_KEYS.OFFERING_GROUP_ID];var specialist=urlData[URL_KEYS.SPECIALIST_ID];var _useStore=useStore($offeringsModel),result=_useStore.$offeringsList.result;var _useStore2=useStore($offeringsModel),offeringGroupResult=_useStore2.$offeringGroupList.result;var getOfferingGroupList=useCallback(function(params){if(organization){var data=_objectSpread({organization:organization},params);orgOfferGroupListMount(data);}},[organization]);var getOrgOfferingsList=useCallback(function(params){if(organization){var data=_objectSpread({organization:organization},params);orgOfferingsListMount(data);}},[organization]);var loadMoreOfferings=useCallback(function(){if(result.nextOffset){var data={params:_objectSpread(_objectSpread({},initialParams),{},{offset:result.nextOffset})};if(specialist){data['params']['responsible']=specialist;}else{delete data['params']['responsible'];}if(group){data['params']['group']=group;}getOrgOfferingsList(data);}},[getOrgOfferingsList,specialist,group,result]);var loadMoreOfferingGroup=useCallback(function(){if(offeringGroupResult===null||offeringGroupResult===void 0?void 0:offeringGroupResult.nextOffset){var data={params:_objectSpread(_objectSpread({},initialParams),{},{offset:offeringGroupResult===null||offeringGroupResult===void 0?void 0:offeringGroupResult.nextOffset})};getOfferingGroupList(data);}},[offeringGroupResult,getOfferingGroupList]);useEffect(function(){var timeout=null;timeout=setTimeout(function(){var data={clear:true,params:_objectSpread({},initialParams)};if(specialist){data['params']['specialist']=specialist;}else{delete data['params']['specialist'];}getOfferingGroupList(data);},300);return function(){clearTimeout(timeout);timeout=null;};},[specialist,getOfferingGroupList]);useEffect(function(){var timeout=null;timeout=setTimeout(function(){var data={clear:true,params:_objectSpread({},initialParams)};if(specialist){data['params']['responsible']=specialist;}else{delete data['params']['responsible'];}if(group){data['params']['group']=group;}offeringForceLoading();// getOrgOfferingsList(data)\n},300);return function(){clearTimeout(timeout);timeout=null;};},[getOrgOfferingsList,specialist,group]);return{loadMoreOfferings:loadMoreOfferings,loadMoreOfferingGroup:loadMoreOfferingGroup};}","map":null,"metadata":{},"sourceType":"module"}