{"ast":null,"code":"import _objectSpread from\"/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{combine,createStore}from'effector';import Cookies from'js-cookie';import{fetchCurrencies,fetchDetectLocation}from'./effects';import{changeAppLang,changeMenuOpen,changeSearchFocus,changeShowAccounts,changeSpecPanel,commentIdMount,deviceMount,onReplyCommentDataMount,openFastAuthMount,paymentMethodMount,saveURLMount,socketCountersMount,switchOrgGroupPanel,tokenMount}from'./events';import{fetchAccountInfo,fetchUpdateAccount}from'../account-model/effects';var defaultAppState={saveURL:'',commentId:'',menuOpen:false,searchFocus:false,showAccounts:false,openFastAuth:false,showSpecPanel:false,onReplyCommentData:'',changeOrgGroupPanel:false,paymentMethodValue:'cash',token:Cookies.get('token')||null};var $app=createStore(defaultAppState).on(tokenMount,function(state,token){return _objectSpread(_objectSpread({},state),{},{token:token});}).on(saveURLMount,function(state,saveURL){return _objectSpread(_objectSpread({},state),{},{saveURL:saveURL});}).on(commentIdMount,function(state,commentId){return _objectSpread(_objectSpread({},state),{},{commentId:commentId});}).on(changeMenuOpen,function(state,status){return _objectSpread(_objectSpread({},state),{},{menuOpen:status});}).on(changeSearchFocus,function(state,status){return _objectSpread(_objectSpread({},state),{},{searchFocus:status});}).on(changeSpecPanel,function(state,status){return _objectSpread(_objectSpread({},state),{},{showSpecPanel:status});}).on(openFastAuthMount,function(state,status){return _objectSpread(_objectSpread({},state),{},{openFastAuth:status});}).on(changeShowAccounts,function(state,status){return _objectSpread(_objectSpread({},state),{},{showAccounts:status});}).on(switchOrgGroupPanel,function(state,status){return _objectSpread(_objectSpread({},state),{},{changeOrgGroupPanel:status});}).on(paymentMethodMount,function(state,paymentMethodValue){return _objectSpread(_objectSpread({},state),{},{paymentMethodValue:paymentMethodValue});}).on(onReplyCommentDataMount,function(state,onReplyCommentData){return _objectSpread(_objectSpread({},state),{},{onReplyCommentData:onReplyCommentData});});var $currenciesList=createStore({loading:false,data:[],error:false}).on(fetchCurrencies.pending,function(state,loading){return _objectSpread(_objectSpread({},state),{},{loading:loading});}).on(fetchCurrencies.fail,function(state,_ref){var error=_ref.error;return _objectSpread(_objectSpread({},state),{},{error:error,data:[],result:{}});}).on(fetchCurrencies.done,function(state,res){return _objectSpread(_objectSpread({},state),{},{data:res.result.data.results});});var detectionInfo=localStorage.getItem('detectionInfo');var appLang=localStorage.getItem('lang');var $detectLocationInfo=createStore(detectionInfo?JSON.parse(detectionInfo):{}).on(fetchDetectLocation.done,function(state,res){return res.result.data;});var $appLang=createStore(appLang?JSON.parse(appLang):null).on(fetchDetectLocation.done,function(state,_ref2){var result=_ref2.result;return result.data.lang;}).on(fetchAccountInfo.done,function(state,_ref3){var result=_ref3.result;if(result.data.user_lang!==state){return result.data.user_lang;}return state;}).on(fetchUpdateAccount.done,function(state,_ref4){var result=_ref4.result;if(result.data.user_lang!==state){return result.data.user_lang;}return state;}).on(changeAppLang,function(state,lang){if(state!==lang){return lang;}return state;});$detectLocationInfo.watch(function(state){if(Object.values(state).length>0){localStorage.setItem('detectionInfo',JSON.stringify(state));}else{localStorage.removeItem(detectionInfo);}});var $socketCounters=createStore({chatUnreadCounter:0}).on(socketCountersMount,function(state,payload){return _objectSpread(_objectSpread({},state),payload);});var $device=createStore(null).on(deviceMount,function(state,payload){return payload;});$appLang.watch(function(state){if(state){localStorage.setItem('lang',JSON.stringify(state));}});export var $appModel=combine({$app:$app,$device:$device,$currenciesList:$currenciesList,$socketCounters:$socketCounters,$detectLocationInfo:$detectLocationInfo,$appLang:$appLang});","map":{"version":3,"sources":["/Users/zuhriddinkamilzanov/Desktop/tMed-mobile/src/Models/app/store.js"],"names":["combine","createStore","Cookies","fetchCurrencies","fetchDetectLocation","changeAppLang","changeMenuOpen","changeSearchFocus","changeShowAccounts","changeSpecPanel","commentIdMount","deviceMount","onReplyCommentDataMount","openFastAuthMount","paymentMethodMount","saveURLMount","socketCountersMount","switchOrgGroupPanel","tokenMount","fetchAccountInfo","fetchUpdateAccount","defaultAppState","saveURL","commentId","menuOpen","searchFocus","showAccounts","openFastAuth","showSpecPanel","onReplyCommentData","changeOrgGroupPanel","paymentMethodValue","token","get","$app","on","state","status","$currenciesList","loading","data","error","pending","fail","result","done","res","results","detectionInfo","localStorage","getItem","appLang","$detectLocationInfo","JSON","parse","$appLang","lang","user_lang","watch","Object","values","length","setItem","stringify","removeItem","$socketCounters","chatUnreadCounter","payload","$device","$appModel"],"mappings":"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","sourcesContent":["import {combine, createStore} from 'effector'\r\nimport Cookies from 'js-cookie'\r\nimport {fetchCurrencies, fetchDetectLocation} from './effects'\r\nimport {\r\n    changeAppLang,\r\n    changeMenuOpen,\r\n    changeSearchFocus,\r\n    changeShowAccounts,\r\n    changeSpecPanel,\r\n    commentIdMount,\r\n    deviceMount,\r\n    onReplyCommentDataMount,\r\n    openFastAuthMount,\r\n    paymentMethodMount,\r\n    saveURLMount,\r\n    socketCountersMount,\r\n    switchOrgGroupPanel,\r\n    tokenMount\r\n} from './events'\r\nimport {fetchAccountInfo, fetchUpdateAccount} from '../account-model/effects'\r\n\r\n\r\nconst defaultAppState = {\r\n    saveURL: '',\r\n    commentId: '',\r\n    menuOpen: false,\r\n    searchFocus: false,\r\n    showAccounts: false,\r\n    openFastAuth: false,\r\n    showSpecPanel: false,\r\n    onReplyCommentData: '',\r\n    changeOrgGroupPanel: false,\r\n    paymentMethodValue: 'cash',\r\n    token: Cookies.get('token') || null\r\n}\r\n\r\nconst $app = createStore(defaultAppState)\r\n    .on(tokenMount, (state, token) => ({...state, token}))\r\n    .on(saveURLMount, (state, saveURL) => ({...state, saveURL}))\r\n    .on(commentIdMount, (state, commentId) => ({...state, commentId}))\r\n    .on(changeMenuOpen, (state, status) => ({...state, menuOpen: status}))\r\n    .on(changeSearchFocus, (state, status) => ({...state, searchFocus: status}))\r\n    .on(changeSpecPanel, (state, status) => ({...state, showSpecPanel: status}))\r\n    .on(openFastAuthMount, (state, status) => ({...state, openFastAuth: status}))\r\n    .on(changeShowAccounts, (state, status) => ({...state, showAccounts: status}))\r\n    .on(switchOrgGroupPanel, (state, status) => ({...state, changeOrgGroupPanel: status}))\r\n    .on(paymentMethodMount, (state, paymentMethodValue) => ({...state, paymentMethodValue}))\r\n    .on(onReplyCommentDataMount, (state, onReplyCommentData) => ({...state, onReplyCommentData}))\r\n\r\nconst $currenciesList = createStore({loading: false, data: [], error: false})\r\n    .on(fetchCurrencies.pending, (state, loading) => ({...state, loading}))\r\n    .on(fetchCurrencies.fail, (state, {error}) => ({\r\n        ...state, error, data: [], result: {}\r\n    }))\r\n    .on(fetchCurrencies.done, (state, res) => ({\r\n        ...state, data: res.result.data.results\r\n    }))\r\n\r\nconst detectionInfo = localStorage.getItem('detectionInfo')\r\nconst appLang = localStorage.getItem('lang')\r\n\r\nconst $detectLocationInfo = createStore(detectionInfo ? JSON.parse(detectionInfo) : {})\r\n    .on(fetchDetectLocation.done, (state, res) => res.result.data)\r\n\r\nconst $appLang = createStore(appLang ? JSON.parse(appLang) : null)\r\n    .on(fetchDetectLocation.done, (state, {result}) => result.data.lang)\r\n    .on(fetchAccountInfo.done, (state, {result}) => {\r\n        if (result.data.user_lang !== state) {\r\n            return result.data.user_lang\r\n        }\r\n        return state\r\n    })\r\n    .on(fetchUpdateAccount.done, (state, {result}) => {\r\n        if (result.data.user_lang !== state) {\r\n            return result.data.user_lang\r\n        }\r\n        return state\r\n    })\r\n    .on(changeAppLang, (state, lang) => {\r\n        if (state !== lang) {\r\n            return lang\r\n        }\r\n        return state\r\n    })\r\n\r\n$detectLocationInfo.watch((state) => {\r\n    if (Object.values(state).length > 0) {\r\n        localStorage.setItem('detectionInfo', JSON.stringify(state))\r\n    } else {\r\n        localStorage.removeItem(detectionInfo)\r\n    }\r\n})\r\n\r\nconst $socketCounters = createStore({chatUnreadCounter: 0})\r\n    .on(socketCountersMount, (state, payload) => ({...state, ...payload}))\r\n\r\nconst $device = createStore(null)\r\n    .on(deviceMount, (state, payload) => (payload))\r\n\r\n\r\n$appLang.watch(state => {\r\n    if (state) {\r\n        localStorage.setItem('lang', JSON.stringify(state))\r\n    }\r\n})\r\n\r\nexport const $appModel = combine({\r\n    $app,\r\n    $device,\r\n    $currenciesList,\r\n    $socketCounters,\r\n    $detectLocationInfo,\r\n    $appLang\r\n})"]},"metadata":{},"sourceType":"module"}