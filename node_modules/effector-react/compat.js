'use strict';function e(e){return e&&'object'==typeof e&&'default'in e?e.default:e}function t(e){s.is.store(e)||p('expect useStore argument to be a store');var t=e.getState(),n=i.useReducer((function(e){return e+1}),0)[1],r=i.useRef({store:e,value:t,pending:0});return f((function(){var t=e.updates.watch((function(e){var t=r.current;t.pending||(t.value=e,t.pending=1,n(),t.pending=0)})),o=e.getState(),u=r.current;return u.store===e&&u.value!==o&&(u.value=o,u.pending=1,n(),u.pending=0),u.store=e,t}),[e]),t}function n(e,n){var r,o,u,a;n?(r=n,u=e,a=[]):(r=e.fn,u=e.store,a=e.keys,o=e.updateFilter),s.is.store(u)||p('useStoreMap expects a store'),Array.isArray(a)||p('useStoreMap expects an array as keys'),'function'!=typeof r&&p('useStoreMap expects a function');var c=i.useMemo((function(){return s.createStore(r(u.getState(),a),{updateFilter:o}).on(u,(function(e,t){return r(t,a)}))}),a),l=t(c);return f((function(){return function(){c.off(u),s.clearNode(c,{deep:1})}}),a),l}function r(e,t){return t.displayName=e,t}function o(e,n){function o(e){var r=i.useRef(e),o=t(u);f((function(){return c({props:r.current,state:u.getState()}),function(){l({props:r.current,state:u.getState()})}}),[]);var a=n(e,o);return r.current=e,a}var u;s.is.store(e)?u=e:'object'==typeof e&&null!==e?u=s.combine(e):p('shape should be a store or object with stores');var a='Unknown';u&&u.shortName&&(a=u.shortName);var c=s.createEvent(),l=s.createEvent();return o.mounted=c,o.unmounted=l,r(a+".View",o)}function u(e,n){return r("Connect("+(n.displayName||n.name||'Unknown')+")",(function(r){return i.createElement(n,Object.assign({},r,t(e)))}))}function a(e,t){void 0===t&&(t={});var n=i.useRef(null);f((function(){return e.open(n.current),function(){return e.close(n.current)}}),[e]),function(e,t){if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(var o=0;o<n.length;o++){var u=n[o];if(e[u]!==t[u])return 0}return 1}return 0}(n.current,t)||(n.current=t,e.set(t))}Object.defineProperty(exports,'__esModule',{value:1});var c=require('react'),s=require('effector/compat'),i=e(c),f='undefined'!=typeof window?i.useLayoutEffect:i.useEffect,p=function(e){throw Error(e)};exports.connect=function(e){return function(t){var n=e;return'function'!=typeof e&&(n=t,t=e),u(t,n)}},exports.createComponent=o,exports.createContextComponent=function(e,n,o){return r((e.shortName||'Unknown')+".ContextComponent",(function(r){var u=i.useContext(n),a=t(e);return o(r,a,u)}))},exports.createGate=function(e,t){var n;return void 0===e&&(e='gate'),void 0===t&&(t={}),'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(n=e.domain),e=e.name),function(e){function t(e){return a(t,e),null}var n=e.name,o=e.domain,u=e.defaultState,a=e.hook,c=(o?o.compositeName.fullName+"/":'')+(void 0===n?'gate':n),i=s.createEvent(c+".set"),f=s.createEvent(c+".open"),p=s.createEvent(c+".close"),l=s.createStore(Boolean(0),{name:c+".status"}).on(f,(function(){return Boolean(1)})).on(p,(function(){return Boolean(0)})),v=s.createStore(u,{name:c+".state"}).on(i,(function(e,t){return t})).reset(p);if(o){var m=o.hooks;s.launch({target:[m.store,m.store,m.event,m.event,m.event],params:[l,v,f,p,i]})}return t.open=f,t.close=p,t.status=l,t.state=v,t.set=i,r("Gate:"+c,t)}({name:e,domain:n,defaultState:t,hook:a})},exports.createReactState=u,exports.createStoreConsumer=function(e){return o(e,(function(e,t){return(0,e.children)(t)}))},exports.useEvent=function(e){return e},exports.useGate=a,exports.useList=function(e,o){var u,a,c=[];'object'==typeof o&&null!==o?(o.keys&&(c=o.keys),u=o.fn,o.getKey&&(a=o.getKey)):u=o,s.is.store(e)||p('expect useList first argument to be a store'),'function'!=typeof u&&p("expect useList's renderItem to be a function"),Array.isArray(c)||p("expect useList's keys to be an array");var f=i.useMemo((function(){var t=r((e.shortName||'Unknown')+".Item",(function(t){var r=t.index,o=t.keys;if(l.current[1])return l.current[0](t.value,t.keyVal);var u=n({store:e,keys:[r].concat(o),fn:function(e,t){return e[t[0]]}});return l.current[0](u,r)}));return i.memo(t)}),[e,!!a]),l=i.useRef([u,a]);l.current=[u,a];var v=i.useMemo((function(){return c}),c);if(a)return t(e).map((function(e){var t=l.current[1](e);return i.createElement(f,{keyVal:t,key:t,keys:v,value:e})}));var m=n({store:e,keys:[e],fn:function(e){return e.length}});return Array.from({length:m},(function(e,t){return i.createElement(f,{index:t,key:t,keys:v})}))},exports.useStore=t,exports.useStoreMap=n;
//# sourceMappingURL=compat.js.map
